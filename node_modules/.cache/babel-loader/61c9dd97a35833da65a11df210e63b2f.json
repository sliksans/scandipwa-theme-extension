{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { Field } from \"/home/arturs/scandiweb/extension/src/util/Query\";\n/**\n * Category Query\n * @class CategoryQuery\n * #namespace Query/Category\n */\n\nexport const CategoryQuery = Mosaic.middleware(class CategoryQuery_ extends Mosaic.Extensible() {\n  __construct() {\n    super.__construct();\n\n    this.options = {};\n  }\n\n  getQuery(options = {}) {\n    this.options = options;\n    return new Field('category').addArgument(...this._getConditionalArguments()).addFieldList(this._getDefaultFields()).addField(this._getChildrenFields());\n  }\n\n  _getConditionalArguments() {\n    const {\n      categoryIds\n    } = this.options;\n\n    if (categoryIds) {\n      return ['id', 'Int!', categoryIds];\n    }\n\n    throw new Error(__('There was an error requesting the category'));\n  }\n\n  _getChildrenFields() {\n    return new Field('children').addFieldList(this._getDefaultFields());\n  }\n\n  _getBreadcrumbsField() {\n    return new Field('breadcrumbs').addFieldList(this._getBreadcrumbFields());\n  }\n\n  _getBreadcrumbFields() {\n    return ['category_name', 'category_level', 'category_url', 'category_is_active'];\n  }\n\n  _getCmsBlockFields() {\n    return ['content', 'disabled', 'title', 'identifier'];\n  }\n\n  _getCmsBlockField() {\n    return new Field('cms_block').addFieldList(this._getCmsBlockFields());\n  }\n\n  _getDefaultFields() {\n    return ['id', 'url', 'name', 'image', 'url_key', 'url_path', 'is_active', 'meta_title', 'description', 'canonical_url', 'product_count', 'meta_keywords', 'default_sort_by', 'meta_description', 'landing_page', 'display_mode', 'is_anchor', this._getCmsBlockField(), this._getBreadcrumbsField()];\n  }\n\n}, \"Query/Category\");\nexport default new CategoryQuery();","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/query/Category.query.js"],"names":["Field","__construct","options","getQuery","addArgument","_getConditionalArguments","addFieldList","_getDefaultFields","addField","_getChildrenFields","categoryIds","Error","__","_getBreadcrumbsField","_getBreadcrumbFields","_getCmsBlockFields","_getCmsBlockField","CategoryQuery"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,KAAT;AAEA;AACA;AACA;AACA;AACA;;AACA,gGAA2B;AACvBC,EAAAA,WAAW,GAAG;AACV,UAAMA,WAAN;;AACA,SAAKC,OAAL,GAAe,EAAf;AACH;;AAEDC,EAAAA,QAAQ,CAACD,OAAO,GAAG,EAAX,EAAe;AACnB,SAAKA,OAAL,GAAeA,OAAf;AAEA,WAAO,IAAIF,KAAJ,CAAU,UAAV,EACFI,WADE,CACU,GAAG,KAAKC,wBAAL,EADb,EAEFC,YAFE,CAEW,KAAKC,iBAAL,EAFX,EAGFC,QAHE,CAGO,KAAKC,kBAAL,EAHP,CAAP;AAIH;;AAEDJ,EAAAA,wBAAwB,GAAG;AACvB,UAAM;AAAEK,MAAAA;AAAF,QAAkB,KAAKR,OAA7B;;AAEA,QAAIQ,WAAJ,EAAiB;AACb,aAAO,CAAC,IAAD,EAAO,MAAP,EAAeA,WAAf,CAAP;AACH;;AAED,UAAM,IAAIC,KAAJ,CAAUC,EAAE,CAAC,4CAAD,CAAZ,CAAN;AACH;;AAEDH,EAAAA,kBAAkB,GAAG;AACjB,WAAO,IAAIT,KAAJ,CAAU,UAAV,EACFM,YADE,CACW,KAAKC,iBAAL,EADX,CAAP;AAEH;;AAEDM,EAAAA,oBAAoB,GAAG;AACnB,WAAO,IAAIb,KAAJ,CAAU,aAAV,EACFM,YADE,CACW,KAAKQ,oBAAL,EADX,CAAP;AAEH;;AAEDA,EAAAA,oBAAoB,GAAG;AACnB,WAAO,CACH,eADG,EAEH,gBAFG,EAGH,cAHG,EAIH,oBAJG,CAAP;AAMH;;AAEDC,EAAAA,kBAAkB,GAAG;AACjB,WAAO,CACH,SADG,EAEH,UAFG,EAGH,OAHG,EAIH,YAJG,CAAP;AAMH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,WAAO,IAAIhB,KAAJ,CAAU,WAAV,EACFM,YADE,CACW,KAAKS,kBAAL,EADX,CAAP;AAEH;;AAEDR,EAAAA,iBAAiB,GAAG;AAChB,WAAO,CACH,IADG,EAEH,KAFG,EAGH,MAHG,EAIH,OAJG,EAKH,SALG,EAMH,UANG,EAOH,WAPG,EAQH,YARG,EASH,aATG,EAUH,eAVG,EAWH,eAXG,EAYH,eAZG,EAaH,iBAbG,EAcH,kBAdG,EAeH,cAfG,EAgBH,cAhBG,EAiBH,WAjBG,EAkBH,KAAKS,iBAAL,EAlBG,EAmBH,KAAKH,oBAAL,EAnBG,CAAP;AAqBH;;AAhFsB,CAA3B;AAmFA,eAAe,IAAII,aAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { Field } from 'Util/Query';\n\n/**\n * Category Query\n * @class CategoryQuery\n * @namespace Query/Category\n */\nexport class CategoryQuery {\n    __construct() {\n        super.__construct();\n        this.options = {};\n    }\n\n    getQuery(options = {}) {\n        this.options = options;\n\n        return new Field('category')\n            .addArgument(...this._getConditionalArguments())\n            .addFieldList(this._getDefaultFields())\n            .addField(this._getChildrenFields());\n    }\n\n    _getConditionalArguments() {\n        const { categoryIds } = this.options;\n\n        if (categoryIds) {\n            return ['id', 'Int!', categoryIds];\n        }\n\n        throw new Error(__('There was an error requesting the category'));\n    }\n\n    _getChildrenFields() {\n        return new Field('children')\n            .addFieldList(this._getDefaultFields());\n    }\n\n    _getBreadcrumbsField() {\n        return new Field('breadcrumbs')\n            .addFieldList(this._getBreadcrumbFields());\n    }\n\n    _getBreadcrumbFields() {\n        return [\n            'category_name',\n            'category_level',\n            'category_url',\n            'category_is_active'\n        ];\n    }\n\n    _getCmsBlockFields() {\n        return [\n            'content',\n            'disabled',\n            'title',\n            'identifier'\n        ];\n    }\n\n    _getCmsBlockField() {\n        return new Field('cms_block')\n            .addFieldList(this._getCmsBlockFields());\n    }\n\n    _getDefaultFields() {\n        return [\n            'id',\n            'url',\n            'name',\n            'image',\n            'url_key',\n            'url_path',\n            'is_active',\n            'meta_title',\n            'description',\n            'canonical_url',\n            'product_count',\n            'meta_keywords',\n            'default_sort_by',\n            'meta_description',\n            'landing_page',\n            'display_mode',\n            'is_anchor',\n            this._getCmsBlockField(),\n            this._getBreadcrumbsField()\n        ];\n    }\n}\n\nexport default new CategoryQuery();\n"]},"metadata":{},"sourceType":"module"}