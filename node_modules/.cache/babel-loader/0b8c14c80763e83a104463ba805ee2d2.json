{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CheckoutOrderSummary/CheckoutOrderSummary.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport CartCoupon from \"/home/arturs/scandiweb/scandipwa/src/component/CartCoupon\";\nimport CartItem from \"/home/arturs/scandiweb/scandipwa/src/component/CartItem\";\nimport CheckoutOrderSummaryPriceLine from \"/home/arturs/scandiweb/scandipwa/src/component/CheckoutOrderSummaryPriceLine\";\nimport ExpandableContent from \"/home/arturs/scandiweb/scandipwa/src/component/ExpandableContent\";\nimport { BILLING_STEP, SHIPPING_STEP } from \"/home/arturs/scandiweb/scandipwa/src/route/Checkout/Checkout.config\";\nimport { TotalsType } from \"/home/arturs/scandiweb/scandipwa/src/type/MiniCart\";\nimport \"./CheckoutOrderSummary.style\";\n/**\n * Checkout Order Summary component\n * #namespace Component/CheckoutOrderSummary/Component\n */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const CheckoutOrderSummary = Mosaic.middleware((_temp = _class = class CheckoutOrderSummary_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    this.renderItem = function (item) {\n      const {\n        totals: {\n          quote_currency_code\n        }\n      } = _this.props;\n      const {\n        item_id\n      } = item;\n      return /*#__PURE__*/_checkBEM(React, CartItem, {\n        key: item_id,\n        item: item,\n        currency_code: quote_currency_code,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      });\n    };\n  }\n\n  renderPriceLine(price, title, mods) {\n    if (!price) {\n      return null;\n    }\n\n    const {\n      totals: {\n        quote_currency_code\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, CheckoutOrderSummaryPriceLine, {\n      price: price,\n      currency: quote_currency_code,\n      title: title,\n      mods: mods,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderDiscount() {\n    const {\n      totals: {\n        applied_rule_ids,\n        discount_amount,\n        coupon_code\n      }\n    } = this.props;\n\n    if (!applied_rule_ids) {\n      return null;\n    }\n\n    if (!coupon_code) {\n      return this.renderPriceLine(-Math.abs(discount_amount), __('Discount %s:', ''));\n    }\n\n    return this.renderPriceLine(-Math.abs(discount_amount), __('Discount/Coupon %s:', coupon_code.toUpperCase()));\n  }\n\n  renderItems() {\n    const {\n      totals: {\n        items = []\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"OrderItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"CartItemList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, items.map(this.renderItem)));\n  }\n\n  renderHeading() {\n    const {\n      totals: {\n        items_qty\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"h3\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"Header\",\n      mix: {\n        block: 'CheckoutPage',\n        elem: 'Heading',\n        mods: {\n          hasDivider: true\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, __('Order Summary')), /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"ItemsInCart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, __('%s Item(s) In Cart', items_qty)));\n  }\n\n  renderSubTotal() {\n    const {\n      totals: {\n        quote_currency_code\n      },\n      cartSubtotal,\n      cartSubtotalSubPrice\n    } = this.props;\n\n    const title = __('Cart Subtotal');\n\n    if (cartSubtotalSubPrice) {\n      return /*#__PURE__*/_checkBEM(React, CheckoutOrderSummaryPriceLine, {\n        price: cartSubtotal,\n        currency: quote_currency_code,\n        title: title,\n        subPrice: cartSubtotalSubPrice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return this.renderPriceLine(cartSubtotal, title);\n  }\n\n  getShippingLabel() {\n    const {\n      checkoutStep\n    } = this.props;\n\n    if (checkoutStep === BILLING_STEP) {\n      return __('Shipping');\n    }\n\n    return __('Estimated Shipping');\n  }\n\n  renderShipping() {\n    const {\n      totals: {\n        quote_currency_code\n      },\n      cartShippingPrice,\n      cartShippingSubPrice\n    } = this.props;\n    const title = this.getShippingLabel();\n    const mods = {\n      divider: true\n    };\n\n    if (!cartShippingSubPrice) {\n      return this.renderPriceLine(cartShippingPrice, title, mods);\n    }\n\n    return /*#__PURE__*/_checkBEM(React, CheckoutOrderSummaryPriceLine, {\n      price: cartShippingPrice,\n      currency: quote_currency_code,\n      title: title,\n      mods: mods,\n      subPrice: cartShippingSubPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderOrderTotal() {\n    const {\n      totals: {\n        grand_total,\n        quote_currency_code\n      },\n      cartTotalSubPrice\n    } = this.props;\n\n    const title = __('Order total');\n\n    if (cartTotalSubPrice) {\n      return /*#__PURE__*/_checkBEM(React, CheckoutOrderSummaryPriceLine, {\n        price: grand_total,\n        currency: quote_currency_code,\n        title: title,\n        subPrice: cartTotalSubPrice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return this.renderPriceLine(grand_total, title);\n  }\n\n  renderTaxFullSummary() {\n    var _this2 = this;\n\n    const {\n      totals: {\n        applied_taxes = []\n      },\n      cartDisplayConfig: {\n        display_full_tax_summary\n      } = {}\n    } = this.props;\n\n    if (!display_full_tax_summary || !applied_taxes.length) {\n      return null;\n    }\n\n    return applied_taxes.map(function ({\n      rates\n    }) {\n      return rates;\n    }).reduce(function (rates, rate) {\n      return rates.concat(rate);\n    }, []).map(function ({\n      percent,\n      title\n    }, i) {\n      return (\n        /*#__PURE__*/\n        // eslint-disable-next-line react/no-array-index-key\n        _checkBEM(React, \"div\", {\n          block: \"CheckoutOrderSummary\",\n          elem: \"AppendedContent\",\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 17\n          }\n        }, `${title} (${percent}%)`)\n      );\n    });\n  }\n\n  renderTax() {\n    const {\n      totals: {\n        tax_amount = 0,\n        quote_currency_code\n      },\n      cartDisplayConfig: {\n        display_full_tax_summary,\n        display_zero_tax_subtotal\n      } = {}\n    } = this.props;\n\n    if (!tax_amount && !display_zero_tax_subtotal) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, CheckoutOrderSummaryPriceLine, {\n      price: tax_amount.toFixed(2) // since we display tax even if value is 0\n      ,\n      currency: quote_currency_code,\n      title: __('Tax'),\n      mods: {\n        withAppendedContent: display_full_tax_summary\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }\n    }, this.renderTaxFullSummary());\n  }\n\n  renderTotals() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"OrderTotals\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }\n    }, this.renderSubTotal(), this.renderShipping(), this.renderDiscount(), this.renderTax(), this.renderOrderTotal()));\n  }\n\n  renderCoupon() {\n    const {\n      couponCode,\n      onCouponCodeUpdate,\n      checkoutStep\n    } = this.props;\n\n    if (checkoutStep === SHIPPING_STEP) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, CartCoupon, {\n      couponCode: couponCode,\n      mix: {\n        block: 'CheckoutOrderSummary',\n        elem: 'Coupon'\n      },\n      title: __('Have a discount code?'),\n      onCouponCodeUpdate: onCouponCodeUpdate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderCmsBlock() {\n    const {\n      renderCmsBlock\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutOrderSummary\",\n      elem: \"CmsBlock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 13\n      }\n    }, renderCmsBlock());\n  }\n\n  renderExpandableContent() {\n    return /*#__PURE__*/_checkBEM(React, ExpandableContent, {\n      heading: __('Order summary'),\n      mix: {\n        block: 'CheckoutOrderSummary',\n        elem: 'ExpandableContent'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }\n    }, this.renderItems(), this.renderCmsBlock(), this.renderCoupon(), this.renderTotals());\n  }\n\n  renderContent() {\n    const {\n      isExpandable\n    } = this.props;\n\n    if (isExpandable) {\n      return this.renderExpandableContent();\n    }\n\n    return /*#__PURE__*/_checkBEM(React, React.Fragment, null, this.renderHeading(), this.renderItems(), this.renderTotals());\n  }\n\n  render() {\n    return /*#__PURE__*/_checkBEM(React, \"article\", {\n      block: \"CheckoutOrderSummary\",\n      \"aria-label\": \"Order Summary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 13\n      }\n    }, this.renderContent());\n  }\n\n}, _class.propTypes = {\n  totals: TotalsType,\n  checkoutStep: PropTypes.string.isRequired,\n  couponCode: PropTypes.string,\n  renderCmsBlock: PropTypes.func,\n  isExpandable: PropTypes.bool,\n  cartDisplayConfig: PropTypes.object.isRequired,\n  cartSubtotal: PropTypes.number,\n  cartSubtotalSubPrice: PropTypes.number,\n  cartShippingPrice: PropTypes.number,\n  cartShippingSubPrice: PropTypes.number,\n  cartTotalSubPrice: PropTypes.number,\n  onCouponCodeUpdate: PropTypes.func\n}, _class.defaultProps = {\n  totals: {},\n  couponCode: '',\n  renderCmsBlock: function () {},\n  isExpandable: false,\n  cartSubtotal: 0,\n  cartSubtotalSubPrice: null,\n  cartShippingPrice: 0,\n  cartShippingSubPrice: null,\n  cartTotalSubPrice: null,\n  onCouponCodeUpdate: function () {}\n}, _temp), \"Component/CheckoutOrderSummary/Component\");\nexport default CheckoutOrderSummary;","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CheckoutOrderSummary/CheckoutOrderSummary.component.js"],"names":["PropTypes","PureComponent","CartCoupon","CartItem","CheckoutOrderSummaryPriceLine","ExpandableContent","BILLING_STEP","SHIPPING_STEP","TotalsType","renderItem","item","totals","quote_currency_code","props","item_id","renderPriceLine","price","title","mods","renderDiscount","applied_rule_ids","discount_amount","coupon_code","Math","abs","__","toUpperCase","renderItems","items","map","renderHeading","items_qty","block","elem","hasDivider","renderSubTotal","cartSubtotal","cartSubtotalSubPrice","getShippingLabel","checkoutStep","renderShipping","cartShippingPrice","cartShippingSubPrice","divider","renderOrderTotal","grand_total","cartTotalSubPrice","renderTaxFullSummary","applied_taxes","cartDisplayConfig","display_full_tax_summary","length","rates","reduce","rate","concat","percent","i","renderTax","tax_amount","display_zero_tax_subtotal","toFixed","withAppendedContent","renderTotals","renderCoupon","couponCode","onCouponCodeUpdate","renderCmsBlock","renderExpandableContent","renderContent","isExpandable","render","propTypes","string","isRequired","func","bool","object","number","defaultProps","CheckoutOrderSummary"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartCoupon from 'Component/CartCoupon';\nimport CartItem from 'Component/CartItem';\nimport CheckoutOrderSummaryPriceLine from 'Component/CheckoutOrderSummaryPriceLine';\nimport ExpandableContent from 'Component/ExpandableContent';\nimport { BILLING_STEP, SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { TotalsType } from 'Type/MiniCart';\n\nimport './CheckoutOrderSummary.style';\n\n/**\n * Checkout Order Summary component\n * @namespace Component/CheckoutOrderSummary/Component\n */\nexport class CheckoutOrderSummary extends PureComponent {\n    static propTypes = {\n        totals: TotalsType,\n        checkoutStep: PropTypes.string.isRequired,\n        couponCode: PropTypes.string,\n        renderCmsBlock: PropTypes.func,\n        isExpandable: PropTypes.bool,\n        cartDisplayConfig: PropTypes.object.isRequired,\n        cartSubtotal: PropTypes.number,\n        cartSubtotalSubPrice: PropTypes.number,\n        cartShippingPrice: PropTypes.number,\n        cartShippingSubPrice: PropTypes.number,\n        cartTotalSubPrice: PropTypes.number,\n        onCouponCodeUpdate: PropTypes.func\n    };\n\n    static defaultProps = {\n        totals: {},\n        couponCode: '',\n        renderCmsBlock: () => {},\n        isExpandable: false,\n        cartSubtotal: 0,\n        cartSubtotalSubPrice: null,\n        cartShippingPrice: 0,\n        cartShippingSubPrice: null,\n        cartTotalSubPrice: null,\n        onCouponCodeUpdate: () => {}\n    };\n\n    renderPriceLine(price, title, mods) {\n        if (!price) {\n            return null;\n        }\n\n        const { totals: { quote_currency_code } } = this.props;\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ price }\n              currency={ quote_currency_code }\n              title={ title }\n              mods={ mods }\n            />\n        );\n    }\n\n    renderItem = (item) => {\n        const {\n            totals: {\n                quote_currency_code\n            }\n        } = this.props;\n\n        const { item_id } = item;\n\n        return (\n            <CartItem\n              key={ item_id }\n              item={ item }\n              currency_code={ quote_currency_code }\n            />\n        );\n    };\n\n    renderDiscount() {\n        const {\n            totals: {\n                applied_rule_ids,\n                discount_amount,\n                coupon_code\n            }\n        } = this.props;\n\n        if (!applied_rule_ids) {\n            return null;\n        }\n\n        if (!coupon_code) {\n            return this.renderPriceLine(\n                -Math.abs(discount_amount),\n                __('Discount %s:', '')\n            );\n        }\n\n        return this.renderPriceLine(\n            -Math.abs(discount_amount),\n            __('Discount/Coupon %s:', coupon_code.toUpperCase())\n        );\n    }\n\n    renderItems() {\n        const { totals: { items = [] } } = this.props;\n\n        return (\n            <div block=\"CheckoutOrderSummary\" elem=\"OrderItems\">\n                <div block=\"CheckoutOrderSummary\" elem=\"CartItemList\">\n                    { items.map(this.renderItem) }\n                </div>\n            </div>\n        );\n    }\n\n    renderHeading() {\n        const { totals: { items_qty } } = this.props;\n\n        return (\n            <h3\n              block=\"CheckoutOrderSummary\"\n              elem=\"Header\"\n              mix={ { block: 'CheckoutPage', elem: 'Heading', mods: { hasDivider: true } } }\n            >\n                <span>{ __('Order Summary') }</span>\n                <p block=\"CheckoutOrderSummary\" elem=\"ItemsInCart\">{ __('%s Item(s) In Cart', items_qty) }</p>\n            </h3>\n        );\n    }\n\n    renderSubTotal() {\n        const {\n            totals: {\n                quote_currency_code\n            },\n            cartSubtotal,\n            cartSubtotalSubPrice\n        } = this.props;\n        const title = __('Cart Subtotal');\n\n        if (cartSubtotalSubPrice) {\n            return (\n                <CheckoutOrderSummaryPriceLine\n                  price={ cartSubtotal }\n                  currency={ quote_currency_code }\n                  title={ title }\n                  subPrice={ cartSubtotalSubPrice }\n                />\n            );\n        }\n\n        return this.renderPriceLine(cartSubtotal, title);\n    }\n\n    getShippingLabel() {\n        const { checkoutStep } = this.props;\n\n        if (checkoutStep === BILLING_STEP) {\n            return __('Shipping');\n        }\n\n        return __('Estimated Shipping');\n    }\n\n    renderShipping() {\n        const {\n            totals: {\n                quote_currency_code\n            },\n            cartShippingPrice,\n            cartShippingSubPrice\n        } = this.props;\n        const title = this.getShippingLabel();\n        const mods = { divider: true };\n\n        if (!cartShippingSubPrice) {\n            return this.renderPriceLine(cartShippingPrice, title, mods);\n        }\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ cartShippingPrice }\n              currency={ quote_currency_code }\n              title={ title }\n              mods={ mods }\n              subPrice={ cartShippingSubPrice }\n            />\n        );\n    }\n\n    renderOrderTotal() {\n        const {\n            totals: {\n                grand_total,\n                quote_currency_code\n            },\n            cartTotalSubPrice\n        } = this.props;\n        const title = __('Order total');\n\n        if (cartTotalSubPrice) {\n            return (\n                <CheckoutOrderSummaryPriceLine\n                  price={ grand_total }\n                  currency={ quote_currency_code }\n                  title={ title }\n                  subPrice={ cartTotalSubPrice }\n                />\n            );\n        }\n\n        return this.renderPriceLine(grand_total, title);\n    }\n\n    renderTaxFullSummary() {\n        const {\n            totals: {\n                applied_taxes = []\n            },\n            cartDisplayConfig: {\n                display_full_tax_summary\n            } = {}\n        } = this.props;\n\n        if (!display_full_tax_summary || !applied_taxes.length) {\n            return null;\n        }\n\n        return applied_taxes\n            .map(({ rates }) => rates)\n            .reduce((rates, rate) => rates.concat(rate), [])\n            .map(({ percent, title }, i) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <div block=\"CheckoutOrderSummary\" elem=\"AppendedContent\" key={ i }>\n                    { `${title} (${percent}%)` }\n                </div>\n            ));\n    }\n\n    renderTax() {\n        const {\n            totals: {\n                tax_amount = 0,\n                quote_currency_code\n            },\n            cartDisplayConfig: {\n                display_full_tax_summary,\n                display_zero_tax_subtotal\n            } = {}\n        } = this.props;\n\n        if (!tax_amount && !display_zero_tax_subtotal) {\n            return null;\n        }\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ tax_amount.toFixed(2) } // since we display tax even if value is 0\n              currency={ quote_currency_code }\n              title={ __('Tax') }\n              mods={ { withAppendedContent: display_full_tax_summary } }\n            >\n                { this.renderTaxFullSummary() }\n            </CheckoutOrderSummaryPriceLine>\n        );\n    }\n\n    renderTotals() {\n        return (\n            <div block=\"CheckoutOrderSummary\" elem=\"OrderTotals\">\n                <ul>\n                    { this.renderSubTotal() }\n                    { this.renderShipping() }\n                    { this.renderDiscount() }\n                    { this.renderTax() }\n                    { this.renderOrderTotal() }\n                </ul>\n            </div>\n        );\n    }\n\n    renderCoupon() {\n        const { couponCode, onCouponCodeUpdate, checkoutStep } = this.props;\n\n        if (checkoutStep === SHIPPING_STEP) {\n            return null;\n        }\n\n        return (\n            <CartCoupon\n              couponCode={ couponCode }\n              mix={ { block: 'CheckoutOrderSummary', elem: 'Coupon' } }\n              title={ __('Have a discount code?') }\n              onCouponCodeUpdate={ onCouponCodeUpdate }\n            />\n        );\n    }\n\n    renderCmsBlock() {\n        const { renderCmsBlock } = this.props;\n\n        return (\n            <div\n              block=\"CheckoutOrderSummary\"\n              elem=\"CmsBlock\"\n            >\n                { renderCmsBlock() }\n            </div>\n        );\n    }\n\n    renderExpandableContent() {\n        return (\n            <ExpandableContent\n              heading={ __('Order summary') }\n              mix={ { block: 'CheckoutOrderSummary', elem: 'ExpandableContent' } }\n            >\n                { this.renderItems() }\n                { this.renderCmsBlock() }\n                { this.renderCoupon() }\n                { this.renderTotals() }\n            </ExpandableContent>\n        );\n    }\n\n    renderContent() {\n        const { isExpandable } = this.props;\n\n        if (isExpandable) {\n            return this.renderExpandableContent();\n        }\n\n        return (\n            <>\n                { this.renderHeading() }\n                { this.renderItems() }\n                { this.renderTotals() }\n            </>\n        );\n    }\n\n    render() {\n        return (\n            <article block=\"CheckoutOrderSummary\" aria-label=\"Order Summary\">\n                { this.renderContent() }\n            </article>\n        );\n    }\n}\n\nexport default CheckoutOrderSummary;\n"]},"metadata":{},"sourceType":"module"}