{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CartOverlay/CartOverlay.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport CartItem from \"/home/arturs/scandiweb/scandipwa/src/component/CartItem\";\nimport CmsBlock from \"/home/arturs/scandiweb/scandipwa/src/component/CmsBlock\";\nimport { CART_OVERLAY } from \"/home/arturs/scandiweb/scandipwa/src/component/Header/Header.config\";\nimport Link from \"/home/arturs/scandiweb/scandipwa/src/component/Link\";\nimport Overlay from \"/home/arturs/scandiweb/scandipwa/src/component/Overlay\";\nimport { OVERLAY_PLACEHOLDER } from \"/home/arturs/scandiweb/scandipwa/src/component/PopupSuspense/PopupSuspense.config\";\nimport { DeviceType } from \"/home/arturs/scandiweb/scandipwa/src/type/Device\";\nimport { TotalsType } from \"/home/arturs/scandiweb/scandipwa/src/type/MiniCart\";\nimport { formatPrice } from \"/home/arturs/scandiweb/scandipwa/src/util/Price\";\nimport \"./CartOverlay.style\";\n/** #namespace Component/CartOverlay/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const CartOverlay = Mosaic.middleware((_temp = _class = class CartOverlay_ extends Mosaic.Extensible(PureComponent) {\n  componentDidMount() {\n    const {\n      showOverlay,\n      device,\n      activeOverlay\n    } = this.props;\n\n    if (!device.isMobile && activeOverlay === OVERLAY_PLACEHOLDER) {\n      showOverlay(CART_OVERLAY);\n    }\n  }\n\n  renderPriceLine(price) {\n    const {\n      currencyCode\n    } = this.props;\n    return formatPrice(price, currencyCode);\n  }\n\n  renderCartItems() {\n    var _this = this;\n\n    const {\n      totals: {\n        items,\n        quote_currency_code\n      }\n    } = this.props;\n\n    if (!items || items.length < 1) {\n      return this.renderNoCartItems();\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CartOverlay\",\n      elem: \"Items\",\n      \"aria-label\": \"List of items in cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, items.map(function (item) {\n      return /*#__PURE__*/_checkBEM(React, CartItem, {\n        key: item.item_id,\n        item: item,\n        currency_code: quote_currency_code,\n        isEditing: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }\n      });\n    }));\n  }\n\n  renderNoCartItems() {\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"CartOverlay\",\n      elem: \"Empty\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, __('You have no items in your shopping cart.'));\n  }\n\n  renderOrderTotalExlTax() {\n    const {\n      cartTotalSubPrice\n    } = this.props;\n\n    if (!cartTotalSubPrice) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, `${__('Excl. tax:')} ${this.renderPriceLine(cartTotalSubPrice)}`);\n  }\n\n  renderTotals() {\n    const {\n      totals: {\n        grand_total = 0\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"dl\", {\n      block: \"CartOverlay\",\n      elem: \"Total\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, __('Order total:')), /*#__PURE__*/_checkBEM(React, \"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, this.renderPriceLine(grand_total), this.renderOrderTotalExlTax()));\n  }\n\n  renderTax() {\n    const {\n      totals: {\n        tax_amount = 0\n      } = {},\n      cartDisplaySettings: {\n        display_zero_tax_subtotal\n      } = {}\n    } = this.props;\n\n    if (!tax_amount && !display_zero_tax_subtotal) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"dl\", {\n      block: \"CartOverlay\",\n      elem: \"Tax\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, __('Tax total:')), /*#__PURE__*/_checkBEM(React, \"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, this.renderPriceLine(tax_amount)));\n  }\n\n  renderEstimatedShippingSubPrice() {\n    const {\n      cartShippingSubPrice\n    } = this.props;\n\n    if (!cartShippingSubPrice) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, `${__('Excl. tax:')} ${this.renderPriceLine(cartShippingSubPrice)}`);\n  }\n\n  renderEstimatedShipping() {\n    const {\n      cartShippingPrice\n    } = this.props;\n\n    if (!cartShippingPrice) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"dl\", {\n      block: \"CartOverlay\",\n      elem: \"Shipping\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, __('Estimated Shipping: ')), /*#__PURE__*/_checkBEM(React, \"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, this.renderPriceLine(cartShippingPrice), this.renderEstimatedShippingSubPrice()));\n  }\n\n  renderDiscount() {\n    const {\n      totals: {\n        applied_rule_ids,\n        discount_amount,\n        coupon_code\n      }\n    } = this.props;\n\n    if (!applied_rule_ids || !discount_amount) {\n      return null;\n    }\n\n    if (!coupon_code) {\n      return /*#__PURE__*/_checkBEM(React, \"dl\", {\n        block: \"CartOverlay\",\n        elem: \"Discount\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/_checkBEM(React, \"dt\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      }, __('Discount: ')), /*#__PURE__*/_checkBEM(React, \"dd\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, `-${this.renderPriceLine(Math.abs(discount_amount))}`));\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"dl\", {\n      block: \"CartOverlay\",\n      elem: \"Discount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, __('Discount/Coupon '), /*#__PURE__*/_checkBEM(React, \"strong\", {\n      block: \"CartOverlay\",\n      elem: \"DiscountCoupon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, coupon_code.toUpperCase())), /*#__PURE__*/_checkBEM(React, \"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, `-${this.renderPriceLine(Math.abs(discount_amount))}`));\n  }\n\n  renderSecureCheckoutButton() {\n    const {\n      handleCheckoutClick,\n      hasOutOfStockProductsInCart\n    } = this.props;\n    const options = hasOutOfStockProductsInCart ? {\n      onClick: function (e) {\n        return e.preventDefault();\n      },\n      disabled: true\n    } : {};\n    return /*#__PURE__*/_checkBEM(React, \"button\", Object.assign({\n      block: \"CartOverlay\",\n      elem: \"CheckoutButton\",\n      mix: {\n        block: 'Button'\n      },\n      onClick: handleCheckoutClick\n    }, options, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/_checkBEM(React, \"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }), __('Secure checkout'));\n  }\n\n  renderActions() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CartOverlay\",\n      elem: \"Actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, Link, {\n      block: \"CartOverlay\",\n      elem: \"CartButton\",\n      mix: {\n        block: 'Button',\n        mods: {\n          isHollow: true\n        }\n      },\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }, __('View cart')), this.renderSecureCheckoutButton());\n  }\n\n  renderCartAdditional() {\n    const {\n      totals: {\n        items\n      }\n    } = this.props;\n\n    if (!items || items.length < 1) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CartOverlay\",\n      elem: \"Additional\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 13\n      }\n    }, this.renderEstimatedShipping(), this.renderDiscount(), this.renderTax(), this.renderTotals(), this.renderOutOfStockProductsWarning(), this.renderActions());\n  }\n\n  renderPromo() {\n    const {\n      minicart_content: {\n        minicart_cms\n      } = {}\n    } = window.contentConfiguration;\n\n    if (minicart_cms) {\n      return /*#__PURE__*/_checkBEM(React, CmsBlock, {\n        identifier: minicart_cms,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"CartOverlay\",\n      elem: \"Promo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 13\n      }\n    }, __('Free shipping on order 49$ and more.'));\n  }\n\n  renderOutOfStockProductsWarning() {\n    const {\n      hasOutOfStockProductsInCart\n    } = this.props;\n\n    if (!hasOutOfStockProductsInCart) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CartOverlay\",\n      elem: \"OutOfStockProductsWarning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }\n    }, __('Remove out of stock products from cart'));\n  }\n\n  render() {\n    const {\n      changeHeaderState\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, Overlay, {\n      id: CART_OVERLAY,\n      onVisible: changeHeaderState,\n      mix: {\n        block: 'CartOverlay'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }\n    }, this.renderPromo(), this.renderCartItems(), this.renderCartAdditional());\n  }\n\n}, _class.propTypes = {\n  totals: TotalsType.isRequired,\n  device: DeviceType.isRequired,\n  changeHeaderState: PropTypes.func.isRequired,\n  isEditing: PropTypes.bool.isRequired,\n  handleCheckoutClick: PropTypes.func.isRequired,\n  currencyCode: PropTypes.string.isRequired,\n  showOverlay: PropTypes.func.isRequired,\n  activeOverlay: PropTypes.string.isRequired,\n  hasOutOfStockProductsInCart: PropTypes.bool,\n  cartTotalSubPrice: PropTypes.number,\n  cartShippingPrice: PropTypes.number,\n  cartShippingSubPrice: PropTypes.number,\n  cartDisplaySettings: PropTypes.object.isRequired\n}, _class.defaultProps = {\n  hasOutOfStockProductsInCart: false,\n  cartTotalSubPrice: null,\n  cartShippingPrice: 0,\n  cartShippingSubPrice: null\n}, _temp), \"Component/CartOverlay/Component\");\nexport default CartOverlay;","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CartOverlay/CartOverlay.component.js"],"names":["PropTypes","PureComponent","CartItem","CmsBlock","CART_OVERLAY","Link","Overlay","OVERLAY_PLACEHOLDER","DeviceType","TotalsType","formatPrice","componentDidMount","showOverlay","device","activeOverlay","props","isMobile","renderPriceLine","price","currencyCode","renderCartItems","totals","items","quote_currency_code","length","renderNoCartItems","map","item","item_id","__","renderOrderTotalExlTax","cartTotalSubPrice","renderTotals","grand_total","renderTax","tax_amount","cartDisplaySettings","display_zero_tax_subtotal","renderEstimatedShippingSubPrice","cartShippingSubPrice","renderEstimatedShipping","cartShippingPrice","renderDiscount","applied_rule_ids","discount_amount","coupon_code","Math","abs","toUpperCase","renderSecureCheckoutButton","handleCheckoutClick","hasOutOfStockProductsInCart","options","onClick","e","preventDefault","disabled","block","renderActions","mods","isHollow","renderCartAdditional","renderOutOfStockProductsWarning","renderPromo","minicart_content","minicart_cms","window","contentConfiguration","render","changeHeaderState","propTypes","isRequired","func","isEditing","bool","string","number","object","defaultProps","CartOverlay"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartItem from 'Component/CartItem';\nimport CmsBlock from 'Component/CmsBlock';\nimport { CART_OVERLAY } from 'Component/Header/Header.config';\nimport Link from 'Component/Link';\nimport Overlay from 'Component/Overlay';\nimport { OVERLAY_PLACEHOLDER } from 'Component/PopupSuspense/PopupSuspense.config';\nimport { DeviceType } from 'Type/Device';\nimport { TotalsType } from 'Type/MiniCart';\nimport { formatPrice } from 'Util/Price';\n\nimport './CartOverlay.style';\n\n/** @namespace Component/CartOverlay/Component */\nexport class CartOverlay extends PureComponent {\n    static propTypes = {\n        totals: TotalsType.isRequired,\n        device: DeviceType.isRequired,\n        changeHeaderState: PropTypes.func.isRequired,\n        isEditing: PropTypes.bool.isRequired,\n        handleCheckoutClick: PropTypes.func.isRequired,\n        currencyCode: PropTypes.string.isRequired,\n        showOverlay: PropTypes.func.isRequired,\n        activeOverlay: PropTypes.string.isRequired,\n        hasOutOfStockProductsInCart: PropTypes.bool,\n        cartTotalSubPrice: PropTypes.number,\n        cartShippingPrice: PropTypes.number,\n        cartShippingSubPrice: PropTypes.number,\n        cartDisplaySettings: PropTypes.object.isRequired\n    };\n\n    static defaultProps = {\n        hasOutOfStockProductsInCart: false,\n        cartTotalSubPrice: null,\n        cartShippingPrice: 0,\n        cartShippingSubPrice: null\n    };\n\n    componentDidMount() {\n        const { showOverlay, device, activeOverlay } = this.props;\n\n        if (!device.isMobile && activeOverlay === OVERLAY_PLACEHOLDER) {\n            showOverlay(CART_OVERLAY);\n        }\n    }\n\n    renderPriceLine(price) {\n        const { currencyCode } = this.props;\n        return formatPrice(price, currencyCode);\n    }\n\n    renderCartItems() {\n        const { totals: { items, quote_currency_code } } = this.props;\n\n        if (!items || items.length < 1) {\n            return this.renderNoCartItems();\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"Items\" aria-label=\"List of items in cart\">\n                { items.map((item) => (\n                    <CartItem\n                      key={ item.item_id }\n                      item={ item }\n                      currency_code={ quote_currency_code }\n                      isEditing\n                    />\n                )) }\n            </div>\n        );\n    }\n\n    renderNoCartItems() {\n        return (\n            <p block=\"CartOverlay\" elem=\"Empty\">\n                { __('You have no items in your shopping cart.') }\n            </p>\n        );\n    }\n\n    renderOrderTotalExlTax() {\n        const { cartTotalSubPrice } = this.props;\n\n        if (!cartTotalSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartTotalSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderTotals() {\n        const { totals: { grand_total = 0 } } = this.props;\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Total\"\n            >\n                <dt>{ __('Order total:') }</dt>\n                <dd>\n                    { this.renderPriceLine(grand_total) }\n                    { this.renderOrderTotalExlTax() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderTax() {\n        const {\n            totals: {\n                tax_amount = 0\n            } = {},\n            cartDisplaySettings: {\n                display_zero_tax_subtotal\n            } = {}\n        } = this.props;\n\n        if (!tax_amount && !display_zero_tax_subtotal) {\n            return null;\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Tax\"\n            >\n                <dt>{ __('Tax total:') }</dt>\n                <dd>{ this.renderPriceLine(tax_amount) }</dd>\n            </dl>\n        );\n    }\n\n    renderEstimatedShippingSubPrice() {\n        const {\n            cartShippingSubPrice\n        } = this.props;\n\n        if (!cartShippingSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartShippingSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderEstimatedShipping() {\n        const {\n            cartShippingPrice\n        } = this.props;\n\n        if (!cartShippingPrice) {\n            return null;\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Shipping\"\n            >\n                <dt>\n                    { __('Estimated Shipping: ') }\n                </dt>\n                <dd>\n                    { this.renderPriceLine(cartShippingPrice) }\n                    { this.renderEstimatedShippingSubPrice() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderDiscount() {\n        const {\n            totals: {\n                applied_rule_ids,\n                discount_amount,\n                coupon_code\n            }\n        } = this.props;\n\n        if (!applied_rule_ids || !discount_amount) {\n            return null;\n        }\n\n        if (!coupon_code) {\n            return (\n                <dl\n                  block=\"CartOverlay\"\n                  elem=\"Discount\"\n                >\n                    <dt>\n                        { __('Discount: ') }\n                    </dt>\n                    <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n                </dl>\n            );\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Discount\"\n            >\n                <dt>\n                    { __('Discount/Coupon ') }\n                    <strong block=\"CartOverlay\" elem=\"DiscountCoupon\">{ coupon_code.toUpperCase() }</strong>\n                </dt>\n                <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n            </dl>\n        );\n    }\n\n    renderSecureCheckoutButton() {\n        const { handleCheckoutClick, hasOutOfStockProductsInCart } = this.props;\n\n        const options = hasOutOfStockProductsInCart\n            ? {\n                onClick: (e) => e.preventDefault(),\n                disabled: true\n            }\n            : {};\n\n        return (\n            <button\n              block=\"CartOverlay\"\n              elem=\"CheckoutButton\"\n              mix={ { block: 'Button' } }\n              onClick={ handleCheckoutClick }\n              { ...options }\n            >\n                <span />\n                { __('Secure checkout') }\n            </button>\n        );\n    }\n\n    renderActions() {\n        return (\n            <div block=\"CartOverlay\" elem=\"Actions\">\n                <Link\n                  block=\"CartOverlay\"\n                  elem=\"CartButton\"\n                  mix={ { block: 'Button', mods: { isHollow: true } } }\n                  to=\"/cart\"\n                >\n                    { __('View cart') }\n                </Link>\n                { this.renderSecureCheckoutButton() }\n            </div>\n        );\n    }\n\n    renderCartAdditional() {\n        const { totals: { items } } = this.props;\n\n        if (!items || items.length < 1) {\n            return null;\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"Additional\">\n                { this.renderEstimatedShipping() }\n                { this.renderDiscount() }\n                { this.renderTax() }\n                { this.renderTotals() }\n                { this.renderOutOfStockProductsWarning() }\n                { this.renderActions() }\n            </div>\n        );\n    }\n\n    renderPromo() {\n        const { minicart_content: { minicart_cms } = {} } = window.contentConfiguration;\n\n        if (minicart_cms) {\n            return <CmsBlock identifier={ minicart_cms } />;\n        }\n\n        return (\n            <p\n              block=\"CartOverlay\"\n              elem=\"Promo\"\n            >\n                { __('Free shipping on order 49$ and more.') }\n            </p>\n        );\n    }\n\n    renderOutOfStockProductsWarning() {\n        const { hasOutOfStockProductsInCart } = this.props;\n\n        if (!hasOutOfStockProductsInCart) {\n            return null;\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"OutOfStockProductsWarning\">\n                { __('Remove out of stock products from cart') }\n            </div>\n        );\n    }\n\n    render() {\n        const { changeHeaderState } = this.props;\n\n        return (\n            <Overlay\n              id={ CART_OVERLAY }\n              onVisible={ changeHeaderState }\n              mix={ { block: 'CartOverlay' } }\n            >\n                { this.renderPromo() }\n                { this.renderCartItems() }\n                { this.renderCartAdditional() }\n            </Overlay>\n        );\n    }\n}\n\nexport default CartOverlay;\n"]},"metadata":{},"sourceType":"module"}