{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport BrowserDatabase from \"/home/arturs/scandiweb/extension/src/util/BrowserDatabase\";\nimport { getIndexedParameteredProducts } from \"/home/arturs/scandiweb/extension/src/util/Product\";\nimport { CLEAR_WISHLIST, REMOVE_ITEM_FROM_WISHLIST, UPDATE_ALL_PRODUCTS_IN_WISHLIST, UPDATE_IS_LOADING_IN_WISHLIST, UPDATE_ITEM_OPTIONS } from \"./Wishlist.action\";\nexport const PRODUCTS_IN_WISHLIST = 'wishlist_products';\n/** #namespace Store/Wishlist/Reducer/getInitialState */\n\nexport const getInitialState = Mosaic.middleware(function () {\n  return {\n    productsInWishlist: BrowserDatabase.getItem(PRODUCTS_IN_WISHLIST) || {},\n    isLoading: true\n  };\n}, \"Store/Wishlist/Reducer/getInitialState\");\n/** #namespace Store/Wishlist/Reducer/deleteProperty */\n\nexport const deleteProperty = Mosaic.middleware(function (key, {\n  [key]: _,\n  ...newObj\n}) {\n  return newObj;\n}, \"Store/Wishlist/Reducer/deleteProperty\");\n/** #namespace Store/Wishlist/Reducer/removeItemFromWishlist */\n\nexport const removeItemFromWishlist = Mosaic.middleware(function ({\n  item_id\n}, {\n  productsInWishlist: initialProducts\n}) {\n  const productsInWishlist = deleteProperty(item_id, initialProducts) || {};\n  BrowserDatabase.setItem(productsInWishlist, PRODUCTS_IN_WISHLIST);\n  return {\n    productsInWishlist\n  };\n}, \"Store/Wishlist/Reducer/removeItemFromWishlist\");\n/** #namespace Store/Wishlist/Reducer/clearWishlist */\n\nexport const clearWishlist = Mosaic.middleware(function () {\n  const productsInWishlist = {};\n  BrowserDatabase.setItem(productsInWishlist, PRODUCTS_IN_WISHLIST);\n  return {\n    productsInWishlist\n  };\n}, \"Store/Wishlist/Reducer/clearWishlist\");\n/** #namespace Store/Wishlist/Reducer/updateAllProductsInWishlist */\n\nexport const updateAllProductsInWishlist = Mosaic.middleware(function (action) {\n  const {\n    products: initialProducts\n  } = action;\n  const products = getIndexedParameteredProducts(initialProducts);\n  BrowserDatabase.setItem(products, PRODUCTS_IN_WISHLIST);\n  return {\n    productsInWishlist: products,\n    isLoading: false\n  };\n}, \"Store/Wishlist/Reducer/updateAllProductsInWishlist\");\n/** #namespace Store/Wishlist/Reducer/updateItemOptions */\n\nexport const updateItemOptions = Mosaic.middleware(function (options, {\n  productsInWishlist\n}) {\n  const {\n    item_id\n  } = options;\n  const cleanedOptions = deleteProperty('item_id', options) || {};\n  const products = { ...productsInWishlist,\n    [item_id]: { ...productsInWishlist[item_id],\n      wishlist: { ...productsInWishlist[item_id].wishlist,\n        ...cleanedOptions\n      }\n    }\n  };\n  BrowserDatabase.setItem(products, PRODUCTS_IN_WISHLIST);\n  return {\n    productsInWishlist: products\n  };\n}, \"Store/Wishlist/Reducer/updateItemOptions\");\n/** #namespace Store/Wishlist/Reducer */\n\nexport const WishlistReducer = Mosaic.middleware(_c = function (state = getInitialState(), action) {\n  const {\n    type,\n    options\n  } = action;\n\n  switch (type) {\n    case REMOVE_ITEM_FROM_WISHLIST:\n      return { ...state,\n        isLoading: false,\n        ...removeItemFromWishlist(action, state)\n      };\n\n    case CLEAR_WISHLIST:\n      return { ...state,\n        ...clearWishlist()\n      };\n\n    case UPDATE_ALL_PRODUCTS_IN_WISHLIST:\n      return { ...state,\n        isLoading: false,\n        ...updateAllProductsInWishlist(action)\n      };\n\n    case UPDATE_ITEM_OPTIONS:\n      return { ...state,\n        ...updateItemOptions(options, state)\n      };\n\n    case UPDATE_IS_LOADING_IN_WISHLIST:\n      const {\n        isLoading\n      } = action;\n      return { ...state,\n        isLoading\n      };\n\n    default:\n      return state;\n  }\n}, \"Store/Wishlist/Reducer\");\n_c2 = WishlistReducer;\nexport default WishlistReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"WishlistReducer$\");\n$RefreshReg$(_c2, \"WishlistReducer\");","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/store/Wishlist/Wishlist.reducer.js"],"names":["BrowserDatabase","getIndexedParameteredProducts","CLEAR_WISHLIST","REMOVE_ITEM_FROM_WISHLIST","UPDATE_ALL_PRODUCTS_IN_WISHLIST","UPDATE_IS_LOADING_IN_WISHLIST","UPDATE_ITEM_OPTIONS","PRODUCTS_IN_WISHLIST","getInitialState","productsInWishlist","getItem","isLoading","deleteProperty","key","_","newObj","removeItemFromWishlist","item_id","initialProducts","setItem","clearWishlist","updateAllProductsInWishlist","action","products","updateItemOptions","options","cleanedOptions","wishlist","WishlistReducer","state","type"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { getIndexedParameteredProducts } from 'Util/Product';\n\nimport {\n    CLEAR_WISHLIST,\n    REMOVE_ITEM_FROM_WISHLIST,\n    UPDATE_ALL_PRODUCTS_IN_WISHLIST,\n    UPDATE_IS_LOADING_IN_WISHLIST,\n    UPDATE_ITEM_OPTIONS\n} from './Wishlist.action';\n\nexport const PRODUCTS_IN_WISHLIST = 'wishlist_products';\n\n/** @namespace Store/Wishlist/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    productsInWishlist: BrowserDatabase.getItem(PRODUCTS_IN_WISHLIST) || {},\n    isLoading: true\n});\n\n/** @namespace Store/Wishlist/Reducer/deleteProperty */\nexport const deleteProperty = (key, { [key]: _, ...newObj }) => newObj;\n\n/** @namespace Store/Wishlist/Reducer/removeItemFromWishlist */\nexport const removeItemFromWishlist = ({ item_id }, { productsInWishlist: initialProducts }) => {\n    const productsInWishlist = deleteProperty(item_id, initialProducts) || {};\n\n    BrowserDatabase.setItem(\n        productsInWishlist,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist };\n};\n\n/** @namespace Store/Wishlist/Reducer/clearWishlist */\nexport const clearWishlist = () => {\n    const productsInWishlist = {};\n\n    BrowserDatabase.setItem(productsInWishlist, PRODUCTS_IN_WISHLIST);\n    return { productsInWishlist };\n};\n\n/** @namespace Store/Wishlist/Reducer/updateAllProductsInWishlist */\nexport const updateAllProductsInWishlist = (action) => {\n    const { products: initialProducts } = action;\n\n    const products = getIndexedParameteredProducts(initialProducts);\n\n    BrowserDatabase.setItem(\n        products,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist: products, isLoading: false };\n};\n\n/** @namespace Store/Wishlist/Reducer/updateItemOptions */\nexport const updateItemOptions = (options, { productsInWishlist }) => {\n    const { item_id } = options;\n    const cleanedOptions = deleteProperty('item_id', options) || {};\n\n    const products = {\n        ...productsInWishlist,\n        [item_id]: {\n            ...productsInWishlist[item_id],\n            wishlist: {\n                ...productsInWishlist[item_id].wishlist,\n                ...cleanedOptions\n            }\n        }\n    };\n\n    BrowserDatabase.setItem(\n        products,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist: products };\n};\n\n/** @namespace Store/Wishlist/Reducer */\nexport const WishlistReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type, options } = action;\n\n    switch (type) {\n    case REMOVE_ITEM_FROM_WISHLIST:\n        return {\n            ...state,\n            isLoading: false,\n            ...removeItemFromWishlist(action, state)\n        };\n\n    case CLEAR_WISHLIST:\n        return {\n            ...state,\n            ...clearWishlist()\n        };\n\n    case UPDATE_ALL_PRODUCTS_IN_WISHLIST:\n        return {\n            ...state,\n            isLoading: false,\n            ...updateAllProductsInWishlist(action)\n        };\n\n    case UPDATE_ITEM_OPTIONS:\n        return {\n            ...state,\n            ...updateItemOptions(options, state)\n        };\n\n    case UPDATE_IS_LOADING_IN_WISHLIST:\n        const { isLoading } = action;\n\n        return {\n            ...state,\n            isLoading\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default WishlistReducer;\n"]},"metadata":{},"sourceType":"module"}