{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CheckoutAddressBook/CheckoutAddressBook.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport CheckoutAddressForm from \"/home/arturs/scandiweb/scandipwa/src/component/CheckoutAddressForm\";\nimport CheckoutAddressTable from \"/home/arturs/scandiweb/scandipwa/src/component/CheckoutAddressTable\";\nimport Link from \"/home/arturs/scandiweb/scandipwa/src/component/Link\";\nimport Loader from \"/home/arturs/scandiweb/scandipwa/src/component/Loader\";\nimport { BILLING_STEP, SHIPPING_STEP } from \"/home/arturs/scandiweb/scandipwa/src/route/Checkout/Checkout.config\";\nimport { MY_ACCOUNT_URL } from \"/home/arturs/scandiweb/scandipwa/src/route/MyAccount/MyAccount.config\";\nimport { ADDRESS_BOOK, customerType } from \"/home/arturs/scandiweb/scandipwa/src/type/Account\";\nimport { isSignedIn } from \"/home/arturs/scandiweb/scandipwa/src/util/Auth\";\nimport \"./CheckoutAddressBook.style\";\n/** #namespace Component/CheckoutAddressBook/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const CheckoutAddressBook = Mosaic.middleware((_temp = _class = class CheckoutAddressBook_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      isCustomAddressExpanded: false\n    };\n\n    this.expandCustomAddress = function () {\n      const {\n        onAddressSelect\n      } = _this.props;\n\n      _this.setState({\n        isCustomAddressExpanded: true\n      });\n\n      onAddressSelect({});\n    };\n\n    this.renderAddress = function (address) {\n      const {\n        onAddressSelect,\n        selectedAddressId\n      } = _this.props;\n      const {\n        id\n      } = address;\n      return /*#__PURE__*/_checkBEM(React, CheckoutAddressTable, {\n        onClick: onAddressSelect,\n        isSelected: selectedAddressId === id,\n        title: __('Address #%s', id),\n        address: address,\n        key: id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      });\n    };\n  }\n\n  static getDerivedStateFromProps(props) {\n    const {\n      selectedAddressId\n    } = props;\n\n    if (selectedAddressId === 0) {\n      return null;\n    }\n\n    return {\n      isCustomAddressExpanded: false\n    };\n  }\n\n  renderNoAddresses() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, __('You have no configured addresses.')), /*#__PURE__*/_checkBEM(React, \"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/_checkBEM(React, Link, {\n      to: `${MY_ACCOUNT_URL}/${ADDRESS_BOOK}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }, __('Go to Address Book to configure them!'))));\n  }\n\n  renderLoading() {\n    return /*#__PURE__*/_checkBEM(React, Loader, {\n      isLoading: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderAddressList() {\n    const {\n      customer: {\n        addresses\n      }\n    } = this.props;\n\n    if (!addresses) {\n      return this.renderLoading();\n    }\n\n    if (!addresses.length) {\n      return this.renderNoAddresses();\n    }\n\n    return addresses.map(this.renderAddress);\n  }\n\n  renderHeading() {\n    const {\n      isBilling\n    } = this.props;\n    const addressName = isBilling ? __('Select billing address') : __('Select shipping address');\n    return /*#__PURE__*/_checkBEM(React, \"h2\", {\n      block: \"Checkout\",\n      elem: \"Heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, addressName);\n  }\n\n  renderCustomAddress() {\n    const {\n      isBilling,\n      onShippingEstimationFieldsChange,\n      isSubmitted\n    } = this.props;\n    const formPortalId = isBilling ? BILLING_STEP : SHIPPING_STEP;\n    return /*#__PURE__*/_checkBEM(React, CheckoutAddressForm, {\n      onShippingEstimationFieldsChange: onShippingEstimationFieldsChange,\n      address: {},\n      id: formPortalId,\n      isSubmitted: isSubmitted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderOptionalCustomAddress() {\n    const {\n      isCustomAddressExpanded\n    } = this.state;\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutAddressBook\",\n      elem: \"CustomAddressWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"CheckoutAddressBook\",\n      elem: \"Button\",\n      mods: {\n        isCustomAddressExpanded\n      },\n      mix: {\n        block: 'Button',\n        mods: {\n          isHollow: true\n        }\n      },\n      type: \"button\",\n      onClick: this.expandCustomAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, __('Use custom address')), isCustomAddressExpanded && this.renderCustomAddress());\n  }\n\n  renderSignedInContent() {\n    return /*#__PURE__*/_checkBEM(React, React.Fragment, null, /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutAddressBook\",\n      elem: \"Wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, this.renderAddressList()), this.renderOptionalCustomAddress());\n  }\n\n  renderGuestContent() {\n    return this.renderCustomAddress();\n  }\n\n  renderContent() {\n    if (isSignedIn()) {\n      return this.renderSignedInContent();\n    }\n\n    return this.renderGuestContent();\n  }\n\n  render() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CheckoutAddressBook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, this.renderHeading(), this.renderContent());\n  }\n\n}, _class.propTypes = {\n  customer: customerType.isRequired,\n  onAddressSelect: PropTypes.func.isRequired,\n  onShippingEstimationFieldsChange: PropTypes.func.isRequired,\n  selectedAddressId: PropTypes.number.isRequired,\n  isBilling: PropTypes.bool.isRequired,\n  isSubmitted: PropTypes.bool\n}, _class.defaultProps = {\n  isSubmitted: false\n}, _temp), \"Component/CheckoutAddressBook/Component\");\nexport default CheckoutAddressBook;","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/CheckoutAddressBook/CheckoutAddressBook.component.js"],"names":["PropTypes","PureComponent","CheckoutAddressForm","CheckoutAddressTable","Link","Loader","BILLING_STEP","SHIPPING_STEP","MY_ACCOUNT_URL","ADDRESS_BOOK","customerType","isSignedIn","state","isCustomAddressExpanded","expandCustomAddress","onAddressSelect","props","setState","renderAddress","address","selectedAddressId","id","__","getDerivedStateFromProps","renderNoAddresses","renderLoading","renderAddressList","customer","addresses","length","map","renderHeading","isBilling","addressName","renderCustomAddress","onShippingEstimationFieldsChange","isSubmitted","formPortalId","renderOptionalCustomAddress","block","mods","isHollow","renderSignedInContent","renderGuestContent","renderContent","render","propTypes","isRequired","func","number","bool","defaultProps","CheckoutAddressBook"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CheckoutAddressForm from 'Component/CheckoutAddressForm';\nimport CheckoutAddressTable from 'Component/CheckoutAddressTable';\nimport Link from 'Component/Link';\nimport Loader from 'Component/Loader';\nimport { BILLING_STEP, SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { MY_ACCOUNT_URL } from 'Route/MyAccount/MyAccount.config';\nimport { ADDRESS_BOOK, customerType } from 'Type/Account';\nimport { isSignedIn } from 'Util/Auth';\n\nimport './CheckoutAddressBook.style';\n\n/** @namespace Component/CheckoutAddressBook/Component */\nexport class CheckoutAddressBook extends PureComponent {\n    static propTypes = {\n        customer: customerType.isRequired,\n        onAddressSelect: PropTypes.func.isRequired,\n        onShippingEstimationFieldsChange: PropTypes.func.isRequired,\n        selectedAddressId: PropTypes.number.isRequired,\n        isBilling: PropTypes.bool.isRequired,\n        isSubmitted: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isSubmitted: false\n    };\n\n    state = {\n        isCustomAddressExpanded: false\n    };\n\n    static getDerivedStateFromProps(props) {\n        const { selectedAddressId } = props;\n        if (selectedAddressId === 0) {\n            return null;\n        }\n\n        return { isCustomAddressExpanded: false };\n    }\n\n    expandCustomAddress = () => {\n        const { onAddressSelect } = this.props;\n        this.setState({ isCustomAddressExpanded: true });\n        onAddressSelect({});\n    };\n\n    renderNoAddresses() {\n        return (\n            <div>\n                <p>{ __('You have no configured addresses.') }</p>\n                <p>\n                    <Link to={ `${ MY_ACCOUNT_URL }/${ ADDRESS_BOOK }` }>\n                        { __('Go to Address Book to configure them!') }\n                    </Link>\n                </p>\n            </div>\n        );\n    }\n\n    renderLoading() {\n        return (\n            <Loader isLoading />\n        );\n    }\n\n    renderAddress = (address) => {\n        const { onAddressSelect, selectedAddressId } = this.props;\n        const { id } = address;\n\n        return (\n            <CheckoutAddressTable\n              onClick={ onAddressSelect }\n              isSelected={ selectedAddressId === id }\n              title={ __('Address #%s', id) }\n              address={ address }\n              key={ id }\n            />\n        );\n    };\n\n    renderAddressList() {\n        const { customer: { addresses } } = this.props;\n        if (!addresses) {\n            return this.renderLoading();\n        }\n        if (!addresses.length) {\n            return this.renderNoAddresses();\n        }\n\n        return addresses.map(this.renderAddress);\n    }\n\n    renderHeading() {\n        const { isBilling } = this.props;\n        const addressName = isBilling ? __('Select billing address') : __('Select shipping address');\n\n        return (\n            <h2 block=\"Checkout\" elem=\"Heading\">\n                { addressName }\n            </h2>\n        );\n    }\n\n    renderCustomAddress() {\n        const { isBilling, onShippingEstimationFieldsChange, isSubmitted } = this.props;\n        const formPortalId = isBilling ? BILLING_STEP : SHIPPING_STEP;\n\n        return (\n            <CheckoutAddressForm\n              onShippingEstimationFieldsChange={ onShippingEstimationFieldsChange }\n              address={ {} }\n              id={ formPortalId }\n              isSubmitted={ isSubmitted }\n            />\n        );\n    }\n\n    renderOptionalCustomAddress() {\n        const { isCustomAddressExpanded } = this.state;\n\n        return (\n            <div\n              block=\"CheckoutAddressBook\"\n              elem=\"CustomAddressWrapper\"\n            >\n                <button\n                  block=\"CheckoutAddressBook\"\n                  elem=\"Button\"\n                  mods={ { isCustomAddressExpanded } }\n                  mix={ { block: 'Button', mods: { isHollow: true } } }\n                  type=\"button\"\n                  onClick={ this.expandCustomAddress }\n                >\n                    { __('Use custom address') }\n                </button>\n                { isCustomAddressExpanded && this.renderCustomAddress() }\n            </div>\n        );\n    }\n\n    renderSignedInContent() {\n        return (\n            <>\n                <div block=\"CheckoutAddressBook\" elem=\"Wrapper\">\n                    { this.renderAddressList() }\n                </div>\n                { this.renderOptionalCustomAddress() }\n            </>\n        );\n    }\n\n    renderGuestContent() {\n        return this.renderCustomAddress();\n    }\n\n    renderContent() {\n        if (isSignedIn()) {\n            return this.renderSignedInContent();\n        }\n\n        return this.renderGuestContent();\n    }\n\n    render() {\n        return (\n            <div block=\"CheckoutAddressBook\">\n                { this.renderHeading() }\n                { this.renderContent() }\n            </div>\n        );\n    }\n}\n\nexport default CheckoutAddressBook;\n"]},"metadata":{},"sourceType":"module"}