{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/CookiePopup/CookiePopup.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport ContentWrapper from \"/home/arturs/scandiweb/extension/src/component/ContentWrapper\";\nimport Link from \"/home/arturs/scandiweb/extension/src/component/Link\";\nimport BrowserDatabase from \"/home/arturs/scandiweb/extension/src/util/BrowserDatabase\";\nimport { ONE_MONTH_IN_SECONDS } from \"/home/arturs/scandiweb/extension/src/util/Request/QueryDispatcher\";\nimport { COOKIE_POPUP } from \"./CookiePopup.config\";\nimport \"./CookiePopup.style\";\n/** #namespace Component/CookiePopup/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const CookiePopup = Mosaic.middleware((_temp = _class = class CookiePopup_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      isAccepted: this.getAcceptCookieValue()\n    };\n\n    this.acceptCookies = function () {\n      const {\n        code\n      } = _this.props;\n      const param = `${COOKIE_POPUP}_${code}`;\n      BrowserDatabase.setItem(true, param, ONE_MONTH_IN_SECONDS);\n\n      _this.setState({\n        isAccepted: true\n      });\n    };\n  }\n\n  getAcceptCookieValue() {\n    const {\n      code\n    } = this.props;\n    const param = `${COOKIE_POPUP}_${code}`;\n    return !!BrowserDatabase.getItem(param);\n  }\n\n  renderCookieLink() {\n    const {\n      cookieLink\n    } = this.props;\n\n    if (!cookieLink) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, Link, {\n      block: \"CookiePopup\",\n      elem: \"Link\",\n      to: cookieLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, __('Read more'));\n  }\n\n  renderCookieText() {\n    const {\n      cookieText\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"CookiePopup\",\n      elem: \"Content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, cookieText, this.renderCookieLink());\n  }\n\n  renderCTA() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CookiePopup\",\n      elem: \"CTA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"Button\",\n      onClick: this.acceptCookies,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, __('Accept')));\n  }\n\n  render() {\n    const {\n      cookieText\n    } = this.props;\n    const {\n      isAccepted\n    } = this.state;\n\n    if (!cookieText || isAccepted) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"CookiePopup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, ContentWrapper, {\n      label: \"Cookie popup\",\n      mix: {\n        block: 'CookiePopup',\n        elem: 'Wrapper'\n      },\n      wrapperMix: {\n        block: 'CookiePopup',\n        elem: 'ContentWrapper'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, this.renderCookieText(), this.renderCTA()));\n  }\n\n}, _class.propTypes = {\n  cookieText: PropTypes.string,\n  cookieLink: PropTypes.string,\n  code: PropTypes.string\n}, _class.defaultProps = {\n  cookieText: '',\n  cookieLink: '',\n  code: ''\n}, _temp), \"Component/CookiePopup/Component\");\nexport default CookiePopup;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/CookiePopup/CookiePopup.component.js"],"names":["PropTypes","PureComponent","ContentWrapper","Link","BrowserDatabase","ONE_MONTH_IN_SECONDS","COOKIE_POPUP","state","isAccepted","getAcceptCookieValue","acceptCookies","code","props","param","setItem","setState","getItem","renderCookieLink","cookieLink","__","renderCookieText","cookieText","renderCTA","render","block","elem","propTypes","string","defaultProps","CookiePopup"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ContentWrapper from 'Component/ContentWrapper';\nimport Link from 'Component/Link';\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { ONE_MONTH_IN_SECONDS } from 'Util/Request/QueryDispatcher';\n\nimport { COOKIE_POPUP } from './CookiePopup.config';\n\nimport './CookiePopup.style';\n\n/** @namespace Component/CookiePopup/Component */\nexport class CookiePopup extends PureComponent {\n    static propTypes = {\n        cookieText: PropTypes.string,\n        cookieLink: PropTypes.string,\n        code: PropTypes.string\n    };\n\n    static defaultProps = {\n        cookieText: '',\n        cookieLink: '',\n        code: ''\n    };\n\n    state = {\n        isAccepted: this.getAcceptCookieValue()\n    };\n\n    getAcceptCookieValue() {\n        const { code } = this.props;\n        const param = `${ COOKIE_POPUP }_${ code }`;\n\n        return !!BrowserDatabase.getItem(param);\n    }\n\n    acceptCookies = () => {\n        const { code } = this.props;\n        const param = `${ COOKIE_POPUP }_${ code }`;\n\n        BrowserDatabase.setItem(true, param, ONE_MONTH_IN_SECONDS);\n        this.setState({ isAccepted: true });\n    };\n\n    renderCookieLink() {\n        const { cookieLink } = this.props;\n\n        if (!cookieLink) {\n            return null;\n        }\n\n        return (\n            <Link\n              block=\"CookiePopup\"\n              elem=\"Link\"\n              to={ cookieLink }\n            >\n                { __('Read more') }\n            </Link>\n        );\n    }\n\n    renderCookieText() {\n        const { cookieText } = this.props;\n\n        return (\n            <p block=\"CookiePopup\" elem=\"Content\">\n                { cookieText }\n                { this.renderCookieLink() }\n            </p>\n        );\n    }\n\n    renderCTA() {\n        return (\n            <div block=\"CookiePopup\" elem=\"CTA\">\n                <button block=\"Button\" onClick={ this.acceptCookies }>\n                    { __('Accept') }\n                </button>\n            </div>\n        );\n    }\n\n    render() {\n        const { cookieText } = this.props;\n        const { isAccepted } = this.state;\n\n        if (!cookieText || isAccepted) {\n            return null;\n        }\n\n        return (\n            <div block=\"CookiePopup\">\n                <ContentWrapper\n                  label=\"Cookie popup\"\n                  mix={ { block: 'CookiePopup', elem: 'Wrapper' } }\n                  wrapperMix={ { block: 'CookiePopup', elem: 'ContentWrapper' } }\n                >\n                    { this.renderCookieText() }\n                    { this.renderCTA() }\n                </ContentWrapper>\n            </div>\n        );\n    }\n}\n\nexport default CookiePopup;\n"]},"metadata":{},"sourceType":"module"}