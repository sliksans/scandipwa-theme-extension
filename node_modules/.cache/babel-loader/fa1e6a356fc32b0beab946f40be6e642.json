{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { Container } from 'unstated';\nexport const sharedTransitionInitialState = {\n  sharedElementDestination: null,\n  sharedElement: null,\n  destinationPosition: {},\n  startingPosition: {}\n};\n/** #namespace Component/SharedTransition/Unstated */\n\nexport const SharedTransitionUnstated = Mosaic.middleware(class SharedTransitionUnstated_ extends Mosaic.Extensible(Container) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = sharedTransitionInitialState;\n\n    this._parseRectangle = function (val) {\n      return JSON.parse(JSON.stringify(val));\n    };\n\n    this.cleanUpTransition = function () {\n      _this.setState(sharedTransitionInitialState);\n    };\n\n    this.registerSharedElementDestination = function ({\n      current\n    }) {\n      if (current) {\n        _this.setState(function ({\n          sharedElementDestination\n        }) {\n          if (sharedElementDestination) {\n            return {};\n          }\n\n          return {\n            sharedElementDestination: current,\n            destinationPosition: _this._parseRectangle(current.getBoundingClientRect())\n          };\n        });\n      }\n    };\n\n    this.registerSharedElement = function ({\n      current\n    }) {\n      if (current) {\n        const clone = current.cloneNode(true);\n\n        _this.setState({\n          sharedElement: clone,\n          sharedElementDestination: null,\n          destinationPosition: {},\n          startingPosition: _this._parseRectangle(current.getBoundingClientRect())\n        });\n      }\n    };\n  }\n\n}, \"Component/SharedTransition/Unstated\");\nexport default new SharedTransitionUnstated();","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/SharedTransition/SharedTransition.unstated.js"],"names":["Container","sharedTransitionInitialState","sharedElementDestination","sharedElement","destinationPosition","startingPosition","state","_parseRectangle","val","JSON","parse","stringify","cleanUpTransition","setState","registerSharedElementDestination","current","getBoundingClientRect","registerSharedElement","clone","cloneNode","SharedTransitionUnstated"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,QAA0B,UAA1B;AAEA,OAAO,MAAMC,4BAA4B,GAAG;AACxCC,EAAAA,wBAAwB,EAAE,IADc;AAExCC,EAAAA,aAAa,EAAE,IAFyB;AAGxCC,EAAAA,mBAAmB,EAAE,EAHmB;AAIxCC,EAAAA,gBAAgB,EAAE;AAJsB,CAArC;AAOP;;AACA,oHAA8CL,SAA9C,EAAwD;AAAA;AAAA;;AAAA;AAAA;AAAA,SACpDM,KADoD,GAC5CL,4BAD4C;;AAAA,SAGpDM,eAHoD,GAGlC,UAACC,GAAD;AAAA,aAASC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,GAAf,CAAX,CAAT;AAAA,KAHkC;;AAAA,SAKpDI,iBALoD,GAKhC,YAAM;AACtB,MAAA,KAAI,CAACC,QAAL,CAAcZ,4BAAd;AACH,KAPmD;;AAAA,SASpDa,gCAToD,GASjB,UAAC;AAAEC,MAAAA;AAAF,KAAD,EAAiB;AAChD,UAAIA,OAAJ,EAAa;AACT,QAAA,KAAI,CAACF,QAAL,CAAc,UAAC;AAAEX,UAAAA;AAAF,SAAD,EAAkC;AAC5C,cAAIA,wBAAJ,EAA8B;AAC1B,mBAAO,EAAP;AACH;;AAED,iBAAO;AACHA,YAAAA,wBAAwB,EAAEa,OADvB;AAEHX,YAAAA,mBAAmB,EAAE,KAAI,CAACG,eAAL,CAAqBQ,OAAO,CAACC,qBAAR,EAArB;AAFlB,WAAP;AAIH,SATD;AAUH;AACJ,KAtBmD;;AAAA,SAwBpDC,qBAxBoD,GAwB5B,UAAC;AAAEF,MAAAA;AAAF,KAAD,EAAiB;AACrC,UAAIA,OAAJ,EAAa;AACT,cAAMG,KAAK,GAAGH,OAAO,CAACI,SAAR,CAAkB,IAAlB,CAAd;;AAEA,QAAA,KAAI,CAACN,QAAL,CAAc;AACVV,UAAAA,aAAa,EAAEe,KADL;AAEVhB,UAAAA,wBAAwB,EAAE,IAFhB;AAGVE,UAAAA,mBAAmB,EAAE,EAHX;AAIVC,UAAAA,gBAAgB,EAAE,KAAI,CAACE,eAAL,CAAqBQ,OAAO,CAACC,qBAAR,EAArB;AAJR,SAAd;AAMH;AACJ,KAnCmD;AAAA;;AAAA,CAAxD;AAsCA,eAAe,IAAII,wBAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { Container } from 'unstated';\n\nexport const sharedTransitionInitialState = {\n    sharedElementDestination: null,\n    sharedElement: null,\n    destinationPosition: {},\n    startingPosition: {}\n};\n\n/** @namespace Component/SharedTransition/Unstated */\nexport class SharedTransitionUnstated extends Container {\n    state = sharedTransitionInitialState;\n\n    _parseRectangle = (val) => JSON.parse(JSON.stringify(val));\n\n    cleanUpTransition = () => {\n        this.setState(sharedTransitionInitialState);\n    };\n\n    registerSharedElementDestination = ({ current }) => {\n        if (current) {\n            this.setState(({ sharedElementDestination }) => {\n                if (sharedElementDestination) {\n                    return {};\n                }\n\n                return {\n                    sharedElementDestination: current,\n                    destinationPosition: this._parseRectangle(current.getBoundingClientRect())\n                };\n            });\n        }\n    };\n\n    registerSharedElement = ({ current }) => {\n        if (current) {\n            const clone = current.cloneNode(true);\n\n            this.setState({\n                sharedElement: clone,\n                sharedElementDestination: null,\n                destinationPosition: {},\n                startingPosition: this._parseRectangle(current.getBoundingClientRect())\n            });\n        }\n    };\n}\n\nexport default new SharedTransitionUnstated();\n"]},"metadata":{},"sourceType":"module"}