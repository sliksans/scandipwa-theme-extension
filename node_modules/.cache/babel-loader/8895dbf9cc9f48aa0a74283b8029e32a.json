{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport ContactFormQuery from \"/home/arturs/scandiweb/extension/src/query/ContactForm.query\";\nimport { showNotification } from \"/home/arturs/scandiweb/extension/src/store/Notification/Notification.action\";\nimport { fetchMutation, getErrorMessage } from \"/home/arturs/scandiweb/extension/src/util/Request\";\nimport { updateContactForm } from \"./ContactForm.action\";\n/**\n * ContactForm Dispatcher\n * @class ContactFormDispatcher\n * @extends QueryDispatcher\n * #namespace Store/ContactForm/Dispatcher\n */\n\nexport const ContactFormDispatcher = Mosaic.middleware(class ContactFormDispatcher_ extends Mosaic.Extensible() {\n  prepareRequest(options, dispatch) {\n    const mutation = ContactFormQuery.getSendContactFormMutation(options);\n    dispatch(updateContactForm({\n      isLoading: true\n    }));\n    return fetchMutation(mutation).then(\n    /** #namespace Store/ContactForm/Dispatcher/fetchMutationThen */\n    Mosaic.middleware(function (data) {\n      dispatch(showNotification('success', data.contactForm.message));\n      dispatch(updateContactForm({\n        isLoading: false\n      }));\n    }, \"Store/ContactForm/Dispatcher/fetchMutationThen\"),\n    /** #namespace Store/ContactForm/Dispatcher/fetchMutationError */\n    Mosaic.middleware(function (error) {\n      dispatch(showNotification('error', getErrorMessage(error)));\n      dispatch(updateContactForm({\n        isLoading: false\n      }));\n    }, \"Store/ContactForm/Dispatcher/fetchMutationError\"));\n  }\n\n}, \"Store/ContactForm/Dispatcher\");\nexport default new ContactFormDispatcher();","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/store/ContactForm/ContactForm.dispatcher.js"],"names":["ContactFormQuery","showNotification","fetchMutation","getErrorMessage","updateContactForm","prepareRequest","options","dispatch","mutation","getSendContactFormMutation","isLoading","then","data","contactForm","message","error","ContactFormDispatcher"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,gBAAP;AACA,SAASC,gBAAT;AACA,SAASC,aAAT,EAAwBC,eAAxB;AAEA,SAASC,iBAAT;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,gHAAmC;AAC/BC,EAAAA,cAAc,CAACC,OAAD,EAAUC,QAAV,EAAoB;AAC9B,UAAMC,QAAQ,GAAGR,gBAAgB,CAACS,0BAAjB,CAA4CH,OAA5C,CAAjB;AAEAC,IAAAA,QAAQ,CAACH,iBAAiB,CAAC;AACvBM,MAAAA,SAAS,EAAE;AADY,KAAD,CAAlB,CAAR;AAIA,WAAOR,aAAa,CAACM,QAAD,CAAb,CACFG,IADE;AAEC;AAFD,sBAGC,UAACC,IAAD,EAAU;AACNL,MAAAA,QAAQ,CAACN,gBAAgB,CAAC,SAAD,EAAYW,IAAI,CAACC,WAAL,CAAiBC,OAA7B,CAAjB,CAAR;AACAP,MAAAA,QAAQ,CAACH,iBAAiB,CAAC;AACvBM,QAAAA,SAAS,EAAE;AADY,OAAD,CAAlB,CAAR;AAGH,KARF;AASC;AATD,sBAUC,UAACK,KAAD,EAAW;AACPR,MAAAA,QAAQ,CAACN,gBAAgB,CAAC,OAAD,EAAUE,eAAe,CAACY,KAAD,CAAzB,CAAjB,CAAR;AACAR,MAAAA,QAAQ,CAACH,iBAAiB,CAAC;AACvBM,QAAAA,SAAS,EAAE;AADY,OAAD,CAAlB,CAAR;AAGH,KAfF,qDAAP;AAiBH;;AAzB8B,CAAnC;AA4BA,eAAe,IAAIM,qBAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport ContactFormQuery from 'Query/ContactForm.query';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { fetchMutation, getErrorMessage } from 'Util/Request';\n\nimport { updateContactForm } from './ContactForm.action';\n\n/**\n * ContactForm Dispatcher\n * @class ContactFormDispatcher\n * @extends QueryDispatcher\n * @namespace Store/ContactForm/Dispatcher\n */\nexport class ContactFormDispatcher {\n    prepareRequest(options, dispatch) {\n        const mutation = ContactFormQuery.getSendContactFormMutation(options);\n\n        dispatch(updateContactForm({\n            isLoading: true\n        }));\n\n        return fetchMutation(mutation)\n            .then(\n                /** @namespace Store/ContactForm/Dispatcher/fetchMutationThen */\n                (data) => {\n                    dispatch(showNotification('success', data.contactForm.message));\n                    dispatch(updateContactForm({\n                        isLoading: false\n                    }));\n                },\n                /** @namespace Store/ContactForm/Dispatcher/fetchMutationError */\n                (error) => {\n                    dispatch(showNotification('error', getErrorMessage(error)));\n                    dispatch(updateContactForm({\n                        isLoading: false\n                    }));\n                }\n            );\n    }\n}\n\nexport default new ContactFormDispatcher();\n"]},"metadata":{},"sourceType":"module"}