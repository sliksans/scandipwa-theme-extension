{"ast":null,"code":"var _jsxFileName = \"/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/App/App.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { PureComponent } from 'react';\nimport { Provider } from 'react-redux';\nimport { Provider as UnstatedProvider } from 'unstated';\nimport Router from \"/home/arturs/scandiweb/extension/src/component/Router\";\nimport SharedTransition from \"/home/arturs/scandiweb/extension/src/component/SharedTransition\";\nimport SomethingWentWrong from \"/home/arturs/scandiweb/extension/src/route/SomethingWentWrong\";\nimport injectStaticReducers from \"/home/arturs/scandiweb/extension/src/store\";\nimport getStore from \"/home/arturs/scandiweb/extension/src/util/Store\";\n/** #namespace Component/App/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const App = Mosaic.middleware(class App_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.productionFunctions = [this.disableReactDevTools.bind(this), this.injectComment.bind(this)];\n    this.developmentFunctions = [this.enableHotReload.bind(this)];\n    this.commonFunctions = [this.configureStore.bind(this)];\n    this.rootComponents = [this.renderRouter.bind(this), this.renderSharedTransition.bind(this)];\n    this.contextProviders = [this.renderRedux.bind(this), this.renderUnStated.bind(this)];\n    this.state = {\n      isSomethingWentWrong: false,\n      errorDetails: {}\n    };\n\n    this.handleErrorReset = function () {\n      _this.setState({\n        isSomethingWentWrong: false\n      });\n    };\n\n    this.renderRootComponents = function () {\n      return _this.rootComponents.map(function (render) {\n        return render();\n      });\n    };\n\n    this.renderSomethingWentWrong = function () {\n      const {\n        errorDetails\n      } = _this.state;\n      return /*#__PURE__*/_checkBEM(React, SomethingWentWrong, {\n        onClick: _this.handleErrorReset,\n        errorDetails: errorDetails,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      });\n    };\n  }\n\n  __construct(props) {\n    super.__construct(props);\n\n    this.configureAppBasedOnEnvironment();\n    this.configureApp();\n  }\n\n  componentDidCatch(err, info) {\n    this.setState({\n      isSomethingWentWrong: true,\n      errorDetails: {\n        err,\n        info\n      }\n    });\n  }\n\n  configureStore() {\n    const store = getStore();\n    injectStaticReducers(store);\n    this.reduxStore = store;\n  }\n\n  renderRedux(children) {\n    return /*#__PURE__*/_checkBEM(React, Provider, {\n      store: this.reduxStore,\n      key: \"redux\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, children);\n  }\n\n  renderUnStated(children) {\n    return /*#__PURE__*/_checkBEM(React, UnstatedProvider, {\n      key: \"unstated\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, children);\n  }\n\n  enableHotReload() {\n    if (module.hot) {\n      module.hot.accept();\n    }\n  }\n\n  injectComment() {\n    const comment = document.createComment('Powered by ScandiPWA (scandipwa.com)');\n    document.querySelector('html').appendChild(comment);\n  }\n  /**\n   * Disable react-dev-tools\n   * @link https://github.com/facebook/react-devtools/issues/191#issuecomment-367905536\n   */\n\n\n  disableReactDevTools() {\n    if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ === 'object') {\n      // eslint-disable-next-line no-restricted-syntax, fp/no-loops, no-unused-vars\n      for (const [key, value] of Object.entries(window.__REACT_DEVTOOLS_GLOBAL_HOOK__)) {\n        window.__REACT_DEVTOOLS_GLOBAL_HOOK__[key] = typeof value === 'function' ? function () {} : null;\n      }\n    }\n  }\n\n  configureAppBasedOnEnvironment() {\n    const functionsToRun = process.env.NODE_ENV === 'production' ? this.productionFunctions : this.developmentFunctions;\n    functionsToRun.forEach(function (func) {\n      return func();\n    });\n  }\n\n  configureApp() {\n    this.commonFunctions.forEach(function (func) {\n      return func();\n    });\n  }\n\n  renderSharedTransition() {\n    return /*#__PURE__*/_checkBEM(React, SharedTransition, {\n      key: \"transition\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderRouter() {\n    return /*#__PURE__*/_checkBEM(React, Router, {\n      key: \"router\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderContextProviders() {\n    const {\n      isSomethingWentWrong\n    } = this.state;\n    const child = isSomethingWentWrong ? this.renderSomethingWentWrong : this.renderRootComponents;\n    return this.contextProviders.reduce(function (acc, render) {\n      return render(acc);\n    }, [child()]);\n  }\n\n  render() {\n    return this.renderContextProviders();\n  }\n\n}, \"Component/App/Component\");\nexport default App;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/App/App.component.js"],"names":["PureComponent","Provider","UnstatedProvider","Router","SharedTransition","SomethingWentWrong","injectStaticReducers","getStore","productionFunctions","disableReactDevTools","bind","injectComment","developmentFunctions","enableHotReload","commonFunctions","configureStore","rootComponents","renderRouter","renderSharedTransition","contextProviders","renderRedux","renderUnStated","state","isSomethingWentWrong","errorDetails","handleErrorReset","setState","renderRootComponents","map","render","renderSomethingWentWrong","__construct","props","configureAppBasedOnEnvironment","configureApp","componentDidCatch","err","info","store","reduxStore","children","module","hot","accept","comment","document","createComment","querySelector","appendChild","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","key","value","Object","entries","functionsToRun","process","env","NODE_ENV","forEach","func","renderContextProviders","child","reduce","acc","App"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { PureComponent } from 'react';\nimport { Provider } from 'react-redux';\nimport { Provider as UnstatedProvider } from 'unstated';\n\nimport Router from 'Component/Router';\nimport SharedTransition from 'Component/SharedTransition';\nimport SomethingWentWrong from 'Route/SomethingWentWrong';\nimport injectStaticReducers from 'Store';\nimport getStore from 'Util/Store';\n\n/** @namespace Component/App/Component */\nexport class App extends PureComponent {\n    productionFunctions = [\n        this.disableReactDevTools.bind(this),\n        this.injectComment.bind(this)\n    ];\n\n    developmentFunctions = [\n        this.enableHotReload.bind(this)\n    ];\n\n    commonFunctions = [\n        this.configureStore.bind(this)\n    ];\n\n    rootComponents = [\n        this.renderRouter.bind(this),\n        this.renderSharedTransition.bind(this)\n    ];\n\n    contextProviders = [\n        this.renderRedux.bind(this),\n        this.renderUnStated.bind(this)\n    ];\n\n    state = {\n        isSomethingWentWrong: false,\n        errorDetails: {}\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        this.configureAppBasedOnEnvironment();\n        this.configureApp();\n    }\n\n    componentDidCatch(err, info) {\n        this.setState({\n            isSomethingWentWrong: true,\n            errorDetails: { err, info }\n        });\n    }\n\n    configureStore() {\n        const store = getStore();\n        injectStaticReducers(store);\n\n        this.reduxStore = store;\n    }\n\n    renderRedux(children) {\n        return (\n            <Provider store={ this.reduxStore } key=\"redux\">\n                { children }\n            </Provider>\n        );\n    }\n\n    renderUnStated(children) {\n        return (\n            <UnstatedProvider key=\"unstated\">\n                { children }\n            </UnstatedProvider>\n        );\n    }\n\n    enableHotReload() {\n        if (module.hot) {\n            module.hot.accept();\n        }\n    }\n\n    injectComment() {\n        const comment = document.createComment('Powered by ScandiPWA (scandipwa.com)');\n        document.querySelector('html').appendChild(comment);\n    }\n\n    /**\n     * Disable react-dev-tools\n     * @link https://github.com/facebook/react-devtools/issues/191#issuecomment-367905536\n     */\n    disableReactDevTools() {\n        if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ === 'object') {\n            // eslint-disable-next-line no-restricted-syntax, fp/no-loops, no-unused-vars\n            for (const [key, value] of Object.entries(window.__REACT_DEVTOOLS_GLOBAL_HOOK__)) {\n                window.__REACT_DEVTOOLS_GLOBAL_HOOK__[key] = typeof value === 'function' ? () => {} : null;\n            }\n        }\n    }\n\n    configureAppBasedOnEnvironment() {\n        const functionsToRun = process.env.NODE_ENV === 'production'\n            ? this.productionFunctions\n            : this.developmentFunctions;\n\n        functionsToRun.forEach((func) => func());\n    }\n\n    configureApp() {\n        this.commonFunctions.forEach((func) => func());\n    }\n\n    handleErrorReset = () => {\n        this.setState({ isSomethingWentWrong: false });\n    };\n\n    renderSharedTransition() {\n        return (\n            <SharedTransition key=\"transition\" />\n        );\n    }\n\n    renderRouter() {\n        return (\n            <Router key=\"router\" />\n        );\n    }\n\n    renderRootComponents = () => this.rootComponents.map((render) => render());\n\n    renderContextProviders() {\n        const { isSomethingWentWrong } = this.state;\n\n        const child = isSomethingWentWrong\n            ? this.renderSomethingWentWrong\n            : this.renderRootComponents;\n\n        return this.contextProviders.reduce(\n            (acc, render) => render(acc),\n            [child()]\n        );\n    }\n\n    renderSomethingWentWrong = () => {\n        const { errorDetails } = this.state;\n\n        return (\n            <SomethingWentWrong\n              onClick={ this.handleErrorReset }\n              errorDetails={ errorDetails }\n            />\n        );\n    };\n\n    render() {\n        return this.renderContextProviders();\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}