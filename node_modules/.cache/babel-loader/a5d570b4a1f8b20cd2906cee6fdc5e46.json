{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/SearchOverlay/SearchOverlay.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport Overlay from \"/home/arturs/scandiweb/extension/src/component/Overlay\";\nimport SearchItem from \"/home/arturs/scandiweb/extension/src/component/SearchItem\";\nimport { ItemsType } from \"/home/arturs/scandiweb/extension/src/type/ProductList\";\nimport { AMOUNT_OF_PLACEHOLDERS, SEARCH_TIMEOUT } from \"./SearchOverlay.config\";\nimport \"./SearchOverlay.style\";\n/** #namespace Component/SearchOverlay/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const SearchOverlay = Mosaic.middleware((_temp = _class = class SearchOverlay_ extends Mosaic.Extensible(PureComponent) {\n  componentDidUpdate(prevProps) {\n    var _this = this;\n\n    const {\n      searchCriteria: prevSearchCriteria\n    } = prevProps;\n    const {\n      searchCriteria,\n      clearSearchResults,\n      makeSearchRequest\n    } = this.props;\n\n    if (searchCriteria !== prevSearchCriteria) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      clearSearchResults();\n      this.timeout = setTimeout(function () {\n        _this.timeout = null;\n        makeSearchRequest();\n      }, SEARCH_TIMEOUT);\n    }\n  }\n\n  renderSearchItem(product, i) {\n    return /*#__PURE__*/_checkBEM(React, SearchItem, {\n      product: product,\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderSearchCriteria() {\n    const {\n      searchCriteria\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"SearchOverlay\",\n      elem: \"Criteria\",\n      mods: {\n        isVisible: !!searchCriteria.trim()\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, __('Results for:'), /*#__PURE__*/_checkBEM(React, \"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, searchCriteria));\n  }\n\n  renderNoSearchCriteria() {\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 16\n      }\n    }, __('Start typing to see search results!'));\n  }\n\n  renderNoResults() {\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 16\n      }\n    }, __('No results found!'));\n  }\n\n  renderSearchResults() {\n    var _this2 = this;\n\n    const {\n      searchCriteria,\n      searchResults,\n      isLoading\n    } = this.props;\n\n    if (!searchCriteria.trim()) {\n      return this.renderNoSearchCriteria();\n    }\n\n    if (!searchResults.length && !isLoading && !this.timeout) {\n      return this.renderNoResults();\n    }\n\n    const resultsToRender = isLoading || this.timeout ? Array(AMOUNT_OF_PLACEHOLDERS).fill({}) : searchResults;\n    return /*#__PURE__*/_checkBEM(React, \"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, resultsToRender.map(function (item, i) {\n      return _this2.renderSearchItem(item, i);\n    }));\n  }\n\n  render() {\n    const {\n      isHideOverlay\n    } = this.props;\n\n    if (isHideOverlay) {\n      return /*#__PURE__*/_checkBEM(React, \"article\", {\n        block: \"SearchOverlay\",\n        elem: \"Results\",\n        \"aria-label\": \"Search results\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, this.renderSearchResults());\n    }\n\n    return /*#__PURE__*/_checkBEM(React, Overlay, {\n      id: \"search\",\n      mix: {\n        block: 'SearchOverlay'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, this.renderSearchCriteria(), /*#__PURE__*/_checkBEM(React, \"article\", {\n      block: \"SearchOverlay\",\n      elem: \"Results\",\n      \"aria-label\": \"Search results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, this.renderSearchResults()));\n  }\n\n}, _class.propTypes = {\n  searchCriteria: PropTypes.string,\n  searchResults: ItemsType.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  makeSearchRequest: PropTypes.func.isRequired,\n  clearSearchResults: PropTypes.func.isRequired,\n  isHideOverlay: PropTypes.bool\n}, _class.defaultProps = {\n  searchCriteria: '',\n  isHideOverlay: false\n}, _temp), \"Component/SearchOverlay/Component\");\nexport default SearchOverlay;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/SearchOverlay/SearchOverlay.component.js"],"names":["PropTypes","PureComponent","Overlay","SearchItem","ItemsType","AMOUNT_OF_PLACEHOLDERS","SEARCH_TIMEOUT","componentDidUpdate","prevProps","searchCriteria","prevSearchCriteria","clearSearchResults","makeSearchRequest","props","timeout","clearTimeout","setTimeout","renderSearchItem","product","i","renderSearchCriteria","isVisible","trim","__","renderNoSearchCriteria","renderNoResults","renderSearchResults","searchResults","isLoading","length","resultsToRender","Array","fill","map","item","render","isHideOverlay","block","propTypes","string","isRequired","bool","func","defaultProps","SearchOverlay"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Overlay from 'Component/Overlay';\nimport SearchItem from 'Component/SearchItem';\nimport { ItemsType } from 'Type/ProductList';\n\nimport {\n    AMOUNT_OF_PLACEHOLDERS,\n    SEARCH_TIMEOUT\n} from './SearchOverlay.config';\n\nimport './SearchOverlay.style';\n\n/** @namespace Component/SearchOverlay/Component */\nexport class SearchOverlay extends PureComponent {\n    static propTypes = {\n        searchCriteria: PropTypes.string,\n        searchResults: ItemsType.isRequired,\n        isLoading: PropTypes.bool.isRequired,\n        makeSearchRequest: PropTypes.func.isRequired,\n        clearSearchResults: PropTypes.func.isRequired,\n        isHideOverlay: PropTypes.bool\n    };\n\n    static defaultProps = {\n        searchCriteria: '',\n        isHideOverlay: false\n    };\n\n    componentDidUpdate(prevProps) {\n        const { searchCriteria: prevSearchCriteria } = prevProps;\n        const { searchCriteria, clearSearchResults, makeSearchRequest } = this.props;\n\n        if (searchCriteria !== prevSearchCriteria) {\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            }\n            clearSearchResults();\n            this.timeout = setTimeout(() => {\n                this.timeout = null;\n                makeSearchRequest();\n            }, SEARCH_TIMEOUT);\n        }\n    }\n\n    renderSearchItem(product, i) {\n        return (\n            <SearchItem\n              product={ product }\n              key={ i }\n            />\n        );\n    }\n\n    renderSearchCriteria() {\n        const { searchCriteria } = this.props;\n\n        return (\n            <p\n              block=\"SearchOverlay\"\n              elem=\"Criteria\"\n              mods={ { isVisible: !!searchCriteria.trim() } }\n            >\n                { __('Results for:') }\n                <strong>{ searchCriteria }</strong>\n            </p>\n        );\n    }\n\n    renderNoSearchCriteria() {\n        return <p>{ __('Start typing to see search results!') }</p>;\n    }\n\n    renderNoResults() {\n        return <p>{ __('No results found!') }</p>;\n    }\n\n    renderSearchResults() {\n        const { searchCriteria, searchResults, isLoading } = this.props;\n\n        if (!searchCriteria.trim()) {\n            return this.renderNoSearchCriteria();\n        }\n\n        if (!searchResults.length && !isLoading && !this.timeout) {\n            return this.renderNoResults();\n        }\n\n        const resultsToRender = (isLoading || this.timeout) ? Array(AMOUNT_OF_PLACEHOLDERS).fill({}) : searchResults;\n\n        return (\n            <ul>\n                { resultsToRender.map((item, i) => this.renderSearchItem(item, i)) }\n            </ul>\n        );\n    }\n\n    render() {\n        const { isHideOverlay } = this.props;\n\n        if (isHideOverlay) {\n            return (\n                <article\n                  block=\"SearchOverlay\"\n                  elem=\"Results\"\n                  aria-label=\"Search results\"\n                >\n                    { this.renderSearchResults() }\n                </article>\n            );\n        }\n\n        return (\n            <Overlay\n              id=\"search\"\n              mix={ { block: 'SearchOverlay' } }\n            >\n                { this.renderSearchCriteria() }\n                <article\n                  block=\"SearchOverlay\"\n                  elem=\"Results\"\n                  aria-label=\"Search results\"\n                >\n                    { this.renderSearchResults() }\n                </article>\n            </Overlay>\n        );\n    }\n}\n\nexport default SearchOverlay;\n"]},"metadata":{},"sourceType":"module"}