{"ast":null,"code":"const e = Symbol(\"Extensible\"),\n      t = Symbol(\"CacheIdentityKey\");\n\nfunction n(e, t) {\n  const {\n    implementation: n\n  } = e;\n  if (\"function\" == typeof e) return e;\n  if (\"function\" == typeof n) return n;\n  throw new Error(`No implementation found in plugin definition for member ${t}.`);\n}\n\nfunction r(e = function () {}, t, r) {\n  return function (...o) {\n    return t.reduce(function (t, c) {\n      return function () {\n        const s = n(c, e.name);\n        return \"object\" == typeof e ? s(\"function\" == typeof t ? t() : t, r) : s(o, t.bind(r), r);\n      };\n    }, e)();\n  };\n}\n\nconst o = [\"member-function\", \"member-property\", \"static-member\", \"function\", \"class\"],\n      c = [\"function\", \"class\"];\n\nconst s = function (e) {\n  return Array.isArray(e) ? e : [e];\n},\n      i = function (e) {\n  return e.sort(function ({\n    position: e = 100\n  }, {\n    position: t = 100\n  }) {\n    return e - t;\n  });\n},\n      u = function (e) {\n  const t = e.reduce(function (e, t) {\n    return Object.entries(t).forEach(function ([t, n]) {\n      e[t] || (e[t] = {}), Object.entries(n).forEach(function ([n, r]) {\n        !function (e, t) {\n          if (!o.includes(e)) throw Error(`Unexpected handler type '${e}' for namespace '${t}', expected one of [${o.join(\", \")}]`);\n        }(n, t), c.includes(n) ? function (e, t, n, r) {\n          e[t][n] || (e[t][n] = []), s(r).forEach(function (r) {\n            e[t][n].push(r);\n          });\n        }(e, t, n, r) : function (e, t, n, r) {\n          e[t][n] || (e[t][n] = {}), Object.entries(r).forEach(function ([r, o]) {\n            e[t][n][r] || (e[t][n][r] = []), s(o).forEach(function (o) {\n              e[t][n][r].push(o);\n            });\n          });\n        }(e, t, n, r);\n      });\n    }), e;\n  }, {});\n  return function (e) {\n    for (const t in e) for (const n in e[t]) if (c.includes(n)) e[t][n] = i(e[t][n]);else for (const r in e[t][n]) e[t][n][r] = i(e[t][n][r]);\n  }(t), t;\n};\n\nvar l = new class {\n  constructor() {\n    this.plugins = [];\n  }\n\n  setPlugins(e) {\n    this.plugins = u(e), function () {\n      try {\n        if (\"undefined\" != typeof globalThis) return globalThis;\n        if (\"undefined\" != typeof window) return window;\n        if (\"undefined\" != typeof global) return global;\n        if (\"undefined\" != typeof ServiceWorkerGlobalScope) return ServiceWorkerGlobalScope;\n      } catch {}\n\n      return {};\n    }().plugins = this.plugins;\n  }\n\n}(),\n    a = function (e, t, n) {\n  return e.reduce(function (e, r) {\n    const o = l.plugins && l.plugins[r] && l.plugins[r][t];\n\n    if (n) {\n      const {\n        value: t\n      } = Object.getOwnPropertyDescriptor(o || {}, n) || {};\n      if (t) return e.concat(t);\n    } else if (o) return e.concat(o);\n\n    return e;\n  }, []);\n};\n\nfunction f(e) {\n  return function (t, n, o) {\n    const c = a(e, \"function\");\n    return c.length ? r(t, c, n)(...o) : t.apply(n, o);\n  };\n}\n\nfunction p(e, t) {\n  return function (e) {\n    const t = e[e.length - 1];\n    return l.plugins[t] && l.plugins[t].class || [];\n  }(t).reduce(function (t, r) {\n    const o = n(r, e.name)(t);\n    if (Object.prototype.isPrototypeOf.call(t, o)) throw new Error(\"Subclassing via `class` API is not allowed.\\nConsider using other approach for this, e.g. plugins for members.\");\n    return o;\n  }, e);\n}\n\nfunction d(e) {\n  return e.prototype.__namespaces__;\n}\n\nfunction g(e) {\n  return function (t, r, o) {\n    const c = p(class extends t {\n      constructor(...e) {\n        return function (e, t) {\n          const r = d(Object.getPrototypeOf(e).constructor);\n          return a(r, \"member-property\").forEach(function (t) {\n            return Object.entries(t).forEach(function ([t, r]) {\n              const o = e[t] || function () {},\n                    c = r.reduce(function (t, r) {\n                return n(r, o.name)(t, e);\n              }, o);\n\n              e[t] = c;\n            });\n          }), e.__construct && e.__construct(...t), e;\n        }(Reflect.construct(t, r, o), e);\n      }\n\n    }, e);\n    return Reflect.construct(c, r);\n  };\n}\n\nfunction y(e, t) {\n  return function (n, o, c) {\n    const s = Reflect.get(n, o, c),\n          i = a(t, \"class\" === e ? \"static-member\" : \"member-function\", o);\n    if (!i.length) return s;\n    const u = r(s, i, c);\n    return \"object\" == typeof s ? u() : u;\n  };\n}\n\nvar b = new class {\n  constructor() {\n    this.generated = [];\n  }\n\n  setPlugins(e) {\n    l.setPlugins(e.map(function (e) {\n      return e.default || e;\n    }));\n  }\n\n  Extensible(n = class {}) {\n    if (n[e]) return n;\n    const {\n      name: r\n    } = n,\n          {\n      value: o = Symbol(`Cache Identity ${r}`)\n    } = Object.getOwnPropertyDescriptor(n, t) || {};\n\n    if (!this.generated[o]) {\n      const r = class extends n {\n        constructor(...e) {\n          super(...e);\n\n          const {\n            __namespaces__: t\n          } = Object.getPrototypeOf(this),\n                n = function (e) {\n            return y(\"instance\", e);\n          }(t);\n\n          return new Proxy(this, {\n            get: n\n          });\n        }\n\n        __construct() {}\n\n      };\n      r[e] = !0, this.generated[o] = r, Object.defineProperty(n, t, {\n        value: o,\n        writable: !1\n      });\n    }\n\n    return this.generated[o];\n  }\n\n  middleware(e, t) {\n    try {\n      !function (e, t) {\n        const n = Object.assign([], Reflect.get(e.prototype, \"__namespaces__\"));\n        n.includes(t) || n.push(t), e.prototype.__namespaces__ = n;\n      }(e, t);\n      const n = d(e),\n            r = {\n        get: y(\"class\", n),\n        apply: f(n),\n        construct: g(n)\n      };\n      return new Proxy(e, r);\n    } catch (n) {\n      return console.log(`Failed to apply middleware to: ${e} (${t}).`), console.log(n), e;\n    }\n  }\n\n}();\nexport default b;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@tilework/mosaic/dist/mosaic.js"],"names":["e","Symbol","t","n","implementation","Error","r","o","reduce","c","s","name","bind","Array","isArray","i","sort","position","u","Object","entries","forEach","includes","join","push","l","constructor","plugins","setPlugins","globalThis","window","global","ServiceWorkerGlobalScope","a","value","getOwnPropertyDescriptor","concat","f","length","apply","p","class","prototype","isPrototypeOf","call","d","__namespaces__","g","getPrototypeOf","__construct","Reflect","construct","y","get","b","generated","map","default","Extensible","Proxy","defineProperty","writable","middleware","assign","console","log"],"mappings":"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","sourcesContent":["const e=Symbol(\"Extensible\"),t=Symbol(\"CacheIdentityKey\");function n(e,t){const{implementation:n}=e;if(\"function\"==typeof e)return e;if(\"function\"==typeof n)return n;throw new Error(`No implementation found in plugin definition for member ${t}.`)}function r(e=(()=>{}),t,r){return(...o)=>t.reduce(((t,c)=>()=>{const s=n(c,e.name);return\"object\"==typeof e?s(\"function\"==typeof t?t():t,r):s(o,t.bind(r),r)}),e)()}const o=[\"member-function\",\"member-property\",\"static-member\",\"function\",\"class\"],c=[\"function\",\"class\"];const s=e=>Array.isArray(e)?e:[e],i=e=>e.sort((({position:e=100},{position:t=100})=>e-t)),u=e=>{const t=e.reduce(((e,t)=>(Object.entries(t).forEach((([t,n])=>{e[t]||(e[t]={}),Object.entries(n).forEach((([n,r])=>{!function(e,t){if(!o.includes(e))throw Error(`Unexpected handler type '${e}' for namespace '${t}', expected one of [${o.join(\", \")}]`)}(n,t),c.includes(n)?((e,t,n,r)=>{e[t][n]||(e[t][n]=[]),s(r).forEach((r=>{e[t][n].push(r)}))})(e,t,n,r):((e,t,n,r)=>{e[t][n]||(e[t][n]={}),Object.entries(r).forEach((([r,o])=>{e[t][n][r]||(e[t][n][r]=[]),s(o).forEach((o=>{e[t][n][r].push(o)}))}))})(e,t,n,r)}))})),e)),{});return(e=>{for(const t in e)for(const n in e[t])if(c.includes(n))e[t][n]=i(e[t][n]);else for(const r in e[t][n])e[t][n][r]=i(e[t][n][r])})(t),t};var l=new class{constructor(){this.plugins=[]}setPlugins(e){this.plugins=u(e),(function(){try{if(\"undefined\"!=typeof globalThis)return globalThis;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;if(\"undefined\"!=typeof ServiceWorkerGlobalScope)return ServiceWorkerGlobalScope}catch{}return{}}()).plugins=this.plugins}},a=(e,t,n)=>e.reduce(((e,r)=>{const o=l.plugins&&l.plugins[r]&&l.plugins[r][t];if(n){const{value:t}=Object.getOwnPropertyDescriptor(o||{},n)||{};if(t)return e.concat(t)}else if(o)return e.concat(o);return e}),[]);function f(e){return(t,n,o)=>{const c=a(e,\"function\");return c.length?r(t,c,n)(...o):t.apply(n,o)}}function p(e,t){return function(e){const t=e[e.length-1];return l.plugins[t]&&l.plugins[t].class||[]}(t).reduce(((t,r)=>{const o=n(r,e.name)(t);if(Object.prototype.isPrototypeOf.call(t,o))throw new Error(\"Subclassing via `class` API is not allowed.\\nConsider using other approach for this, e.g. plugins for members.\");return o}),e)}function d(e){return e.prototype.__namespaces__}function g(e){return(t,r,o)=>{const c=p(class extends t{constructor(...e){return function(e,t){const r=d(Object.getPrototypeOf(e).constructor);return a(r,\"member-property\").forEach((t=>Object.entries(t).forEach((([t,r])=>{const o=e[t]||(()=>{}),c=r.reduce(((t,r)=>n(r,o.name)(t,e)),o);e[t]=c})))),e.__construct&&e.__construct(...t),e}(Reflect.construct(t,r,o),e)}},e);return Reflect.construct(c,r)}}function y(e,t){return(n,o,c)=>{const s=Reflect.get(n,o,c),i=a(t,\"class\"===e?\"static-member\":\"member-function\",o);if(!i.length)return s;const u=r(s,i,c);return\"object\"==typeof s?u():u}}var b=new class{constructor(){this.generated=[]}setPlugins(e){l.setPlugins(e.map((e=>e.default||e)))}Extensible(n=class{}){if(n[e])return n;const{name:r}=n,{value:o=Symbol(`Cache Identity ${r}`)}=Object.getOwnPropertyDescriptor(n,t)||{};if(!this.generated[o]){const r=class extends n{constructor(...e){super(...e);const{__namespaces__:t}=Object.getPrototypeOf(this),n=(e=>y(\"instance\",e))(t);return new Proxy(this,{get:n})}__construct(){}};r[e]=!0,this.generated[o]=r,Object.defineProperty(n,t,{value:o,writable:!1})}return this.generated[o]}middleware(e,t){try{!function(e,t){const n=Object.assign([],Reflect.get(e.prototype,\"__namespaces__\"));n.includes(t)||n.push(t),e.prototype.__namespaces__=n}(e,t);const n=d(e),r={get:y(\"class\",n),apply:f(n),construct:g(n)};return new Proxy(e,r)}catch(n){return console.log(`Failed to apply middleware to: ${e} (${t}).`),console.log(n),e}}};export default b;\n"]},"metadata":{},"sourceType":"module"}