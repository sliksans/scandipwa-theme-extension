{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/InstallPrompt/InstallPrompt.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport InstallPromptAndroid from \"/home/arturs/scandiweb/scandipwa/src/component/InstallPromptAndroid\";\nimport InstallPromptIOS from \"/home/arturs/scandiweb/scandipwa/src/component/InstallPromptIOS\";\nimport { DeviceType } from \"/home/arturs/scandiweb/scandipwa/src/type/Device\";\nimport \"./InstallPrompt.style\";\n/** #namespace Component/InstallPrompt/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const InstallPrompt = Mosaic.middleware((_temp = _class = class InstallPrompt_ extends Mosaic.Extensible(PureComponent) {\n  /**\n   * Currently BeforeInstallPromptEvent is supported only on\n   * - Android webview\n   * - Chrome for Android\n   * - Samsung Internet\n   * But iOS has own \"Add to Home Screen button\" on Safari share menu\n   */\n  hasSupport() {\n    const {\n      device,\n      hasInstallPromptEvent,\n      isBannerClosed\n    } = this.props;\n    const {\n      android,\n      ios,\n      safari,\n      standaloneMode\n    } = device;\n    const isAndroid = android && hasInstallPromptEvent;\n    const isIos = ios && safari;\n    return (isAndroid || isIos) && !standaloneMode && !isBannerClosed;\n  }\n\n  renderPrompt() {\n    const {\n      device,\n      containerFunctions\n    } = this.props;\n\n    if (device.ios) {\n      return /*#__PURE__*/_checkBEM(React, InstallPromptIOS, Object.assign({}, containerFunctions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 20\n        }\n      }));\n    }\n\n    if (device.android) {\n      return /*#__PURE__*/_checkBEM(React, InstallPromptAndroid, Object.assign({}, containerFunctions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 20\n        }\n      }));\n    }\n\n    return null;\n  }\n\n  render() {\n    const displayComponent = this.hasSupport();\n\n    if (!displayComponent) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"InstallPrompt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, this.renderPrompt());\n  }\n\n}, _class.propTypes = {\n  device: DeviceType.isRequired,\n  isBannerClosed: PropTypes.bool.isRequired,\n  hasInstallPromptEvent: PropTypes.bool.isRequired,\n  containerFunctions: PropTypes.object.isRequired\n}, _temp), \"Component/InstallPrompt/Component\");\nexport default InstallPrompt;","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/InstallPrompt/InstallPrompt.component.js"],"names":["PropTypes","PureComponent","InstallPromptAndroid","InstallPromptIOS","DeviceType","hasSupport","device","hasInstallPromptEvent","isBannerClosed","props","android","ios","safari","standaloneMode","isAndroid","isIos","renderPrompt","containerFunctions","render","displayComponent","propTypes","isRequired","bool","object","InstallPrompt"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,OAA9B;AAEA,OAAOC,oBAAP;AACA,OAAOC,gBAAP;AACA,SAASC,UAAT;AAEA;AAEA;;;;AACA,gHAAmCH,aAAnC,EAAiD;AAQ7C;AACJ;AACA;AACA;AACA;AACA;AACA;AACII,EAAAA,UAAU,GAAG;AACT,UAAM;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,qBAAV;AAAiCC,MAAAA;AAAjC,QAAoD,KAAKC,KAA/D;AACA,UAAM;AACFC,MAAAA,OADE;AAEFC,MAAAA,GAFE;AAGFC,MAAAA,MAHE;AAIFC,MAAAA;AAJE,QAKFP,MALJ;AAMA,UAAMQ,SAAS,GAAGJ,OAAO,IAAIH,qBAA7B;AACA,UAAMQ,KAAK,GAAGJ,GAAG,IAAIC,MAArB;AAEA,WAAO,CAACE,SAAS,IAAIC,KAAd,KACA,CAACF,cADD,IAEA,CAACL,cAFR;AAGH;;AAEDQ,EAAAA,YAAY,GAAG;AACX,UAAM;AAAEV,MAAAA,MAAF;AAAUW,MAAAA;AAAV,QAAiC,KAAKR,KAA5C;;AAEA,QAAIH,MAAM,CAACK,GAAX,EAAgB;AACZ,2CAAQ,gBAAR,oBAA8BM,kBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH;;AAED,QAAIX,MAAM,CAACI,OAAX,EAAoB;AAChB,2CAAQ,oBAAR,oBAAkCO,kBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH;;AAED,WAAO,IAAP;AACH;;AAEDC,EAAAA,MAAM,GAAG;AACL,UAAMC,gBAAgB,GAAG,KAAKd,UAAL,EAAzB;;AAEA,QAAI,CAACc,gBAAL,EAAuB;AACnB,aAAO,IAAP;AACH;;AAED;AACS,MAAA,KAAK,EAAC,eADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEU,KAAKH,YAAL,EAFV;AAKH;;AAzD4C,CAAjD,SACWI,SADX,GACuB;AACfd,EAAAA,MAAM,EAAEF,UAAU,CAACiB,UADJ;AAEfb,EAAAA,cAAc,EAAER,SAAS,CAACsB,IAAV,CAAeD,UAFhB;AAGfd,EAAAA,qBAAqB,EAAEP,SAAS,CAACsB,IAAV,CAAeD,UAHvB;AAIfJ,EAAAA,kBAAkB,EAAEjB,SAAS,CAACuB,MAAV,CAAiBF;AAJtB,CADvB;AA4DA,eAAeG,aAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport InstallPromptAndroid from 'Component/InstallPromptAndroid';\nimport InstallPromptIOS from 'Component/InstallPromptIOS';\nimport { DeviceType } from 'Type/Device';\n\nimport './InstallPrompt.style';\n\n/** @namespace Component/InstallPrompt/Component */\nexport class InstallPrompt extends PureComponent {\n    static propTypes = {\n        device: DeviceType.isRequired,\n        isBannerClosed: PropTypes.bool.isRequired,\n        hasInstallPromptEvent: PropTypes.bool.isRequired,\n        containerFunctions: PropTypes.object.isRequired\n    };\n\n    /**\n     * Currently BeforeInstallPromptEvent is supported only on\n     * - Android webview\n     * - Chrome for Android\n     * - Samsung Internet\n     * But iOS has own \"Add to Home Screen button\" on Safari share menu\n     */\n    hasSupport() {\n        const { device, hasInstallPromptEvent, isBannerClosed } = this.props;\n        const {\n            android,\n            ios,\n            safari,\n            standaloneMode\n        } = device;\n        const isAndroid = android && hasInstallPromptEvent;\n        const isIos = ios && safari;\n\n        return (isAndroid || isIos)\n            && !standaloneMode\n            && !isBannerClosed;\n    }\n\n    renderPrompt() {\n        const { device, containerFunctions } = this.props;\n\n        if (device.ios) {\n            return <InstallPromptIOS { ...containerFunctions } />;\n        }\n\n        if (device.android) {\n            return <InstallPromptAndroid { ...containerFunctions } />;\n        }\n\n        return null;\n    }\n\n    render() {\n        const displayComponent = this.hasSupport();\n\n        if (!displayComponent) {\n            return null;\n        }\n\n        return (\n            <div block=\"InstallPrompt\">\n                { this.renderPrompt() }\n            </div>\n        );\n    }\n}\n\nexport default InstallPrompt;\n"]},"metadata":{},"sourceType":"module"}