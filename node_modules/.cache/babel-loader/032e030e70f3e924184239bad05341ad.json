{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/TierPrices/TierPrices.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { ProductType } from \"/home/arturs/scandiweb/extension/src/type/ProductList\";\nimport { formatPrice } from \"/home/arturs/scandiweb/extension/src/util/Price\";\nimport \"./TierPrices.style\";\n/** #namespace Component/TierPrices/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const TierPrices = Mosaic.middleware((_temp = _class = class TierPrices_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    this.renderDetailedTierPrice = function ({\n      discount: {\n        percent_off\n      },\n      final_price: {\n        value,\n        currency\n      },\n      quantity\n    }) {\n      const {\n        product: {\n          price_range: {\n            minimum_price: {\n              final_price: {\n                value: minPriceForOneUnit\n              }\n            }\n          }\n        }\n      } = _this.props; // Don't show offers that make no sense\n\n      if (value >= minPriceForOneUnit) {\n        return null;\n      }\n\n      const formattedPrice = formatPrice(value, currency);\n      return /*#__PURE__*/_checkBEM(React, \"li\", {\n        block: \"TierPrices\",\n        elem: \"Item\",\n        key: quantity,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }, __('Buy %s for %s each and ', quantity, formattedPrice), /*#__PURE__*/_checkBEM(React, \"strong\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, __('save %s%', Math.round(percent_off))));\n    };\n  }\n\n  renderLowestTierPrice() {\n    const {\n      product: {\n        price_tiers,\n        price_range: {\n          minimum_price: {\n            final_price: {\n              currency\n            }\n          }\n        }\n      }\n    } = this.props;\n    const lowestValue = price_tiers.reduce(function (acc, {\n      final_price: {\n        value\n      }\n    }) {\n      return acc < value ? acc : value;\n    }, price_tiers[0].final_price.value);\n    const formattedPrice = formatPrice(lowestValue, currency);\n    return /*#__PURE__*/_checkBEM(React, \"span\", {\n      block: \"TierPrices\",\n      elem: \"Item\",\n      mods: {\n        isLowest: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, __('As low as '), /*#__PURE__*/_checkBEM(React, \"span\", {\n      block: \"TierPrices\",\n      elem: \"ItemPrice\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, `${formattedPrice}`));\n  }\n\n  renderDetailedTierPriceList() {\n    const {\n      product: {\n        price_tiers\n      }\n    } = this.props;\n    return price_tiers.map(this.renderDetailedTierPrice);\n  }\n\n  renderTierPrice() {\n    const {\n      isLowestPrice\n    } = this.props;\n\n    if (isLowestPrice) {\n      return this.renderLowestTierPrice();\n    }\n\n    return this.renderDetailedTierPriceList();\n  }\n\n  render() {\n    const {\n      product,\n      product: {\n        price_tiers = []\n      }\n    } = this.props;\n\n    if (!price_tiers || Object.keys(product).length <= 0 || !price_tiers.length) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"TierPrices\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, this.renderTierPrice());\n  }\n\n}, _class.propTypes = {\n  product: ProductType.isRequired,\n  isLowestPrice: PropTypes.bool\n}, _class.defaultProps = {\n  isLowestPrice: false\n}, _temp), \"Component/TierPrices/Component\");\nexport default TierPrices;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/TierPrices/TierPrices.component.js"],"names":["PropTypes","PureComponent","ProductType","formatPrice","renderDetailedTierPrice","discount","percent_off","final_price","value","currency","quantity","product","price_range","minimum_price","minPriceForOneUnit","props","formattedPrice","__","Math","round","renderLowestTierPrice","price_tiers","lowestValue","reduce","acc","isLowest","renderDetailedTierPriceList","map","renderTierPrice","isLowestPrice","render","Object","keys","length","propTypes","isRequired","bool","defaultProps","TierPrices"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ProductType } from 'Type/ProductList';\nimport { formatPrice } from 'Util/Price';\n\nimport './TierPrices.style';\n\n/** @namespace Component/TierPrices/Component */\nexport class TierPrices extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        isLowestPrice: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isLowestPrice: false\n    };\n\n    renderDetailedTierPrice = ({\n        discount: {\n            percent_off\n        },\n        final_price: {\n            value,\n            currency\n        },\n        quantity\n    }) => {\n        const {\n            product: {\n                price_range: {\n                    minimum_price: {\n                        final_price: {\n                            value: minPriceForOneUnit\n                        }\n                    }\n                }\n            }\n        } = this.props;\n\n        // Don't show offers that make no sense\n        if (value >= minPriceForOneUnit) {\n            return null;\n        }\n\n        const formattedPrice = formatPrice(value, currency);\n\n        return (\n            <li block=\"TierPrices\" elem=\"Item\" key={ quantity }>\n                { __(\n                    'Buy %s for %s each and ',\n                    quantity,\n                    formattedPrice\n                ) }\n                <strong>\n                    { __(\n                        'save %s%',\n                        Math.round(percent_off)\n                    ) }\n                </strong>\n            </li>\n        );\n    };\n\n    renderLowestTierPrice() {\n        const {\n            product: {\n                price_tiers,\n                price_range: {\n                    minimum_price: {\n                        final_price: {\n                            currency\n                        }\n                    }\n                }\n            }\n        } = this.props;\n\n        const lowestValue = price_tiers\n            .reduce((acc, { final_price: { value } }) => (acc < value ? acc : value), price_tiers[0].final_price.value);\n\n        const formattedPrice = formatPrice(lowestValue, currency);\n        return (\n            <span block=\"TierPrices\" elem=\"Item\" mods={ { isLowest: true } }>\n                { __('As low as ') }\n                <span block=\"TierPrices\" elem=\"ItemPrice\">\n                    { `${ formattedPrice }` }\n                </span>\n            </span>\n        );\n    }\n\n    renderDetailedTierPriceList() {\n        const { product: { price_tiers } } = this.props;\n\n        return price_tiers.map(this.renderDetailedTierPrice);\n    }\n\n    renderTierPrice() {\n        const { isLowestPrice } = this.props;\n\n        if (isLowestPrice) {\n            return this.renderLowestTierPrice();\n        }\n\n        return this.renderDetailedTierPriceList();\n    }\n\n    render() {\n        const { product, product: { price_tiers = [] } } = this.props;\n\n        if (!price_tiers || Object.keys(product).length <= 0 || !price_tiers.length) {\n            return null;\n        }\n\n        return (\n            <div block=\"TierPrices\">\n                { this.renderTierPrice() }\n            </div>\n        );\n    }\n}\n\nexport default TierPrices;\n"]},"metadata":{},"sourceType":"module"}