{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { Field } from \"/home/arturs/scandiweb/extension/src/util/Query\";\n/**\n * Order Query\n * @class OrderQuery\n * #namespace Query/Order\n */\n\nexport const OrderQuery = Mosaic.middleware(class OrderQuery_ extends Mosaic.Extensible() {\n  getOrderListQuery() {\n    return new Field('getOrderList').addFieldList(this._getOrderListFields(true));\n  }\n\n  getDownloadableQuery() {\n    return new Field('customerDownloadableProducts').addField(this._getDownloadableField());\n  }\n\n  getOrderByIdQuery(orderId) {\n    return this._getOrderByIdField(orderId);\n  }\n\n  linkOrderMutation(customerEmail) {\n    return new Field('linkOrder').addArgument('customer_email', 'String!', customerEmail);\n  }\n\n  _getOrderListFields(isList) {\n    return [this._getOrderItemsField(isList)];\n  }\n\n  _getOrderByIdField(orderId) {\n    return new Field('getOrderById').addArgument('id', 'Int!', orderId).addFieldList(this._getOrderItemsFields());\n  }\n\n  _getOrderProductsField() {\n    return new Field('order_products').addFieldList(this._getOrderProductsFields());\n  }\n\n  _getOrderProductsFields() {\n    return [...this._getDefaultFields(), ...this._prepareImageFields(), this._prepareAttributes()];\n  }\n\n  _prepareImageFields() {\n    return [new Field('thumbnail').addFieldList(this._prepareThumbnailFields()), new Field('small_image').addFieldList(this._prepareSmallImageFields())];\n  }\n\n  _prepareSmallImageFields() {\n    return ['url', 'label', 'path'];\n  }\n\n  _prepareThumbnailFields() {\n    return ['url', 'label', 'path'];\n  }\n\n  _prepareAttributes() {\n    return new Field('s_attributes').setAlias('attributes').addFieldList(this._prepareAttributesFields());\n  }\n\n  _prepareAttributesFields() {\n    return ['attribute_value', 'attribute_code', 'attribute_type', 'attribute_label', this._getAttributeOptions()];\n  }\n\n  _getAttributeOptions() {\n    return new Field('attribute_options').addFieldList(this._getAttributeOptionsFields());\n  }\n\n  _getAttributeOptionsFields() {\n    return ['label', 'value', new Field('swatch_data').addField('value')];\n  }\n\n  _getDefaultFields() {\n    return ['id', 'name', new Field('short_description').addField('html'), 'sku', 'qty', 'row_total', 'original_price', 'license_key'];\n  }\n\n  _prepareShippingInfo() {\n    return new Field('shipping_info').addFieldList(this._prepareShippingInfoFields());\n  }\n\n  _prepareShippingInfoFields() {\n    return ['shipping_method', 'shipping_description', 'shipping_incl_tax', 'shipping_amount', 'tracking_numbers', this._prepareOrderCustomerAddressInfo()];\n  }\n\n  _prepareOrderCustomerAddressInfo() {\n    return new Field('shipping_address').addFieldList(this._prepareOrderCustomerAddressInfoFields());\n  }\n\n  _prepareOrderCustomerAddressInfoFields() {\n    return ['city', 'company', 'firstname', 'lastname', 'middlename', 'telephone', 'district', 'house_number', 'apartment_number', 'postomat_code', 'store_pickup_code', 'post_office_code', 'postcode', 'street', 'is_b2b', 'region', 'organizationname', 'organizationbin', 'organizationaddress', 'organizationiic', 'organizationbik'];\n  }\n\n  _getBaseOrderInfoField(isList) {\n    return new Field('base_order_info').addFieldList(this._getBaseOrderInfoFields(isList));\n  }\n\n  _getBaseOrderInfoFields(isList) {\n    return ['id', 'increment_id', 'created_at', 'status_label', 'grand_total', 'currency_code', ...(isList ? [] : ['sub_total'])];\n  }\n\n  _getPaymentInfoField() {\n    return new Field('payment_info').addFieldList(this._getPaymentInfoFields());\n  }\n\n  _getPaymentInfoFields() {\n    return ['method', this._getAdditionalInformationField()];\n  }\n\n  _getAdditionalInformationField() {\n    return new Field('additional_information').addFieldList(this._getAdditionalInformationFields());\n  }\n\n  _getAdditionalInformationFields() {\n    return ['bank', 'method_title', 'credit_type', 'month', this._getCustomerInfoField()];\n  }\n\n  _getCustomerInfoField() {\n    return new Field('customer_info').addFieldList(this._getCustomerInfoFields());\n  }\n\n  _getCustomerInfoFields() {\n    return ['first_name', 'last_name', 'phone'];\n  }\n\n  _getOrderItemsField(isList) {\n    return new Field('items').addFieldList(this._getOrderItemsFields(isList));\n  }\n\n  _getOrderItemsFields(isList) {\n    return [this._getBaseOrderInfoField(isList), ...(!isList ? [this._getPaymentInfoField(), this._prepareShippingInfo(), this._getOrderProductsField()] : [])];\n  }\n\n  _getDownloadableField() {\n    return new Field('items').addFieldList(this._getDownloadableFields());\n  }\n\n  _getDownloadableFields() {\n    return ['order_increment_id', 'date', 'status', 'download_url', 'link_title', 'remaining_downloads', 'title'];\n  }\n\n}, \"Query/Order\");\nexport default new OrderQuery();","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/query/Order.query.js"],"names":["Field","getOrderListQuery","addFieldList","_getOrderListFields","getDownloadableQuery","addField","_getDownloadableField","getOrderByIdQuery","orderId","_getOrderByIdField","linkOrderMutation","customerEmail","addArgument","isList","_getOrderItemsField","_getOrderItemsFields","_getOrderProductsField","_getOrderProductsFields","_getDefaultFields","_prepareImageFields","_prepareAttributes","_prepareThumbnailFields","_prepareSmallImageFields","setAlias","_prepareAttributesFields","_getAttributeOptions","_getAttributeOptionsFields","_prepareShippingInfo","_prepareShippingInfoFields","_prepareOrderCustomerAddressInfo","_prepareOrderCustomerAddressInfoFields","_getBaseOrderInfoField","_getBaseOrderInfoFields","_getPaymentInfoField","_getPaymentInfoFields","_getAdditionalInformationField","_getAdditionalInformationFields","_getCustomerInfoField","_getCustomerInfoFields","_getDownloadableFields","OrderQuery"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { Field } from 'Util/Query';\n\n/**\n * Order Query\n * @class OrderQuery\n * @namespace Query/Order\n */\nexport class OrderQuery {\n    getOrderListQuery() {\n        return new Field('getOrderList')\n            .addFieldList(this._getOrderListFields(true));\n    }\n\n    getDownloadableQuery() {\n        return new Field('customerDownloadableProducts')\n            .addField(this._getDownloadableField());\n    }\n\n    getOrderByIdQuery(orderId) {\n        return this._getOrderByIdField(orderId);\n    }\n\n    linkOrderMutation(customerEmail) {\n        return new Field('linkOrder')\n            .addArgument('customer_email', 'String!', customerEmail);\n    }\n\n    _getOrderListFields(isList) {\n        return [\n            this._getOrderItemsField(isList)\n        ];\n    }\n\n    _getOrderByIdField(orderId) {\n        return new Field('getOrderById')\n            .addArgument('id', 'Int!', orderId)\n            .addFieldList(this._getOrderItemsFields());\n    }\n\n    _getOrderProductsField() {\n        return new Field('order_products')\n            .addFieldList(this._getOrderProductsFields());\n    }\n\n    _getOrderProductsFields() {\n        return [\n            ...this._getDefaultFields(),\n            ...this._prepareImageFields(),\n            this._prepareAttributes()\n        ];\n    }\n\n    _prepareImageFields() {\n        return [\n            new Field('thumbnail')\n                .addFieldList(this._prepareThumbnailFields()),\n            new Field('small_image')\n                .addFieldList(this._prepareSmallImageFields())\n        ];\n    }\n\n    _prepareSmallImageFields() {\n        return [\n            'url',\n            'label',\n            'path'\n        ];\n    }\n\n    _prepareThumbnailFields() {\n        return [\n            'url',\n            'label',\n            'path'\n        ];\n    }\n\n    _prepareAttributes() {\n        return new Field('s_attributes')\n            .setAlias('attributes')\n            .addFieldList(this._prepareAttributesFields());\n    }\n\n    _prepareAttributesFields() {\n        return [\n            'attribute_value',\n            'attribute_code',\n            'attribute_type',\n            'attribute_label',\n            this._getAttributeOptions()\n        ];\n    }\n\n    _getAttributeOptions() {\n        return new Field('attribute_options')\n            .addFieldList(this._getAttributeOptionsFields());\n    }\n\n    _getAttributeOptionsFields() {\n        return [\n            'label',\n            'value',\n            new Field('swatch_data')\n                .addField('value')\n        ];\n    }\n\n    _getDefaultFields() {\n        return [\n            'id',\n            'name',\n            (new Field('short_description').addField('html')),\n            'sku',\n            'qty',\n            'row_total',\n            'original_price',\n            'license_key'\n        ];\n    }\n\n    _prepareShippingInfo() {\n        return new Field('shipping_info')\n            .addFieldList(this._prepareShippingInfoFields());\n    }\n\n    _prepareShippingInfoFields() {\n        return [\n            'shipping_method',\n            'shipping_description',\n            'shipping_incl_tax',\n            'shipping_amount',\n            'tracking_numbers',\n            this._prepareOrderCustomerAddressInfo()\n        ];\n    }\n\n    _prepareOrderCustomerAddressInfo() {\n        return new Field('shipping_address')\n            .addFieldList(this._prepareOrderCustomerAddressInfoFields());\n    }\n\n    _prepareOrderCustomerAddressInfoFields() {\n        return [\n            'city',\n            'company',\n            'firstname',\n            'lastname',\n            'middlename',\n            'telephone',\n            'district',\n            'house_number',\n            'apartment_number',\n            'postomat_code',\n            'store_pickup_code',\n            'post_office_code',\n            'postcode',\n            'street',\n            'is_b2b',\n            'region',\n            'organizationname',\n            'organizationbin',\n            'organizationaddress',\n            'organizationiic',\n            'organizationbik'\n        ];\n    }\n\n    _getBaseOrderInfoField(isList) {\n        return new Field('base_order_info')\n            .addFieldList(this._getBaseOrderInfoFields(isList));\n    }\n\n    _getBaseOrderInfoFields(isList) {\n        return [\n            'id',\n            'increment_id',\n            'created_at',\n            'status_label',\n            'grand_total',\n            'currency_code',\n            ...(isList ? [] : ['sub_total'])\n        ];\n    }\n\n    _getPaymentInfoField() {\n        return new Field('payment_info')\n            .addFieldList(this._getPaymentInfoFields());\n    }\n\n    _getPaymentInfoFields() {\n        return [\n            'method',\n            this._getAdditionalInformationField()\n        ];\n    }\n\n    _getAdditionalInformationField() {\n        return new Field('additional_information')\n            .addFieldList(this._getAdditionalInformationFields());\n    }\n\n    _getAdditionalInformationFields() {\n        return [\n            'bank',\n            'method_title',\n            'credit_type',\n            'month',\n            this._getCustomerInfoField()\n        ];\n    }\n\n    _getCustomerInfoField() {\n        return new Field('customer_info')\n            .addFieldList(this._getCustomerInfoFields());\n    }\n\n    _getCustomerInfoFields() {\n        return [\n            'first_name',\n            'last_name',\n            'phone'\n        ];\n    }\n\n    _getOrderItemsField(isList) {\n        return new Field('items')\n            .addFieldList(this._getOrderItemsFields(isList));\n    }\n\n    _getOrderItemsFields(isList) {\n        return [\n            this._getBaseOrderInfoField(isList),\n            ...(!isList ? [\n                this._getPaymentInfoField(),\n                this._prepareShippingInfo(),\n                this._getOrderProductsField()\n            ] : [])\n        ];\n    }\n\n    _getDownloadableField() {\n        return new Field('items')\n            .addFieldList(this._getDownloadableFields());\n    }\n\n    _getDownloadableFields() {\n        return [\n            'order_increment_id',\n            'date',\n            'status',\n            'download_url',\n            'link_title',\n            'remaining_downloads',\n            'title'\n        ];\n    }\n}\n\nexport default new OrderQuery();\n"]},"metadata":{},"sourceType":"module"}