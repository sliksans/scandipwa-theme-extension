{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { UPDATE_INFO_LOAD_STATUS, UPDATE_PRODUCT_LIST_INFO } from \"/home/arturs/scandiweb/scandipwa/src/store/ProductListInfo/ProductListInfo.action\";\n/** #namespace Store/ProductListInfo/Reducer/reduceFilters */\n\nexport const reduceFilters = Mosaic.middleware(function (filters) {\n  return filters.reduce(function (co, item) {\n    const {\n      request_var: attribute_code,\n      name: attribute_label,\n      position: attribute_position,\n      filter_items,\n      is_boolean\n    } = item;\n    const {\n      attribute_values,\n      attribute_options\n    } = filter_items.reduce(function (attribute, option) {\n      const {\n        value_string\n      } = option;\n      const {\n        attribute_values,\n        attribute_options\n      } = attribute;\n      attribute_values.push(value_string);\n      return { ...attribute,\n        attribute_options: { ...attribute_options,\n          [value_string]: option\n        }\n      };\n    }, {\n      attribute_values: [],\n      attribute_options: {}\n    });\n    return { ...co,\n      [attribute_code]: {\n        attribute_code,\n        attribute_label,\n        attribute_position,\n        attribute_values,\n        attribute_type: 'select',\n        attribute_options,\n        is_boolean\n      }\n    };\n  }, {});\n}, \"Store/ProductListInfo/Reducer/reduceFilters\");\n/** #namespace Store/ProductListInfo/Reducer/getInitialState */\n\nexport const getInitialState = Mosaic.middleware(function () {\n  return {\n    minPrice: 0,\n    maxPrice: 0,\n    sortFields: {},\n    filters: {},\n    isLoading: true\n  };\n}, \"Store/ProductListInfo/Reducer/getInitialState\");\n/** #namespace Store/ProductListInfo/Reducer */\n\nexport const ProductListReducer = Mosaic.middleware(_c = function (state = getInitialState(), action) {\n  const {\n    type\n  } = action;\n\n  switch (type) {\n    case UPDATE_PRODUCT_LIST_INFO:\n      {\n        const {\n          selectedFilter,\n          products: {\n            filters: availableFilters = [],\n            min_price,\n            max_price,\n            sort_fields: sortFields\n          } = {}\n        } = action;\n        return { ...state,\n          filters: reduceFilters(availableFilters),\n          sortFields,\n          minPrice: Math.floor(min_price),\n          maxPrice: Math.ceil(max_price),\n          isLoading: false,\n          selectedFilter\n        };\n      }\n\n    case UPDATE_INFO_LOAD_STATUS:\n      {\n        const {\n          isLoading\n        } = action;\n        return { ...state,\n          isLoading\n        };\n      }\n\n    default:\n      return state;\n  }\n}, \"Store/ProductListInfo/Reducer\");\n_c2 = ProductListReducer;\nexport default ProductListReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductListReducer$\");\n$RefreshReg$(_c2, \"ProductListReducer\");","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/store/ProductListInfo/ProductListInfo.reducer.js"],"names":["UPDATE_INFO_LOAD_STATUS","UPDATE_PRODUCT_LIST_INFO","reduceFilters","filters","reduce","co","item","request_var","attribute_code","name","attribute_label","position","attribute_position","filter_items","is_boolean","attribute_values","attribute_options","attribute","option","value_string","push","attribute_type","getInitialState","minPrice","maxPrice","sortFields","isLoading","ProductListReducer","state","action","type","selectedFilter","products","availableFilters","min_price","max_price","sort_fields","Math","floor","ceil"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport {\n    UPDATE_INFO_LOAD_STATUS,\n    UPDATE_PRODUCT_LIST_INFO\n} from 'Store/ProductListInfo/ProductListInfo.action';\n\n/** @namespace Store/ProductListInfo/Reducer/reduceFilters */\nexport const reduceFilters = (filters) => filters.reduce((co, item) => {\n    const {\n        request_var: attribute_code,\n        name: attribute_label,\n        position: attribute_position,\n        filter_items,\n        is_boolean\n    } = item;\n\n    const { attribute_values, attribute_options } = filter_items.reduce((attribute, option) => {\n        const { value_string } = option;\n        const { attribute_values, attribute_options } = attribute;\n\n        attribute_values.push(value_string);\n\n        return {\n            ...attribute,\n            attribute_options: {\n                ...attribute_options,\n                [value_string]: option\n            }\n        };\n    }, { attribute_values: [], attribute_options: {} });\n\n    return {\n        ...co,\n        [attribute_code]: {\n            attribute_code,\n            attribute_label,\n            attribute_position,\n            attribute_values,\n            attribute_type: 'select',\n            attribute_options,\n            is_boolean\n        }\n    };\n}, {});\n\n/** @namespace Store/ProductListInfo/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    minPrice: 0,\n    maxPrice: 0,\n    sortFields: {},\n    filters: {},\n    isLoading: true\n});\n\n/** @namespace Store/ProductListInfo/Reducer */\nexport const ProductListReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type } = action;\n\n    switch (type) {\n    case UPDATE_PRODUCT_LIST_INFO: {\n        const {\n            selectedFilter,\n            products: {\n                filters: availableFilters = [],\n                min_price,\n                max_price,\n                sort_fields: sortFields\n            } = {}\n        } = action;\n\n        return {\n            ...state,\n            filters: reduceFilters(availableFilters),\n            sortFields,\n            minPrice: Math.floor(min_price),\n            maxPrice: Math.ceil(max_price),\n            isLoading: false,\n            selectedFilter\n        };\n    }\n\n    case UPDATE_INFO_LOAD_STATUS: {\n        const { isLoading } = action;\n\n        return {\n            ...state,\n            isLoading\n        };\n    }\n\n    default:\n        return state;\n    }\n};\n\nexport default ProductListReducer;\n"]},"metadata":{},"sourceType":"module"}