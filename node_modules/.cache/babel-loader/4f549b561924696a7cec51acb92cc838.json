{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/MyAccountMyWishlist/MyAccountMyWishlist.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport Loader from \"/home/arturs/scandiweb/scandipwa/src/component/Loader\";\nimport ProductCard from \"/home/arturs/scandiweb/scandipwa/src/component/ProductCard\";\nimport ShareWishlistPopup from \"/home/arturs/scandiweb/scandipwa/src/component/ShareWishlistPopup\";\nimport WishlistItem from \"/home/arturs/scandiweb/scandipwa/src/component/WishlistItem\";\nimport { ProductType } from \"/home/arturs/scandiweb/scandipwa/src/type/ProductList\";\nimport CSS from \"/home/arturs/scandiweb/scandipwa/src/util/CSS\";\nimport \"./MyAccountMyWishlist.style\";\n/** #namespace Component/MyAccountMyWishlist/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const MyAccountMyWishlist = Mosaic.middleware((_temp = _class = class MyAccountMyWishlist_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      selectedIdMap: []\n    };\n    this.actionLineMobileRef = /*#__PURE__*/createRef();\n    this.productsRef = /*#__PURE__*/createRef();\n\n    this.handleSelectIdChange = function (id, isRemoveOnly = false) {\n      const {\n        selectedIdMap: prevSelectedIdMap\n      } = _this.state;\n      const selectIdIndex = prevSelectedIdMap.findIndex(function (selectId) {\n        return selectId === id;\n      });\n      const selectedIdMap = Array.from(prevSelectedIdMap);\n\n      if (isRemoveOnly) {\n        if (selectIdIndex !== -1) {\n          selectedIdMap.splice(selectIdIndex, 1);\n\n          _this.setState({\n            selectedIdMap\n          });\n        }\n\n        return;\n      }\n\n      if (selectIdIndex === -1) {\n        selectedIdMap.push(id);\n      } else {\n        selectedIdMap.splice(selectIdIndex, 1);\n      }\n\n      _this.setState({\n        selectedIdMap\n      });\n    };\n\n    this.handleRemoveButtonClick = function () {\n      // Removes selected items from wishlist\n      const {\n        removeSelectedFromWishlist\n      } = _this.props;\n      const {\n        selectedIdMap\n      } = _this.state;\n      removeSelectedFromWishlist(selectedIdMap);\n\n      _this.setState({\n        selectedIdMap: []\n      });\n    };\n\n    this.renderNoProductsFound = function () {\n      return /*#__PURE__*/_checkBEM(React, \"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/_checkBEM(React, \"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, __('Wishlist is empty!')));\n    };\n\n    this.renderProduct = function ([id, product]) {\n      const {\n        isEditingActive,\n        loadingItemsMap\n      } = _this.props;\n      return /*#__PURE__*/_checkBEM(React, WishlistItem, {\n        key: id,\n        product: product,\n        isRemoving: loadingItemsMap[id],\n        isEditingActive: isEditingActive,\n        handleSelectIdChange: _this.handleSelectIdChange,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setActionLineHeight();\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      isEditingActive: prevIsEditingActive,\n      isMobile: prevIsMobile\n    } = prevProps;\n    const {\n      isEditingActive,\n      isMobile\n    } = this.props;\n    const {\n      actionLineHeight: prevActionLineHeight\n    } = this.state;\n    const {\n      actionLineHeight\n    } = this.state;\n\n    if (prevIsEditingActive !== isEditingActive && prevActionLineHeight === actionLineHeight || isMobile !== prevIsMobile) {\n      this.setActionLineHeight();\n    }\n  }\n\n  setActionLineHeight() {\n    const {\n      isMobile\n    } = this.props;\n    const {\n      current\n    } = this.actionLineMobileRef;\n\n    if (!current) {\n      return;\n    }\n\n    CSS.setVariable(this.productsRef, 'myaccount-wihslist-products-margin-bottom', isMobile ? `${current.clientHeight}px` : 0);\n  }\n\n  renderProducts() {\n    const {\n      isWishlistLoading,\n      isWishlistEmpty,\n      wishlistItems\n    } = this.props;\n\n    if (isWishlistLoading && isWishlistEmpty) {\n      return this.renderPlaceholders();\n    }\n\n    return Object.entries(wishlistItems).map(this.renderProduct);\n  }\n\n  renderClearWishlist() {\n    const {\n      removeAll,\n      isActionsDisabled\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"Button\",\n      mods: {\n        likeLink: true\n      },\n      mix: {\n        block: 'MyAccountMyWishlist',\n        elem: 'ClearWishlistButton'\n      },\n      onClick: removeAll,\n      disabled: isActionsDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, __('Clear'));\n  }\n\n  renderAddAllToCart() {\n    const {\n      addAllToCart,\n      isActionsDisabled,\n      isEditingActive,\n      isMobile\n    } = this.props;\n    const isDisabled = isMobile && isEditingActive || isActionsDisabled;\n    return /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"Button\",\n      mix: {\n        block: 'MyAccountMyWishlist',\n        elem: 'Button'\n      },\n      onClick: addAllToCart,\n      disabled: isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, __('Add All to Cart'));\n  }\n\n  renderShareWishlistButton() {\n    const {\n      isWishlistLoading,\n      shareWishlist,\n      isWishlistEmpty\n    } = this.props;\n    const disabled = isWishlistLoading || isWishlistEmpty;\n    return /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"Button\",\n      mods: {\n        isHollow: true\n      },\n      mix: {},\n      onClick: shareWishlist,\n      disabled: disabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, __('Share'));\n  }\n\n  renderRemoveItemsButton() {\n    const {\n      isActionsDisabled,\n      isMobile\n    } = this.props;\n    const {\n      selectedIdMap\n    } = this.state;\n    const isDisabled = isActionsDisabled || isMobile && !selectedIdMap.length;\n    return /*#__PURE__*/_checkBEM(React, \"button\", {\n      block: \"Button\",\n      mods: {\n        likeLink: true\n      },\n      mix: {\n        block: 'MyAccountMyWishlist',\n        elem: 'ClearRemoveItemsButton'\n      },\n      onClick: this.handleRemoveButtonClick,\n      disabled: isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }, selectedIdMap.length === 1 ? __('Remove item (%s)', 1) : __('Remove items (%s)', selectedIdMap.length));\n  }\n\n  renderActionBarAction() {\n    const {\n      isEditingActive\n    } = this.props;\n\n    if (!isEditingActive) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"MyAccountMyWishlist\",\n      elem: \"ActionBarActionWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 13\n      }\n    }, this.renderRemoveItemsButton(), this.renderClearWishlist());\n  }\n\n  renderActionBarMobile() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      ref: this.actionLineMobileRef,\n      block: \"MyAccountMyWishlist\",\n      elem: \"ActionBar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, this.renderActionBarAction(), this.renderAddAllToCart());\n  }\n\n  renderActionBar() {\n    const {\n      isMobile\n    } = this.props;\n\n    if (isMobile) {\n      return this.renderActionBarMobile();\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"MyAccountMyWishlist\",\n      elem: \"ActionBar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }\n    }, this.renderAddAllToCart(), this.renderShareWishlistButton(), this.renderClearWishlist());\n  }\n\n  renderPlaceholders() {\n    var _this2 = this;\n\n    return Array.from({\n      length: 2\n    }, function (_, i) {\n      return /*#__PURE__*/_checkBEM(React, ProductCard, {\n        key: i,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 52\n        }\n      });\n    });\n  }\n\n  renderShareWishlist() {\n    return /*#__PURE__*/_checkBEM(React, ShareWishlistPopup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 16\n      }\n    });\n  }\n\n  renderContent() {\n    const {\n      isWishlistLoading,\n      isWishlistEmpty,\n      isLoading\n    } = this.props;\n\n    if (isWishlistEmpty && !isWishlistLoading) {\n      return this.renderNoProductsFound();\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"MyAccountMyWishlist\",\n      elem: \"Products\",\n      ref: this.productsRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, Loader, {\n      isLoading: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }\n    }), this.renderProducts());\n  }\n\n  render() {\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"MyAccountMyWishlist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 13\n      }\n    }, this.renderShareWishlist(), this.renderContent(), this.renderActionBar());\n  }\n\n}, _class.propTypes = {\n  isLoading: PropTypes.bool.isRequired,\n  isWishlistLoading: PropTypes.bool.isRequired,\n  removeAll: PropTypes.func.isRequired,\n  addAllToCart: PropTypes.func.isRequired,\n  shareWishlist: PropTypes.func.isRequired,\n  isWishlistEmpty: PropTypes.bool.isRequired,\n  wishlistItems: PropTypes.objectOf(ProductType).isRequired,\n  isActionsDisabled: PropTypes.bool.isRequired,\n  isEditingActive: PropTypes.bool.isRequired,\n  isMobile: PropTypes.bool.isRequired,\n  removeSelectedFromWishlist: PropTypes.func.isRequired,\n  loadingItemsMap: PropTypes.objectOf(Object).isRequired\n}, _temp), \"Component/MyAccountMyWishlist/Component\");\nexport default MyAccountMyWishlist;","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/MyAccountMyWishlist/MyAccountMyWishlist.component.js"],"names":["PropTypes","createRef","PureComponent","Loader","ProductCard","ShareWishlistPopup","WishlistItem","ProductType","CSS","state","selectedIdMap","actionLineMobileRef","productsRef","handleSelectIdChange","id","isRemoveOnly","prevSelectedIdMap","selectIdIndex","findIndex","selectId","Array","from","splice","setState","push","handleRemoveButtonClick","removeSelectedFromWishlist","props","renderNoProductsFound","__","renderProduct","product","isEditingActive","loadingItemsMap","componentDidMount","setActionLineHeight","componentDidUpdate","prevProps","prevIsEditingActive","isMobile","prevIsMobile","actionLineHeight","prevActionLineHeight","current","setVariable","clientHeight","renderProducts","isWishlistLoading","isWishlistEmpty","wishlistItems","renderPlaceholders","Object","entries","map","renderClearWishlist","removeAll","isActionsDisabled","likeLink","block","elem","renderAddAllToCart","addAllToCart","isDisabled","renderShareWishlistButton","shareWishlist","disabled","isHollow","renderRemoveItemsButton","length","renderActionBarAction","renderActionBarMobile","renderActionBar","_","i","renderShareWishlist","renderContent","isLoading","render","propTypes","bool","isRequired","func","objectOf","MyAccountMyWishlist"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport Loader from 'Component/Loader';\nimport ProductCard from 'Component/ProductCard';\nimport ShareWishlistPopup from 'Component/ShareWishlistPopup';\nimport WishlistItem from 'Component/WishlistItem';\nimport { ProductType } from 'Type/ProductList';\nimport CSS from 'Util/CSS';\n\nimport './MyAccountMyWishlist.style';\n\n/** @namespace Component/MyAccountMyWishlist/Component */\nexport class MyAccountMyWishlist extends PureComponent {\n    static propTypes = {\n        isLoading: PropTypes.bool.isRequired,\n        isWishlistLoading: PropTypes.bool.isRequired,\n        removeAll: PropTypes.func.isRequired,\n        addAllToCart: PropTypes.func.isRequired,\n        shareWishlist: PropTypes.func.isRequired,\n        isWishlistEmpty: PropTypes.bool.isRequired,\n        wishlistItems: PropTypes.objectOf(ProductType).isRequired,\n        isActionsDisabled: PropTypes.bool.isRequired,\n        isEditingActive: PropTypes.bool.isRequired,\n        isMobile: PropTypes.bool.isRequired,\n        removeSelectedFromWishlist: PropTypes.func.isRequired,\n        loadingItemsMap: PropTypes.objectOf(Object).isRequired\n    };\n\n    state = {\n        selectedIdMap: []\n    };\n\n    actionLineMobileRef = createRef();\n\n    productsRef = createRef();\n\n    componentDidMount() {\n        this.setActionLineHeight();\n    }\n\n    componentDidUpdate(prevProps) {\n        const { isEditingActive: prevIsEditingActive, isMobile: prevIsMobile } = prevProps;\n        const { isEditingActive, isMobile } = this.props;\n        const { actionLineHeight: prevActionLineHeight } = this.state;\n        const { actionLineHeight } = this.state;\n\n        if ((prevIsEditingActive !== isEditingActive && prevActionLineHeight === actionLineHeight)\n            || isMobile !== prevIsMobile\n        ) {\n            this.setActionLineHeight();\n        }\n    }\n\n    setActionLineHeight() {\n        const { isMobile } = this.props;\n        const { current } = this.actionLineMobileRef;\n\n        if (!current) {\n            return;\n        }\n\n        CSS.setVariable(\n            this.productsRef,\n            'myaccount-wihslist-products-margin-bottom',\n            isMobile ? `${ current.clientHeight }px` : 0\n        );\n    }\n\n    handleSelectIdChange = (id, isRemoveOnly = false) => {\n        const { selectedIdMap: prevSelectedIdMap } = this.state;\n        const selectIdIndex = prevSelectedIdMap.findIndex((selectId) => selectId === id);\n        const selectedIdMap = Array.from(prevSelectedIdMap);\n\n        if (isRemoveOnly) {\n            if (selectIdIndex !== -1) {\n                selectedIdMap.splice(selectIdIndex, 1);\n\n                this.setState({ selectedIdMap });\n            }\n\n            return;\n        }\n\n        if (selectIdIndex === -1) {\n            selectedIdMap.push(id);\n        } else {\n            selectedIdMap.splice(selectIdIndex, 1);\n        }\n\n        this.setState({ selectedIdMap });\n    };\n\n    handleRemoveButtonClick = () => {\n        // Removes selected items from wishlist\n\n        const { removeSelectedFromWishlist } = this.props;\n        const { selectedIdMap } = this.state;\n\n        removeSelectedFromWishlist(selectedIdMap);\n\n        this.setState({ selectedIdMap: [] });\n    };\n\n    renderNoProductsFound = () => (\n        <div>\n            <p>{ __('Wishlist is empty!') }</p>\n        </div>\n    );\n\n    renderProduct = ([id, product]) => {\n        const { isEditingActive, loadingItemsMap } = this.props;\n\n        return (\n            <WishlistItem\n              key={ id }\n              product={ product }\n              isRemoving={ loadingItemsMap[id] }\n              isEditingActive={ isEditingActive }\n              handleSelectIdChange={ this.handleSelectIdChange }\n            />\n        );\n    };\n\n    renderProducts() {\n        const {\n            isWishlistLoading,\n            isWishlistEmpty,\n            wishlistItems\n        } = this.props;\n\n        if (isWishlistLoading && isWishlistEmpty) {\n            return this.renderPlaceholders();\n        }\n\n        return Object.entries(wishlistItems).map(this.renderProduct);\n    }\n\n    renderClearWishlist() {\n        const {\n            removeAll,\n            isActionsDisabled\n        } = this.props;\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { likeLink: true } }\n              mix={ { block: 'MyAccountMyWishlist', elem: 'ClearWishlistButton' } }\n              onClick={ removeAll }\n              disabled={ isActionsDisabled }\n            >\n                { __('Clear') }\n            </button>\n        );\n    }\n\n    renderAddAllToCart() {\n        const {\n            addAllToCart,\n            isActionsDisabled,\n            isEditingActive,\n            isMobile\n        } = this.props;\n\n        const isDisabled = (isMobile && isEditingActive) || isActionsDisabled;\n\n        return (\n            <button\n              block=\"Button\"\n              mix={ { block: 'MyAccountMyWishlist', elem: 'Button' } }\n              onClick={ addAllToCart }\n              disabled={ isDisabled }\n            >\n              { __('Add All to Cart') }\n            </button>\n        );\n    }\n\n    renderShareWishlistButton() {\n        const {\n            isWishlistLoading,\n            shareWishlist,\n            isWishlistEmpty\n        } = this.props;\n\n        const disabled = isWishlistLoading || isWishlistEmpty;\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { isHollow: true } }\n              mix={ { } }\n              onClick={ shareWishlist }\n              disabled={ disabled }\n            >\n                { __('Share') }\n            </button>\n        );\n    }\n\n    renderRemoveItemsButton() {\n        const { isActionsDisabled, isMobile } = this.props;\n        const { selectedIdMap } = this.state;\n\n        const isDisabled = isActionsDisabled || (isMobile && !selectedIdMap.length);\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { likeLink: true } }\n              mix={ { block: 'MyAccountMyWishlist', elem: 'ClearRemoveItemsButton' } }\n              onClick={ this.handleRemoveButtonClick }\n              disabled={ isDisabled }\n            >\n                { selectedIdMap.length === 1\n                    ? __('Remove item (%s)', 1)\n                    : __('Remove items (%s)', selectedIdMap.length) }\n            </button>\n        );\n    }\n\n    renderActionBarAction() {\n        const { isEditingActive } = this.props;\n\n        if (!isEditingActive) {\n            return null;\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"ActionBarActionWrapper\">\n                { this.renderRemoveItemsButton() }\n                { this.renderClearWishlist() }\n            </div>\n        );\n    }\n\n    renderActionBarMobile() {\n        return (\n            <div\n              ref={ this.actionLineMobileRef }\n              block=\"MyAccountMyWishlist\"\n              elem=\"ActionBar\"\n            >\n                { this.renderActionBarAction() }\n                { this.renderAddAllToCart() }\n            </div>\n        );\n    }\n\n    renderActionBar() {\n        const { isMobile } = this.props;\n\n        if (isMobile) {\n            return this.renderActionBarMobile();\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"ActionBar\">\n                { this.renderAddAllToCart() }\n                { this.renderShareWishlistButton() }\n                { this.renderClearWishlist() }\n            </div>\n        );\n    }\n\n    renderPlaceholders() {\n        return Array.from({ length: 2 }, (_, i) => <ProductCard key={ i } />);\n    }\n\n    renderShareWishlist() {\n        return <ShareWishlistPopup />;\n    }\n\n    renderContent() {\n        const {\n            isWishlistLoading,\n            isWishlistEmpty,\n            isLoading\n        } = this.props;\n\n        if (isWishlistEmpty && !isWishlistLoading) {\n            return this.renderNoProductsFound();\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"Products\" ref={ this.productsRef }>\n                <Loader isLoading={ isLoading } />\n                { this.renderProducts() }\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"MyAccountMyWishlist\">\n                { this.renderShareWishlist() }\n                { this.renderContent() }\n                { this.renderActionBar() }\n            </div>\n        );\n    }\n}\n\nexport default MyAccountMyWishlist;\n"]},"metadata":{},"sourceType":"module"}