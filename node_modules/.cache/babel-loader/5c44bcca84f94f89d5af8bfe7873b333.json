{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport BrowserDatabase from \"/home/arturs/scandiweb/extension/src/util/BrowserDatabase\";\nimport { UPDATE_CONFIG, UPDATE_CONFIG_DEVICE } from \"./Config.action\";\nexport const MAX_WIDTH = 150;\nexport const MAX_HEIGHT = 40;\nexport const DEFAULT_CATGORY_URL_SUFFIX = '.html';\n/** #namespace Store/Config/Reducer/filterStoreConfig */\n\nexport const filterStoreConfig = Mosaic.middleware(function (config) {\n  return Object.entries(config).reduce(function (acc, [key, value]) {\n    return value !== null ? { ...acc,\n      [key]: value\n    } : acc;\n  }, {});\n}, \"Store/Config/Reducer/filterStoreConfig\");\nexport const {\n  countries,\n  reviewRatings,\n  storeConfig,\n  currencyData,\n  cartDisplayConfig\n} = BrowserDatabase.getItem('config') || {\n  countries: [],\n  reviewRatings: [],\n  storeConfig: {},\n  currencyData: {},\n  cartDisplayConfig: {\n    display_tax_in_price: '',\n    display_tax_in_subtotal: '',\n    display_tax_in_shipping_amount: '',\n    include_tax_in_order_total: false,\n    display_full_tax_summary: false,\n    display_zero_tax_subtotal: false\n  }\n};\n/** #namespace Store/Config/Reducer/getIndexedRatings */\n\nexport const getIndexedRatings = Mosaic.middleware(function (reviewRatings) {\n  return reviewRatings ? reviewRatings.items || [] : [];\n}, \"Store/Config/Reducer/getIndexedRatings\");\n/** #namespace Store/Config/Reducer/getCurrencyData */\n\nexport const getCurrencyData = Mosaic.middleware(function (base, state) {\n  return base || state.currencyData || {};\n}, \"Store/Config/Reducer/getCurrencyData\");\n/** #namespace Store/Config/Reducer/getCountryData */\n\nexport const getCountryData = Mosaic.middleware(function (base, state) {\n  return base || state.countries || {};\n}, \"Store/Config/Reducer/getCountryData\");\n/** #namespace Store/Config/Reducer/getCheckoutAgreementData */\n\nexport const getCheckoutAgreementData = Mosaic.middleware(function (base, state) {\n  return base || state.checkoutAgreements || {};\n}, \"Store/Config/Reducer/getCheckoutAgreementData\");\n/** #namespace Store/Config/Reducer/getInitialState */\n\nexport const getInitialState = Mosaic.middleware(function () {\n  return { ...filterStoreConfig(storeConfig),\n    countries,\n    reviewRatings,\n    checkoutAgreements: [],\n    currencyData,\n    isLoading: true,\n    cartDisplayConfig,\n    priceTaxDisplay: {},\n    category_url_suffix: DEFAULT_CATGORY_URL_SUFFIX,\n    newsletter_general_active: false,\n    device: {\n      isMobile: true,\n      android: true,\n      ios: false,\n      blackberry: false,\n      opera: false,\n      windows: false,\n      standaloneMode: window.matchMedia('(display-mode: standalone)').matches\n    }\n  };\n}, \"Store/Config/Reducer/getInitialState\");\n/** #namespace Store/Config/Reducer */\n\nexport const ConfigReducer = Mosaic.middleware(_c = function (state = getInitialState(), action) {\n  const {\n    type,\n    config: {\n      countries,\n      reviewRatings,\n      checkoutAgreements,\n      currencyData,\n      storeConfig = {},\n      cartDisplayConfig = {}\n    } = {},\n    device\n  } = action;\n\n  switch (type) {\n    case UPDATE_CONFIG:\n      const filteredStoreConfig = filterStoreConfig(storeConfig);\n      const {\n        secure_base_media_url\n      } = filteredStoreConfig;\n      window.secure_base_media_url = secure_base_media_url;\n      return { ...state,\n        countries: getCountryData(countries, state),\n        reviewRatings: getIndexedRatings(reviewRatings),\n        checkoutAgreements: getCheckoutAgreementData(checkoutAgreements, state),\n        currencyData: getCurrencyData(currencyData, state),\n        ...filteredStoreConfig,\n        // Should be updated manually as filteredStoreConfig does not contain header_logo_src when it is null\n        // and header_logo_src takes old value\n        isLoading: false,\n        cartDisplayConfig\n      };\n\n    case UPDATE_CONFIG_DEVICE:\n      return { ...state,\n        device: { ...state.device,\n          ...device\n        }\n      };\n\n    default:\n      return state;\n  }\n}, \"Store/Config/Reducer\");\n_c2 = ConfigReducer;\nexport default ConfigReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ConfigReducer$\");\n$RefreshReg$(_c2, \"ConfigReducer\");","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/store/Config/Config.reducer.js"],"names":["BrowserDatabase","UPDATE_CONFIG","UPDATE_CONFIG_DEVICE","MAX_WIDTH","MAX_HEIGHT","DEFAULT_CATGORY_URL_SUFFIX","filterStoreConfig","config","Object","entries","reduce","acc","key","value","countries","reviewRatings","storeConfig","currencyData","cartDisplayConfig","getItem","display_tax_in_price","display_tax_in_subtotal","display_tax_in_shipping_amount","include_tax_in_order_total","display_full_tax_summary","display_zero_tax_subtotal","getIndexedRatings","items","getCurrencyData","base","state","getCountryData","getCheckoutAgreementData","checkoutAgreements","getInitialState","isLoading","priceTaxDisplay","category_url_suffix","newsletter_general_active","device","isMobile","android","ios","blackberry","opera","windows","standaloneMode","window","matchMedia","matches","ConfigReducer","action","type","filteredStoreConfig","secure_base_media_url"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\n\nimport { UPDATE_CONFIG, UPDATE_CONFIG_DEVICE } from './Config.action';\n\nexport const MAX_WIDTH = 150;\nexport const MAX_HEIGHT = 40;\nexport const DEFAULT_CATGORY_URL_SUFFIX = '.html';\n\n/** @namespace Store/Config/Reducer/filterStoreConfig */\nexport const filterStoreConfig = (config) => Object.entries(config).reduce(\n    (acc, [key, value]) => (value !== null ? { ...acc, [key]: value } : acc),\n    {}\n);\n\nexport const {\n    countries, reviewRatings, storeConfig, currencyData, cartDisplayConfig\n} = BrowserDatabase.getItem('config') || {\n    countries: [],\n    reviewRatings: [],\n    storeConfig: {},\n    currencyData: {},\n    cartDisplayConfig: {\n        display_tax_in_price: '',\n        display_tax_in_subtotal: '',\n        display_tax_in_shipping_amount: '',\n        include_tax_in_order_total: false,\n        display_full_tax_summary: false,\n        display_zero_tax_subtotal: false\n    }\n};\n\n/** @namespace Store/Config/Reducer/getIndexedRatings */\nexport const getIndexedRatings = (reviewRatings) => ((reviewRatings) ? reviewRatings.items || [] : []);\n\n/** @namespace Store/Config/Reducer/getCurrencyData */\nexport const getCurrencyData = (base, state) => (base || state.currencyData || {});\n\n/** @namespace Store/Config/Reducer/getCountryData */\nexport const getCountryData = (base, state) => (base || state.countries || {});\n\n/** @namespace Store/Config/Reducer/getCheckoutAgreementData */\nexport const getCheckoutAgreementData = (base, state) => (base || state.checkoutAgreements || {});\n\n/** @namespace Store/Config/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    ...filterStoreConfig(storeConfig),\n    countries,\n    reviewRatings,\n    checkoutAgreements: [],\n    currencyData,\n    isLoading: true,\n    cartDisplayConfig,\n    priceTaxDisplay: {},\n    category_url_suffix: DEFAULT_CATGORY_URL_SUFFIX,\n    newsletter_general_active: false,\n    device: {\n        isMobile: true,\n        android: true,\n        ios: false,\n        blackberry: false,\n        opera: false,\n        windows: false,\n        standaloneMode: window.matchMedia('(display-mode: standalone)').matches\n    }\n});\n\n/** @namespace Store/Config/Reducer */\nexport const ConfigReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const {\n        type,\n        config: {\n            countries,\n            reviewRatings,\n            checkoutAgreements,\n            currencyData,\n            storeConfig = {},\n            cartDisplayConfig = {}\n        } = {},\n        device\n    } = action;\n\n    switch (type) {\n    case UPDATE_CONFIG:\n        const filteredStoreConfig = filterStoreConfig(storeConfig);\n        const { secure_base_media_url } = filteredStoreConfig;\n        window.secure_base_media_url = secure_base_media_url;\n\n        return {\n            ...state,\n            countries: getCountryData(countries, state),\n            reviewRatings: getIndexedRatings(reviewRatings),\n            checkoutAgreements: getCheckoutAgreementData(checkoutAgreements, state),\n            currencyData: getCurrencyData(currencyData, state),\n            ...filteredStoreConfig,\n            // Should be updated manually as filteredStoreConfig does not contain header_logo_src when it is null\n            // and header_logo_src takes old value\n            isLoading: false,\n            cartDisplayConfig\n        };\n\n    case UPDATE_CONFIG_DEVICE:\n        return {\n            ...state,\n            device: {\n                ...state.device,\n                ...device\n            }\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default ConfigReducer;\n"]},"metadata":{},"sourceType":"module"}