{"ast":null,"code":"var _class,\n    _temp,\n    _jsxFileName = \"/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductGallery/ProductGallery.container.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Subscribe } from 'unstated';\nimport ImageZoomPopup from \"/home/arturs/scandiweb/scandipwa/src/component/ImageZoomPopup\";\nimport SharedTransitionContainer from \"/home/arturs/scandiweb/scandipwa/src/component/SharedTransition/SharedTransition.unstated\";\nimport { ProductType } from \"/home/arturs/scandiweb/scandipwa/src/type/ProductList\";\nimport ProductGallery from \"./ProductGallery.component\";\nimport { AMOUNT_OF_PLACEHOLDERS, IMAGE_TYPE, PRODUCT_GALERY_POPUP_ID, THUMBNAIL_KEY } from \"./ProductGallery.config\";\n/** #namespace Component/ProductGallery/Container/mapStateToProps */\n\nexport const mapStateToProps = Mosaic.middleware(function (state) {\n  return {\n    isMobile: state.ConfigReducer.device.isMobile\n  };\n}, \"Component/ProductGallery/Container/mapStateToProps\");\n/** #namespace Component/ProductGallery/Container/mapDispatchToProps */\n// eslint-disable-next-line no-unused-vars\n\nexport const mapDispatchToProps = Mosaic.middleware(function (dispatch) {\n  return {};\n}, \"Component/ProductGallery/Container/mapDispatchToProps\");\n/** #namespace Component/ProductGallery/Container */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport const ProductGalleryContainer = Mosaic.middleware((_temp = _class = class ProductGalleryContainer_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.sliderRef = /*#__PURE__*/createRef();\n    this.containerFunctions = {\n      onActiveImageChange: this.onActiveImageChange.bind(this),\n      handleZoomChange: this.handleZoomChange.bind(this),\n      disableZoom: this.disableZoom.bind(this),\n      handleImageZoomPopupActiveChange: this.handleImageZoomPopupActiveChange.bind(this)\n    };\n\n    this.containerProps = function () {\n      const {\n        activeImage,\n        isZoomEnabled,\n        isImageZoomPopupActive\n      } = _this.state;\n      const {\n        product: {\n          id\n        },\n        isMobile\n      } = _this.props;\n      return {\n        gallery: _this.getGalleryPictures(),\n        productName: _this._getProductName(),\n        activeImage,\n        isZoomEnabled,\n        productId: id,\n        isMobile,\n        isImageZoomPopupActive,\n        sliderRef: _this.sliderRef\n      };\n    };\n\n    this.handleImageZoomPopupClose = function () {\n      _this.handleImageZoomPopupActiveChange(false);\n    };\n  }\n\n  __construct(props) {\n    super.__construct(props);\n\n    const {\n      product: {\n        id\n      }\n    } = props;\n    this.state = {\n      activeImage: 0,\n      isZoomEnabled: false,\n      prevProdId: id,\n      isImageZoomPopupActive: false\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      product: {\n        id\n      }\n    } = props;\n    const {\n      prevProdId\n    } = state;\n\n    if (prevProdId === id) {\n      return null;\n    }\n\n    return {\n      prevProdId: id,\n      activeImage: 0\n    };\n  }\n\n  handleImageZoomPopupActiveChange(isImageZoomPopupActive) {\n    const {\n      isMobile\n    } = this.props;\n\n    if (isMobile) {\n      return;\n    }\n\n    this.setState({\n      isImageZoomPopupActive\n    });\n  }\n\n  onActiveImageChange(activeImage) {\n    this.setState({\n      activeImage,\n      isZoomEnabled: false\n    });\n  }\n\n  getGalleryPictures() {\n    const {\n      areDetailsLoaded,\n      product: {\n        media_gallery_entries: mediaGallery = [],\n        [THUMBNAIL_KEY]: {\n          url: thumbnailUrl\n        } = {},\n        [IMAGE_TYPE]: {\n          url: imageTypeUrl\n        } = {},\n        name\n      }\n    } = this.props;\n    const url = imageTypeUrl || thumbnailUrl;\n\n    if (mediaGallery.length) {\n      return mediaGallery.filter(function ({\n        disabled\n      }) {\n        return !disabled;\n      }).sort(function (a, b) {\n        const aThumbnail = a.types.includes(THUMBNAIL_KEY);\n        const bThumbnail = b.types.includes(THUMBNAIL_KEY);\n        const sortResult = a.position - b.position;\n\n        if (aThumbnail && bThumbnail) {\n          return sortResult;\n        }\n\n        if (aThumbnail) {\n          return -1;\n        }\n\n        if (bThumbnail) {\n          return 1;\n        }\n\n        return sortResult;\n      });\n    }\n\n    if (!url) {\n      return Array(AMOUNT_OF_PLACEHOLDERS + 1).fill({\n        media_type: 'placeholder'\n      });\n    }\n\n    const placeholders = !areDetailsLoaded ? Array(AMOUNT_OF_PLACEHOLDERS).fill({\n      media_type: 'placeholder'\n    }) : [];\n    return [{\n      thumbnail: {\n        url\n      },\n      base: {\n        url\n      },\n      id: THUMBNAIL_KEY,\n      label: name,\n      media_type: IMAGE_TYPE\n    }, ...placeholders];\n  }\n\n  /**\n   * Returns the name of the product this gallery if for\n   * @private\n   */\n  _getProductName() {\n    const {\n      product: {\n        name\n      }\n    } = this.props;\n    return name;\n  }\n\n  disableZoom() {\n    document.documentElement.classList.remove('overscrollPrevented');\n    this.setState({\n      isZoomEnabled: false\n    });\n  }\n\n  handleZoomChange(args) {\n    const {\n      isZoomEnabled\n    } = this.state;\n\n    if (args.scale !== 1) {\n      if (isZoomEnabled) {\n        return;\n      }\n\n      document.documentElement.classList.add('overscrollPrevented');\n      this.setState({\n        isZoomEnabled: true\n      });\n    }\n  }\n\n  render() {\n    var _this2 = this;\n\n    const {\n      isImageZoomPopupActive,\n      activeImage\n    } = this.state;\n    return /*#__PURE__*/_checkBEM(React, ImageZoomPopup, {\n      isActive: isImageZoomPopupActive,\n      onClose: this.handleImageZoomPopupClose,\n      activeImageId: activeImage,\n      popupId: PRODUCT_GALERY_POPUP_ID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, Subscribe, {\n      to: [SharedTransitionContainer],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, function ({\n      registerSharedElementDestination\n    }) {\n      return /*#__PURE__*/_checkBEM(React, ProductGallery, Object.assign({\n        registerSharedElementDestination: registerSharedElementDestination\n      }, _this2.containerProps(), _this2.containerFunctions, {\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }\n\n}, _class.propTypes = {\n  product: ProductType.isRequired,\n  areDetailsLoaded: PropTypes.bool,\n  isMobile: PropTypes.bool.isRequired\n}, _class.defaultProps = {\n  areDetailsLoaded: false\n}, _temp), \"Component/ProductGallery/Container\");\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductGalleryContainer);","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductGallery/ProductGallery.container.js"],"names":["PropTypes","createRef","PureComponent","connect","Subscribe","ImageZoomPopup","SharedTransitionContainer","ProductType","ProductGallery","AMOUNT_OF_PLACEHOLDERS","IMAGE_TYPE","PRODUCT_GALERY_POPUP_ID","THUMBNAIL_KEY","mapStateToProps","state","isMobile","ConfigReducer","device","mapDispatchToProps","dispatch","sliderRef","containerFunctions","onActiveImageChange","bind","handleZoomChange","disableZoom","handleImageZoomPopupActiveChange","containerProps","activeImage","isZoomEnabled","isImageZoomPopupActive","product","id","props","gallery","getGalleryPictures","productName","_getProductName","productId","handleImageZoomPopupClose","__construct","prevProdId","getDerivedStateFromProps","setState","areDetailsLoaded","media_gallery_entries","mediaGallery","url","thumbnailUrl","imageTypeUrl","name","length","filter","disabled","sort","a","b","aThumbnail","types","includes","bThumbnail","sortResult","position","Array","fill","media_type","placeholders","thumbnail","base","label","document","documentElement","classList","remove","args","scale","add","render","registerSharedElementDestination","propTypes","isRequired","bool","defaultProps","ProductGalleryContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Subscribe } from 'unstated';\n\nimport ImageZoomPopup from 'Component/ImageZoomPopup';\nimport SharedTransitionContainer from 'Component/SharedTransition/SharedTransition.unstated';\nimport { ProductType } from 'Type/ProductList';\n\nimport ProductGallery from './ProductGallery.component';\nimport {\n    AMOUNT_OF_PLACEHOLDERS,\n    IMAGE_TYPE,\n    PRODUCT_GALERY_POPUP_ID,\n    THUMBNAIL_KEY\n} from './ProductGallery.config';\n\n/** @namespace Component/ProductGallery/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/ProductGallery/Container/mapDispatchToProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapDispatchToProps = (dispatch) => ({});\n\n/** @namespace Component/ProductGallery/Container */\nexport class ProductGalleryContainer extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool,\n        isMobile: PropTypes.bool.isRequired\n    };\n\n    static defaultProps = {\n        areDetailsLoaded: false\n    };\n\n    sliderRef = createRef();\n\n    containerFunctions = {\n        onActiveImageChange: this.onActiveImageChange.bind(this),\n        handleZoomChange: this.handleZoomChange.bind(this),\n        disableZoom: this.disableZoom.bind(this),\n        handleImageZoomPopupActiveChange: this.handleImageZoomPopupActiveChange.bind(this)\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { product: { id } } = props;\n\n        this.state = {\n            activeImage: 0,\n            isZoomEnabled: false,\n            prevProdId: id,\n            isImageZoomPopupActive: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { product: { id } } = props;\n        const { prevProdId } = state;\n        if (prevProdId === id) {\n            return null;\n        }\n\n        return { prevProdId: id, activeImage: 0 };\n    }\n\n    handleImageZoomPopupActiveChange(isImageZoomPopupActive) {\n        const { isMobile } = this.props;\n\n        if (isMobile) {\n            return;\n        }\n\n        this.setState({ isImageZoomPopupActive });\n    }\n\n    onActiveImageChange(activeImage) {\n        this.setState({\n            activeImage,\n            isZoomEnabled: false\n        });\n    }\n\n    getGalleryPictures() {\n        const {\n            areDetailsLoaded,\n            product: {\n                media_gallery_entries: mediaGallery = [],\n                [THUMBNAIL_KEY]: { url: thumbnailUrl } = {},\n                [IMAGE_TYPE]: { url: imageTypeUrl } = {},\n                name\n            }\n        } = this.props;\n\n        const url = imageTypeUrl || thumbnailUrl;\n\n        if (mediaGallery.length) {\n            return mediaGallery\n                .filter(({ disabled }) => !disabled)\n                .sort((a, b) => {\n                    const aThumbnail = a.types.includes(THUMBNAIL_KEY);\n                    const bThumbnail = b.types.includes(THUMBNAIL_KEY);\n                    const sortResult = a.position - b.position;\n\n                    if (aThumbnail && bThumbnail) {\n                        return sortResult;\n                    }\n\n                    if (aThumbnail) {\n                        return -1;\n                    }\n\n                    if (bThumbnail) {\n                        return 1;\n                    }\n\n                    return sortResult;\n                });\n        }\n\n        if (!url) {\n            return Array(AMOUNT_OF_PLACEHOLDERS + 1).fill({ media_type: 'placeholder' });\n        }\n\n        const placeholders = !areDetailsLoaded\n            ? Array(AMOUNT_OF_PLACEHOLDERS).fill({ media_type: 'placeholder' }) : [];\n\n        return [\n            {\n                thumbnail: { url },\n                base: { url },\n                id: THUMBNAIL_KEY,\n                label: name,\n                media_type: IMAGE_TYPE\n            },\n            ...placeholders\n        ];\n    }\n\n    containerProps = () => {\n        const { activeImage, isZoomEnabled, isImageZoomPopupActive } = this.state;\n        const { product: { id }, isMobile } = this.props;\n\n        return {\n            gallery: this.getGalleryPictures(),\n            productName: this._getProductName(),\n            activeImage,\n            isZoomEnabled,\n            productId: id,\n            isMobile,\n            isImageZoomPopupActive,\n            sliderRef: this.sliderRef\n        };\n    };\n\n    /**\n     * Returns the name of the product this gallery if for\n     * @private\n     */\n    _getProductName() {\n        const { product: { name } } = this.props;\n        return name;\n    }\n\n    disableZoom() {\n        document.documentElement.classList.remove('overscrollPrevented');\n        this.setState({ isZoomEnabled: false });\n    }\n\n    handleZoomChange(args) {\n        const { isZoomEnabled } = this.state;\n\n        if (args.scale !== 1) {\n            if (isZoomEnabled) {\n                return;\n            }\n            document.documentElement.classList.add('overscrollPrevented');\n            this.setState({ isZoomEnabled: true });\n        }\n    }\n\n    handleImageZoomPopupClose = () => {\n        this.handleImageZoomPopupActiveChange(false);\n    };\n\n    render() {\n        const { isImageZoomPopupActive, activeImage } = this.state;\n\n        return (\n            <ImageZoomPopup\n              isActive={ isImageZoomPopupActive }\n              onClose={ this.handleImageZoomPopupClose }\n              activeImageId={ activeImage }\n              popupId={ PRODUCT_GALERY_POPUP_ID }\n            >\n                <Subscribe to={ [SharedTransitionContainer] }>\n                    { ({ registerSharedElementDestination }) => (\n                        <ProductGallery\n                          registerSharedElementDestination={ registerSharedElementDestination }\n                          { ...this.containerProps() }\n                          { ...this.containerFunctions }\n                        />\n                    ) }\n                </Subscribe>\n            </ImageZoomPopup>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductGalleryContainer);\n"]},"metadata":{},"sourceType":"module"}