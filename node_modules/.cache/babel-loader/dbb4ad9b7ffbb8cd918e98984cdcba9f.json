{"ast":null,"code":"var _class, _temp;\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { Children, cloneElement, createRef, PureComponent } from 'react';\nimport { ChildrenType } from \"/home/arturs/scandiweb/extension/src/type/Common\";\n/** #namespace Component/ClickOutside/Component */\n\nexport const ClickOutside = Mosaic.middleware((_temp = _class = class ClickOutside_ extends Mosaic.Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    this.handleClick = function ({\n      target\n    }) {\n      const {\n        onClick\n      } = _this.props;\n\n      if (_this.childrenRefs.every(function (ref) {\n        var _ref$current, _ref$current$overlayR;\n\n        const elementRef = ((_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : (_ref$current$overlayR = _ref$current.overlayRef) === null || _ref$current$overlayR === void 0 ? void 0 : _ref$current$overlayR.current) || ref.current;\n        return !elementRef.contains(target);\n      })) {\n        onClick();\n      }\n    };\n  }\n\n  __construct(props) {\n    super.__construct(props);\n\n    const {\n      children\n    } = this.props;\n    this.childrenRefs = Children.map(children, function () {\n      return /*#__PURE__*/createRef();\n    });\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.handleClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleClick);\n  }\n\n  render() {\n    var _this2 = this;\n\n    const {\n      children\n    } = this.props;\n    return Children.map(children, function (element, idx) {\n      return /*#__PURE__*/cloneElement(element, {\n        ref: _this2.childrenRefs[idx]\n      });\n    });\n  }\n\n}, _class.propTypes = {\n  onClick: PropTypes.func,\n  children: ChildrenType\n}, _class.defaultProps = {\n  onClick: function () {},\n  children: []\n}, _temp), \"Component/ClickOutside/Component\");\nexport default ClickOutside;","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/component/ClickOutside/ClickOutside.component.js"],"names":["PropTypes","Children","cloneElement","createRef","PureComponent","ChildrenType","handleClick","target","onClick","props","childrenRefs","every","ref","elementRef","current","overlayRef","contains","__construct","children","map","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","element","idx","propTypes","func","defaultProps","ClickOutside"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SACIC,QADJ,EAEIC,YAFJ,EAGIC,SAHJ,EAIIC,aAJJ,QAKO,OALP;AAOA,SAASC,YAAT;AAEA;;AACA,8GAAkCD,aAAlC,EAAgD;AAAA;AAAA;;AAAA;AAAA;;AAAA,SA8B5CE,WA9B4C,GA8B9B,UAAC;AAAEC,MAAAA;AAAF,KAAD,EAAgB;AAC1B,YAAM;AAAEC,QAAAA;AAAF,UAAc,KAAI,CAACC,KAAzB;;AAEA,UAAI,KAAI,CAACC,YAAL,CAAkBC,KAAlB,CACA,UAACC,GAAD,EAAS;AAAA;;AACL,cAAMC,UAAU,GAAG,iBAAAD,GAAG,CAACE,OAAJ,uFAAaC,UAAb,gFAAyBD,OAAzB,KAAoCF,GAAG,CAACE,OAA3D;AACA,eAAO,CAACD,UAAU,CAACG,QAAX,CAAoBT,MAApB,CAAR;AACH,OAJD,CAAJ,EAKG;AACCC,QAAAA,OAAO;AACV;AACJ,KAzC2C;AAAA;;AAW5CS,EAAAA,WAAW,CAACR,KAAD,EAAQ;AACf,UAAMQ,WAAN,CAAkBR,KAAlB;;AAEA,UAAM;AAAES,MAAAA;AAAF,QAAe,KAAKT,KAA1B;AAEA,SAAKC,YAAL,GAAoBT,QAAQ,CAACkB,GAAT,CAChBD,QADgB,EAEhB;AAAA,0BAAMf,SAAS,EAAf;AAAA,KAFgB,CAApB;AAIH;;AAEDiB,EAAAA,iBAAiB,GAAG;AAChBC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKhB,WAAxC;AACH;;AAEDiB,EAAAA,oBAAoB,GAAG;AACnBF,IAAAA,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,EAAsC,KAAKlB,WAA3C;AACH;;AAeDmB,EAAAA,MAAM,GAAG;AAAA;;AACL,UAAM;AAAEP,MAAAA;AAAF,QAAe,KAAKT,KAA1B;AAEA,WAAOR,QAAQ,CAACkB,GAAT,CAAaD,QAAb,EAAuB,UAACQ,OAAD,EAAUC,GAAV;AAAA,0BAC1BzB,YAAY,CAACwB,OAAD,EAAU;AAAEd,QAAAA,GAAG,EAAE,MAAI,CAACF,YAAL,CAAkBiB,GAAlB;AAAP,OAAV,CADc;AAAA,KAAvB,CAAP;AAGH;;AAjD2C,CAAhD,SACWC,SADX,GACuB;AACfpB,EAAAA,OAAO,EAAER,SAAS,CAAC6B,IADJ;AAEfX,EAAAA,QAAQ,EAAEb;AAFK,CADvB,SAMWyB,YANX,GAM0B;AAClBtB,EAAAA,OAAO,EAAE,YAAM,CAAE,CADC;AAElBU,EAAAA,QAAQ,EAAE;AAFQ,CAN1B;AAoDA,eAAea,YAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport {\n    Children,\n    cloneElement,\n    createRef,\n    PureComponent\n} from 'react';\n\nimport { ChildrenType } from 'Type/Common';\n\n/** @namespace Component/ClickOutside/Component */\nexport class ClickOutside extends PureComponent {\n    static propTypes = {\n        onClick: PropTypes.func,\n        children: ChildrenType\n    };\n\n    static defaultProps = {\n        onClick: () => {},\n        children: []\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { children } = this.props;\n\n        this.childrenRefs = Children.map(\n            children,\n            () => createRef()\n        );\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.handleClick);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClick);\n    }\n\n    handleClick = ({ target }) => {\n        const { onClick } = this.props;\n\n        if (this.childrenRefs.every(\n            (ref) => {\n                const elementRef = ref.current?.overlayRef?.current || ref.current;\n                return !elementRef.contains(target);\n            }\n        )) {\n            onClick();\n        }\n    };\n\n    render() {\n        const { children } = this.props;\n\n        return Children.map(children, (element, idx) => (\n            cloneElement(element, { ref: this.childrenRefs[idx] })\n        ));\n    }\n}\n\nexport default ClickOutside;\n"]},"metadata":{},"sourceType":"module"}