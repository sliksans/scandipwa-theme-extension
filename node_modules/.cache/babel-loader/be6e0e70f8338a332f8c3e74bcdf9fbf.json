{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport BrowserDatabase from \"/home/arturs/scandiweb/scandipwa/src/util/BrowserDatabase\";\nimport { UPDATE_LINKED_PRODUCTS } from \"./LinkedProducts.action\";\nimport { LINKED_PRODUCTS } from \"./LinkedProducts.dispatcher\";\nexport const UPSELL = 'upsell';\nexport const RELATED = 'related';\nexport const CROSS_SELL = 'crosssell';\n/** #namespace Store/LinkedProducts/Reducer/getInitialState */\n\nexport const getInitialState = Mosaic.middleware(function () {\n  return {\n    linkedProducts: BrowserDatabase.getItem(LINKED_PRODUCTS) || {\n      upsell: {},\n      related: {},\n      crosssell: {}\n    }\n  };\n}, \"Store/LinkedProducts/Reducer/getInitialState\");\n/** #namespace Store/LinkedProducts/Reducer */\n\nexport const LinkedProductsReducer = Mosaic.middleware(_c = function (state = getInitialState(), action) {\n  const {\n    type\n  } = action;\n\n  if (type !== UPDATE_LINKED_PRODUCTS) {\n    return state;\n  }\n\n  const {\n    linkedProducts: {\n      [UPSELL]: upsell,\n      [RELATED]: related,\n      [CROSS_SELL]: crosssell,\n      updateCrossSell = false\n    }\n  } = action;\n  const {\n    linkedProducts: {\n      [CROSS_SELL]: prevCrossSell\n    }\n  } = state;\n\n  if (updateCrossSell) {\n    return { ...state,\n      linkedProducts: {\n        [UPSELL]: upsell,\n        [RELATED]: related,\n        [CROSS_SELL]: crosssell\n      }\n    };\n  }\n\n  return { ...state,\n    linkedProducts: {\n      [UPSELL]: upsell,\n      [RELATED]: related,\n      [CROSS_SELL]: { ...prevCrossSell,\n        ...related,\n        items: Object.values({ ...prevCrossSell.items,\n          ...crosssell.items\n        })\n      }\n    }\n  };\n}, \"Store/LinkedProducts/Reducer\");\n_c2 = LinkedProductsReducer;\nexport default LinkedProductsReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LinkedProductsReducer$\");\n$RefreshReg$(_c2, \"LinkedProductsReducer\");","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/store/LinkedProducts/LinkedProducts.reducer.js"],"names":["BrowserDatabase","UPDATE_LINKED_PRODUCTS","LINKED_PRODUCTS","UPSELL","RELATED","CROSS_SELL","getInitialState","linkedProducts","getItem","upsell","related","crosssell","LinkedProductsReducer","state","action","type","updateCrossSell","prevCrossSell","items","Object","values"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,eAAP;AAEA,SAASC,sBAAT;AACA,SAASC,eAAT;AAEA,OAAO,MAAMC,MAAM,GAAG,QAAf;AACP,OAAO,MAAMC,OAAO,GAAG,SAAhB;AACP,OAAO,MAAMC,UAAU,GAAG,WAAnB;AAEP;;AACA,OAAO,MAAMC,eAAe,qBAAG;AAAA,SAAO;AAClCC,IAAAA,cAAc,EAAEP,eAAe,CAACQ,OAAhB,CAAwBN,eAAxB,KAA4C;AACxDO,MAAAA,MAAM,EAAE,EADgD;AAExDC,MAAAA,OAAO,EAAE,EAF+C;AAGxDC,MAAAA,SAAS,EAAE;AAH6C;AAD1B,GAAP;AAAA,CAAH,iDAArB;AAQP;;AACA,OAAO,MAAMC,qBAAqB,0BAAG,UACjCC,KAAK,GAAGP,eAAe,EADU,EAEjCQ,MAFiC,EAGhC;AACD,QAAM;AAAEC,IAAAA;AAAF,MAAWD,MAAjB;;AAEA,MAAIC,IAAI,KAAKd,sBAAb,EAAqC;AACjC,WAAOY,KAAP;AACH;;AAED,QAAM;AACFN,IAAAA,cAAc,EAAE;AACZ,OAACJ,MAAD,GAAUM,MADE;AAEZ,OAACL,OAAD,GAAWM,OAFC;AAGZ,OAACL,UAAD,GAAcM,SAHF;AAIZK,MAAAA,eAAe,GAAG;AAJN;AADd,MAOFF,MAPJ;AASA,QAAM;AACFP,IAAAA,cAAc,EAAE;AACZ,OAACF,UAAD,GAAcY;AADF;AADd,MAIFJ,KAJJ;;AAMA,MAAIG,eAAJ,EAAqB;AACjB,WAAO,EACH,GAAGH,KADA;AAEHN,MAAAA,cAAc,EAAE;AACZ,SAACJ,MAAD,GAAUM,MADE;AAEZ,SAACL,OAAD,GAAWM,OAFC;AAGZ,SAACL,UAAD,GAAcM;AAHF;AAFb,KAAP;AAQH;;AAED,SAAO,EACH,GAAGE,KADA;AAEHN,IAAAA,cAAc,EAAE;AACZ,OAACJ,MAAD,GAAUM,MADE;AAEZ,OAACL,OAAD,GAAWM,OAFC;AAGZ,OAACL,UAAD,GAAc,EACV,GAAGY,aADO;AAEV,WAAGP,OAFO;AAGVQ,QAAAA,KAAK,EAAEC,MAAM,CAACC,MAAP,CAAc,EACjB,GAAGH,aAAa,CAACC,KADA;AAEjB,aAAGP,SAAS,CAACO;AAFI,SAAd;AAHG;AAHF;AAFb,GAAP;AAeH,CAnDiC,iCAA3B;MAAMN,qB;AAqDb,eAAeA,qBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\n\nimport { UPDATE_LINKED_PRODUCTS } from './LinkedProducts.action';\nimport { LINKED_PRODUCTS } from './LinkedProducts.dispatcher';\n\nexport const UPSELL = 'upsell';\nexport const RELATED = 'related';\nexport const CROSS_SELL = 'crosssell';\n\n/** @namespace Store/LinkedProducts/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    linkedProducts: BrowserDatabase.getItem(LINKED_PRODUCTS) || {\n        upsell: {},\n        related: {},\n        crosssell: {}\n    }\n});\n\n/** @namespace Store/LinkedProducts/Reducer */\nexport const LinkedProductsReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type } = action;\n\n    if (type !== UPDATE_LINKED_PRODUCTS) {\n        return state;\n    }\n\n    const {\n        linkedProducts: {\n            [UPSELL]: upsell,\n            [RELATED]: related,\n            [CROSS_SELL]: crosssell,\n            updateCrossSell = false\n        }\n    } = action;\n\n    const {\n        linkedProducts: {\n            [CROSS_SELL]: prevCrossSell\n        }\n    } = state;\n\n    if (updateCrossSell) {\n        return {\n            ...state,\n            linkedProducts: {\n                [UPSELL]: upsell,\n                [RELATED]: related,\n                [CROSS_SELL]: crosssell\n            }\n        };\n    }\n\n    return {\n        ...state,\n        linkedProducts: {\n            [UPSELL]: upsell,\n            [RELATED]: related,\n            [CROSS_SELL]: {\n                ...prevCrossSell,\n                ...related,\n                items: Object.values({\n                    ...prevCrossSell.items,\n                    ...crosssell.items\n                })\n            }\n        }\n    };\n};\n\nexport default LinkedProductsReducer;\n"]},"metadata":{},"sourceType":"module"}