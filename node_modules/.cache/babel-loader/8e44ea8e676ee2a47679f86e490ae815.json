{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { isSignedIn } from \"/home/arturs/scandiweb/extension/src/util/Auth\";\nimport BrowserDatabase from \"/home/arturs/scandiweb/extension/src/util/BrowserDatabase\";\nexport const GUEST_QUOTE_ID = 'guest_quote_id';\n/** #namespace Util/Token/setGuestQuoteId */\n\nexport const setGuestQuoteId = Mosaic.middleware(function (token) {\n  BrowserDatabase.setItem({\n    token,\n    isCustomerToken: isSignedIn()\n  }, GUEST_QUOTE_ID);\n}, \"Util/Token/setGuestQuoteId\");\n/** #namespace Util/Token/getGuestQuoteId */\n\nexport const getGuestQuoteId = Mosaic.middleware(function () {\n  const {\n    token,\n    isCustomerToken\n  } = BrowserDatabase.getItem(GUEST_QUOTE_ID) || {};\n\n  if (isCustomerToken && !isSignedIn()) {\n    return null;\n  }\n\n  return token;\n}, \"Util/Token/getGuestQuoteId\");\n/** #namespace Util/Token/deleteGuestQuoteId */\n\nexport const deleteGuestQuoteId = Mosaic.middleware(function () {\n  return BrowserDatabase.deleteItem(GUEST_QUOTE_ID);\n}, \"Util/Token/deleteGuestQuoteId\");","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/util/Cart/Token.js"],"names":["isSignedIn","BrowserDatabase","GUEST_QUOTE_ID","setGuestQuoteId","token","setItem","isCustomerToken","getGuestQuoteId","getItem","deleteGuestQuoteId","deleteItem"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,UAAT;AACA,OAAOC,eAAP;AAEA,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AAEP;;AACA,OAAO,MAAMC,eAAe,qBAAG,UAACC,KAAD,EAAW;AACtCH,EAAAA,eAAe,CAACI,OAAhB,CAAwB;AACpBD,IAAAA,KADoB;AAEpBE,IAAAA,eAAe,EAAEN,UAAU;AAFP,GAAxB,EAGGE,cAHH;AAIH,CAL2B,+BAArB;AAOP;;AACA,OAAO,MAAMK,eAAe,qBAAG,YAAM;AACjC,QAAM;AACFH,IAAAA,KADE;AAEFE,IAAAA;AAFE,MAGFL,eAAe,CAACO,OAAhB,CAAwBN,cAAxB,KAA2C,EAH/C;;AAKA,MAAII,eAAe,IAAI,CAACN,UAAU,EAAlC,EAAsC;AAClC,WAAO,IAAP;AACH;;AAED,SAAOI,KAAP;AACH,CAX2B,+BAArB;AAaP;;AACA,OAAO,MAAMK,kBAAkB,qBAAG;AAAA,SAAMR,eAAe,CAACS,UAAhB,CAA2BR,cAA3B,CAAN;AAAA,CAAH,kCAAxB","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { isSignedIn } from 'Util/Auth';\nimport BrowserDatabase from 'Util/BrowserDatabase';\n\nexport const GUEST_QUOTE_ID = 'guest_quote_id';\n\n/** @namespace Util/Token/setGuestQuoteId */\nexport const setGuestQuoteId = (token) => {\n    BrowserDatabase.setItem({\n        token,\n        isCustomerToken: isSignedIn()\n    }, GUEST_QUOTE_ID);\n};\n\n/** @namespace Util/Token/getGuestQuoteId */\nexport const getGuestQuoteId = () => {\n    const {\n        token,\n        isCustomerToken\n    } = BrowserDatabase.getItem(GUEST_QUOTE_ID) || {};\n\n    if (isCustomerToken && !isSignedIn()) {\n        return null;\n    }\n\n    return token;\n};\n\n/** @namespace Util/Token/deleteGuestQuoteId */\nexport const deleteGuestQuoteId = () => BrowserDatabase.deleteItem(GUEST_QUOTE_ID);\n"]},"metadata":{},"sourceType":"module"}