{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { CUSTOMER } from \"/home/arturs/scandiweb/extension/src/store/MyAccount/MyAccount.dispatcher\";\nimport BrowserDatabase from \"/home/arturs/scandiweb/extension/src/util/BrowserDatabase\";\nimport { Field, Fragment } from \"/home/arturs/scandiweb/extension/src/util/Query\";\n/**\n * Product List Query\n * @class ProductListQuery\n * #namespace Query/ProductList\n */\n\nexport const ProductListQuery = Mosaic.middleware(class ProductListQuery_ extends Mosaic.Extensible() {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    this._getCustomFilters = function (filters = {}) {\n      return Object.entries(filters).reduce(function (acc, [key, attribute]) {\n        if (!attribute.length) {\n          return acc;\n        }\n\n        if (key === 'price') {\n          return { ...acc,\n            ..._this._getPriceFilter(key, attribute)\n          };\n        }\n\n        return { ...acc,\n          [key]: {\n            in: attribute\n          }\n        };\n      }, {});\n    };\n  }\n\n  __construct() {\n    super.__construct();\n\n    this.options = {};\n  }\n\n  getQuery(options) {\n    if (!options) {\n      throw new Error('Missing argument `options`');\n    }\n\n    this.options = options;\n    return this._getProductsField();\n  }\n\n  _getProductsField() {\n    const products = new Field('products').addFieldList(this._getProductFields());\n\n    this._getProductArguments().forEach(function (arg) {\n      return products.addArgument(...arg);\n    });\n\n    return products;\n  }\n\n  _getPriceFilter(key, value) {\n    const [from, to] = value[0].split('_');\n\n    if (from === '*') {\n      return {\n        [key]: {\n          to\n        }\n      };\n    }\n\n    if (to === '*') {\n      return {\n        [key]: {\n          from\n        }\n      };\n    }\n\n    return {\n      [key]: {\n        from,\n        to\n      }\n    };\n  }\n\n  _getFilterArgumentMap() {\n    return {\n      categoryIds: function (id) {\n        return {\n          category_id: {\n            eq: id\n          }\n        };\n      },\n      categoryUrlPath: function (url) {\n        return {\n          category_url_path: {\n            eq: url\n          }\n        };\n      },\n      priceRange: function ({\n        min,\n        max\n      }) {\n        const price = {};\n\n        if (min) {\n          price.from = min;\n        }\n\n        if (max) {\n          price.to = max;\n        }\n\n        return {\n          price\n        };\n      },\n      productsSkuArray: function (sku) {\n        return {\n          sku: {\n            in: sku\n          }\n        };\n      },\n      productSKU: function (sku) {\n        return {\n          sku: {\n            eq: sku\n          }\n        };\n      },\n      productUrlPath: function (url) {\n        return {\n          url_key: {\n            eq: url\n          }\n        };\n      },\n      customFilters: this._getCustomFilters,\n      newToDate: function (date) {\n        return {\n          news_to_date: {\n            gteq: date\n          }\n        };\n      },\n      conditions: function (conditions) {\n        return {\n          conditions: {\n            eq: conditions\n          }\n        };\n      },\n      customerGroupId: function (id) {\n        return {\n          customer_group_id: {\n            eq: id\n          }\n        };\n      }\n    };\n  }\n\n  _getArgumentsMap() {\n    const {\n      requireInfo\n    } = this.options;\n\n    const filterArgumentMap = this._getFilterArgumentMap();\n\n    return {\n      currentPage: {\n        type: 'Int!'\n      },\n      pageSize: {\n        type: 'Int!',\n        handler: function (option) {\n          return requireInfo ? 1 : option;\n        }\n      },\n      search: {\n        type: 'String!',\n        handler: function (option) {\n          return option;\n        }\n      },\n      sort: {\n        type: 'ProductAttributeSortInput!',\n        handler: function ({\n          sortKey,\n          sortDirection\n        }) {\n          return {\n            [sortKey]: sortDirection || 'ASC'\n          };\n        }\n      },\n      filter: {\n        type: 'ProductAttributeFilterInput!',\n        handler: function (initialOptions = {}) {\n          // add customer group by default to all requests\n          const {\n            group_id\n          } = BrowserDatabase.getItem(CUSTOMER) || {};\n          const options = { ...initialOptions,\n            customerGroupId: group_id || '0'\n          };\n          const {\n            customFilters: {\n              category_id\n            } = {}\n          } = options;\n          /**\n           * Remove category ID from select, if there is a custom filter\n           * of category already selected in filtering options.\n           */\n\n          if (category_id) {\n            // eslint-disable-next-line fp/no-delete\n            options.categoryIds = undefined;\n          }\n\n          const parsedOptions = Object.entries(options).reduce(function (acc, [key, option]) {\n            // if there is no value, or if the key is just not present in options object\n            if (!option || !filterArgumentMap[key]) {\n              return acc;\n            }\n\n            return { ...acc,\n              ...filterArgumentMap[key](option)\n            };\n          }, {});\n          return parsedOptions;\n        }\n      }\n    };\n  }\n\n  _getProductArguments() {\n    const {\n      args\n    } = this.options;\n\n    const argumentMap = this._getArgumentsMap();\n\n    return Object.entries(args).reduce(function (acc, [key, arg]) {\n      if (!arg) {\n        return acc;\n      }\n\n      const {\n        type,\n        handler = function (option) {\n          return option;\n        }\n      } = argumentMap[key];\n      return [...acc, [key, type, handler(arg)]];\n    }, []);\n  }\n\n  _getProductFields() {\n    const {\n      requireInfo,\n      isSingleProduct,\n      notRequireInfo\n    } = this.options; // do not request total count for PDP\n\n    if (isSingleProduct || notRequireInfo) {\n      return [this._getItemsField()];\n    } // for filters only request\n\n\n    if (requireInfo) {\n      return [this._getSortField(), this._getAggregationsField()];\n    }\n\n    return ['total_count', this._getItemsField(), this._getPageInfoField()];\n  }\n\n  _getProductInterfaceFields(isVariant, isForLinkedProducts = false) {\n    const {\n      isSingleProduct,\n      noAttributes = false,\n      noVariants = false,\n      noVariantAttributes = false\n    } = this.options;\n    const fields = ['id', 'sku', 'name', 'type_id', 'stock_status', this._getPriceRangeField(), this._getProductImageField(), this._getProductThumbnailField(), this._getProductSmallField(), this._getShortDescriptionField(), 'special_from_date', 'special_to_date', this._getTierPricesField()]; // if it is normal product and we need attributes\n    // or if, it is variant, but we need variant attributes or variants them-self\n\n    if (!isVariant && !noAttributes || isVariant && !noVariantAttributes && !noVariants) {\n      fields.push(this._getAttributesField(isVariant));\n    } // to all products (non-variants)\n\n\n    if (!isVariant) {\n      fields.push('url', this._getUrlRewritesFields(), this._getReviewCountField(), this._getRatingSummaryField()); // if variants are not needed\n\n      if (!noVariants) {\n        fields.push(this._getConfigurableProductFragment(), this._getBundleProductFragment());\n      }\n    } // prevent linked products from looping\n\n\n    if (isForLinkedProducts) {\n      fields.push(this._getProductLinksField());\n    } // additional information to PDP loads\n\n\n    if (isSingleProduct) {\n      fields.push('stock_status', 'meta_title', 'meta_keyword', 'canonical_url', 'meta_description', this._getDescriptionField(), this._getMediaGalleryField(), this._getSimpleProductFragment(), this._getProductLinksField(), this._getCustomizableProductFragment()); // for variants of PDP requested product\n\n      if (!isVariant) {\n        fields.push(this._getCategoriesField(), this._getReviewsField(), this._getVirtualProductFragment(), this._getCustomizableProductFragment());\n      }\n    }\n\n    return fields;\n  }\n  /**\n   * For grouped products, returns the subfields of the elements of the `items` field\n   * @returns {*[]}\n   * @private\n   */\n\n\n  _getGroupedProductItemFields() {\n    return [this._getProductField(), 'position', 'qty'];\n  }\n  /**\n   * A GroupedProduct-specific field that queries the products that are grouped under this product\n   * @returns {Field}\n   * @private\n   */\n\n\n  _getGroupedProductItems() {\n    return new Fragment('GroupedProduct').addField(new Field('items').addFieldList(this._getGroupedProductItemFields()));\n  }\n  /**\n   * A DownloadableProduct-specific field that queries the links and samples\n   * @returns {Field}\n   * @private\n   */\n\n\n  _getDownloadableProductFields() {\n    return new Fragment('DownloadableProduct').addFieldList(this._getDownloadableProductLinks());\n  }\n\n  _getDownloadableProductLinks() {\n    return ['links_title', 'samples_title', 'links_purchased_separately', this._getDownloadableProductLinkField(), this._getDownloadableProductSampleField()];\n  }\n\n  _getDownloadableProductLinkField() {\n    return new Field('downloadable_product_links').addFieldList(this._getDownloadableProductLinkFields());\n  }\n\n  _getDownloadableProductLinkFields() {\n    return ['sample_url', 'sort_order', 'title', 'id', 'price'];\n  }\n\n  _getDownloadableProductSampleField() {\n    return new Field('downloadable_product_samples').addFieldList(this._getDownloadableProductSampleFields());\n  }\n\n  _getDownloadableProductSampleFields() {\n    return ['title', 'sort_order', 'sample_url'];\n  }\n\n  _getItemsField() {\n    const {\n      isSingleProduct\n    } = this.options;\n    const items = new Field('items').addFieldList(this._getProductInterfaceFields());\n\n    if (isSingleProduct) {\n      items.addField(this._getGroupedProductItems());\n      items.addField(this._getDownloadableProductFields());\n    }\n\n    return items;\n  }\n\n  _getProductField() {\n    const {\n      isForLinkedProducts\n    } = this.options;\n    return new Field('product').addFieldList(this._getProductInterfaceFields(true, isForLinkedProducts));\n  }\n\n  _getShortDescriptionFields() {\n    return ['html'];\n  }\n\n  _getShortDescriptionField() {\n    return new Field('short_description').addFieldList(this._getShortDescriptionFields());\n  }\n\n  _getStockItemField() {\n    return new Field('stock_item').addFieldList(this._getStockItemFields());\n  }\n\n  _getStockItemFields() {\n    return ['min_sale_qty', 'max_sale_qty'];\n  }\n\n  _getBreadcrumbFields() {\n    return ['category_id', 'category_name', 'category_level', 'category_url', 'category_is_active'];\n  }\n\n  _getBreadcrumbsField() {\n    return new Field('breadcrumbs').addFieldList(this._getBreadcrumbFields());\n  }\n\n  _getCategoryFields() {\n    return ['id', 'name', 'url', this._getBreadcrumbsField()];\n  }\n\n  _getCategoriesField() {\n    return new Field('categories').addFieldList(this._getCategoryFields());\n  }\n\n  _getMinimalPriceFields() {\n    return [this._getDiscountField(), this._getFinalPriceField(), this._getFinalPriceExclTaxField(), this._getRegularPriceField(), this._getRegularPriceExclTaxField(), this._getDefaultPriceField(), this._getDefaultFinalPriceField(), this._getDefaultFinalPriceExclTaxField()];\n  }\n\n  _getMinimalPriceField() {\n    return new Field('minimum_price').addFieldList(this._getMinimalPriceFields());\n  }\n\n  _getMaximalPriceField() {\n    return new Field('maximum_price').addFieldList(this._getMinimalPriceFields());\n  }\n\n  _getPriceRangeFields() {\n    // Using an array as potentially would want to add maximum price\n    return [this._getMinimalPriceField(), this._getMaximalPriceField()];\n  }\n\n  _getPriceRangeField() {\n    return new Field('price_range').addFieldList(this._getPriceRangeFields());\n  }\n  /**\n   * @returns {[string]} an array representing the subfields of the product thumbnail\n   * @private\n   */\n\n\n  _getProductThumbnailFields() {\n    return ['path', 'url' // 'label'\n    ];\n  }\n\n  _getProductSmallFields() {\n    return this._getProductThumbnailFields();\n  }\n  /**\n   * Returns the field for fetching the thumbnail of a product.\n   * Not to be confused with the media thumbnail field, which has the same name but is a subfield of media_gallery_entries\n   * @returns {Field}\n   * @private\n   */\n\n\n  _getProductThumbnailField() {\n    return new Field('thumbnail').addFieldList(this._getProductThumbnailFields());\n  }\n\n  _getProductSmallField() {\n    return new Field('small_image').addFieldList(this._getProductSmallFields());\n  }\n\n  _getProductImageField() {\n    return new Field('image').addFieldList(this._getProductThumbnailFields());\n  }\n\n  _getAttributeOptionField() {\n    return ['label', 'value', this._getSwatchDataField()];\n  }\n\n  _getAttributeOptionsField() {\n    return new Field('attribute_options').addFieldList(this._getAttributeOptionField());\n  }\n\n  _getAttributeFields(isVariant) {\n    return ['attribute_id', 'attribute_value', 'attribute_code', 'attribute_type', 'attribute_label', 'attribute_group_id', 'attribute_group_code', 'attribute_group_name', ...(!isVariant ? [this._getAttributeOptionsField()] : [])];\n  }\n\n  _getAttributesField(isVariant) {\n    return new Field('s_attributes').setAlias('attributes').addFieldList(this._getAttributeFields(isVariant));\n  }\n\n  _getMediaGalleryFields() {\n    return ['id', 'file', 'label', 'position', 'disabled', 'media_type', 'types', this._getVideoContentField(), this._getMediaThumbnailField(), this._getMediaBaseField(), this._getMediaLargeField()];\n  }\n  /**\n   * Returns a field querying video-specific data for a media gallery entry.\n   * @returns {Field} the video_content field\n   * @private\n   */\n\n\n  _getVideoContentField() {\n    return new Field('video_content').addFieldList(['media_type', 'video_description', 'video_metadata', 'video_provider', 'video_title', 'video_url']);\n  }\n  /**\n   * Returns a field querying the thumbnail of a media gallery entry.\n   * Not to be confused with the product thumbnail field, which has the same name but is a direct subfield of the product\n   * @returns {Field}\n   * @private\n   */\n\n\n  _getMediaThumbnailField() {\n    return new Field('thumbnail').addField('url');\n  }\n\n  _getMediaBaseField() {\n    return new Field('base').addField('url');\n  }\n\n  _getMediaLargeField() {\n    return new Field('large').addField('url');\n  }\n\n  _getMediaGalleryField() {\n    return new Field('media_gallery_entries').addFieldList(this._getMediaGalleryFields());\n  }\n\n  _getProductLinksField() {\n    return new Field('product_links').addFieldList(this._getProductLinkFields());\n  }\n\n  _getDescriptionFields() {\n    return ['html'];\n  }\n\n  _getDescriptionField() {\n    return new Field('description').addFieldList(this._getDescriptionFields());\n  }\n\n  _getUrlRewritesFields() {\n    return new Field('url_rewrites').addFieldList(['url']);\n  }\n\n  _getProductLinkFields() {\n    return ['position', 'link_type', 'linked_product_sku'];\n  }\n\n  _getRatingsBreakdownFields() {\n    return [new Field('name').setAlias('rating_code'), 'value'];\n  }\n\n  _getRatingsBreakdownField() {\n    return new Field('ratings_breakdown').setAlias('rating_votes').addFieldList(this._getRatingsBreakdownFields());\n  }\n\n  _getReviewItemsFields() {\n    return ['average_rating', 'nickname', new Field('summary').setAlias('title'), new Field('text').setAlias('detail'), 'created_at', this._getRatingsBreakdownField()];\n  }\n\n  _getReviewItemsField() {\n    return new Field('items').addFieldList(this._getReviewItemsFields());\n  }\n\n  _getReviewsFields() {\n    return [this._getReviewItemsField()];\n  }\n\n  _getReviewsField() {\n    return new Field('reviews') // Hard-coded pages, it will be very hard to\n    // paginate using current implementation\n    // eslint-disable-next-line no-magic-numbers\n    .addArgument('pageSize', 'Int', 20).addArgument('currentPage', 'Int', 1).addFieldList(this._getReviewsFields());\n  }\n\n  _getReviewCountField() {\n    return new Field('review_count');\n  }\n\n  _getRatingSummaryField() {\n    return new Field('rating_summary');\n  }\n\n  _getBundleOptionsFields() {\n    return ['id', 'label', 'quantity', 'position', 'is_default', 'price', 'price_type', 'can_change_quantity', this._getProductField()];\n  }\n\n  _getBundleOptionsField() {\n    return new Field('options').addFieldList(this._getBundleOptionsFields());\n  }\n\n  _getBundleItemsFields() {\n    return ['option_id', 'title', 'required', 'type', 'position', 'sku', this._getBundleOptionsField()];\n  }\n\n  _getBundleItemsField() {\n    return new Field('items').addFieldList(this._getBundleItemsFields());\n  }\n\n  _getBundlePriceOptionSelectionFields() {\n    return ['selection_id', 'final_option_price', 'final_option_price_excl_tax', 'regular_option_price', 'regular_option_price_excl_tax'];\n  }\n\n  _getBundlePriceOptionFields() {\n    return ['option_id', new Field('selection_details').addFieldList(this._getBundlePriceOptionSelectionFields())];\n  }\n\n  _getBundlePriceOptionsField() {\n    return new Field('bundle_options').addFieldList(this._getBundlePriceOptionFields());\n  }\n\n  _getBundleProductFragmentFields() {\n    return ['price_view', 'dynamic_price', 'dynamic_sku', 'ship_bundle_items', 'dynamic_weight', this._getBundleItemsField(), this._getBundlePriceOptionsField()];\n  }\n\n  _getValueFields() {\n    return ['value_index'];\n  }\n\n  _getValuesField() {\n    return new Field('values').addFieldList(this._getValueFields());\n  }\n\n  _getConfigurableOptionFields() {\n    return ['attribute_code', this._getValuesField()];\n  }\n\n  _getConfigurableOptionsField() {\n    return new Field('configurable_options').addFieldList(this._getConfigurableOptionFields());\n  }\n\n  _getVariantFields() {\n    return [this._getProductField()];\n  }\n\n  _getVariantsField() {\n    return new Field('variants').addFieldList(this._getVariantFields());\n  }\n\n  _getConfigurableProductFragmentFields() {\n    return [this._getConfigurableOptionsField(), this._getVariantsField()];\n  }\n\n  _getCustomizableTextValueFields() {\n    return ['price', 'priceInclTax', 'priceExclTax', 'price_type', 'currency', 'sku', 'max_characters'];\n  }\n\n  _getCustomizableTextValueField(alias) {\n    return new Field('value').addFieldList(this._getCustomizableTextValueFields()).setAlias(alias);\n  }\n\n  _getCustomizableTextFields(alias) {\n    return [this._getCustomizableTextValueField(alias), 'product_sku'];\n  }\n\n  _getCustomizableFileValueField(alias) {\n    return new Field('value').addFieldList(['price', 'priceInclTax', 'priceExclTax', 'price_type', 'currency', 'sku', 'file_extension']).setAlias(alias);\n  }\n\n  _getCustomizableAreaOption() {\n    return new Fragment('CustomizableAreaOption').addFieldList(this._getCustomizableTextFields('areaValues'));\n  }\n\n  _getCustomizableFieldOption() {\n    return new Fragment('CustomizableFieldOption').addFieldList(this._getCustomizableTextFields('fieldValues'));\n  }\n\n  _getCustomizableFileOption() {\n    return new Fragment('CustomizableFileOption').addFieldList([this._getCustomizableFileValueField('fileValues')]);\n  }\n\n  _getCustomizableSelectionValueFields() {\n    return ['option_type_id', 'price', 'priceInclTax', 'priceExclTax', 'price_type', 'currency', 'sku', 'title', 'sort_order'];\n  }\n\n  _getCustomizableSelectionValueField(alias) {\n    return new Field('value').addFieldList(this._getCustomizableSelectionValueFields()).setAlias(alias);\n  }\n\n  _getCustomizableCheckboxOption() {\n    return new Fragment('CustomizableCheckboxOption').addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]);\n  }\n\n  _getCustomizableMultiOption() {\n    return new Fragment('CustomizableMultipleOption').addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]); // same as checkbox\n  }\n\n  _getCustomizableDropdownOption() {\n    return new Fragment('CustomizableDropDownOption').addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]);\n  }\n\n  _getCustomizableRadioOption() {\n    return new Fragment('CustomizableRadioOption').addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]); // same as dropdown\n  }\n\n  _getCustomizableProductFragmentOptionsFields() {\n    return [this._getCustomizableDropdownOption(), this._getCustomizableRadioOption(), this._getCustomizableCheckboxOption(), this._getCustomizableMultiOption(), this._getCustomizableFieldOption(), this._getCustomizableAreaOption(), this._getCustomizableFileOption(), 'title', 'required', 'sort_order', 'option_id'];\n  }\n\n  _getCustomizableProductFragmentOptionsField() {\n    return new Field('options').addFieldList(this._getCustomizableProductFragmentOptionsFields());\n  }\n\n  _getCustomizableProductFragment() {\n    return new Fragment('CustomizableProductInterface').addFieldList([this._getCustomizableProductFragmentOptionsField()]);\n  }\n\n  _getSimpleProductFragmentFields() {\n    return [this._getTierPricesField()];\n  }\n\n  _getVirtualProductFragmentFields() {\n    return [this._getTierPricesField()];\n  }\n\n  _getTierPricesField() {\n    return new Field('price_tiers').addFieldList(this._getTierPricesFields());\n  }\n\n  _getTierPricesFields() {\n    return [this._getDiscountField(), this._getFinalPriceField(), 'quantity'];\n  }\n\n  _getDiscountField() {\n    return new Field('discount').addField('amount_off').addField('percent_off');\n  }\n\n  _getFinalPriceField() {\n    return new Field('final_price').addField('currency').addField('value');\n  }\n\n  _getFinalPriceExclTaxField() {\n    return new Field('final_price_excl_tax').addField('currency').addField('value');\n  }\n\n  _getRegularPriceField() {\n    return new Field('regular_price').addField('currency').addField('value');\n  }\n\n  _getRegularPriceExclTaxField() {\n    return new Field('regular_price_excl_tax').addField('currency').addField('value');\n  }\n\n  _getDefaultFinalPriceExclTaxField() {\n    return new Field('default_final_price_excl_tax').addField('currency').addField('value');\n  }\n\n  _getDefaultPriceField() {\n    return new Field('default_price').addField('currency').addField('value');\n  }\n\n  _getDefaultFinalPriceField() {\n    return new Field('default_final_price').addField('currency').addField('value');\n  }\n\n  _getBundleProductFragment() {\n    return new Fragment('BundleProduct').addFieldList(this._getBundleProductFragmentFields());\n  }\n\n  _getConfigurableProductFragment() {\n    return new Fragment('ConfigurableProduct').addFieldList(this._getConfigurableProductFragmentFields());\n  }\n\n  _getSimpleProductFragment() {\n    return new Fragment('SimpleProduct').addFieldList(this._getSimpleProductFragmentFields());\n  }\n\n  _getVirtualProductFragment() {\n    return new Fragment('VirtualProduct').addFieldList(this._getVirtualProductFragmentFields());\n  }\n\n  _getSortOptionFields() {\n    return ['value', 'label'];\n  }\n\n  _getSortOptionsField() {\n    return new Field('options').addFieldList(this._getSortOptionFields());\n  }\n\n  _getSortFields() {\n    return [this._getSortOptionsField()];\n  }\n\n  _getSortField() {\n    return new Field('sort_fields').addFieldList(this._getSortFields());\n  }\n\n  _getSwatchDataFields() {\n    return ['type', 'value'];\n  }\n\n  _getSwatchDataField() {\n    return new Field('swatch_data').addFieldList(this._getSwatchDataFields());\n  }\n\n  _getAggregationsField() {\n    return new Field('aggregations').setAlias('filters').addFieldList(this._getAggregationsFields());\n  }\n\n  _getAggregationsFields() {\n    return [new Field('label').setAlias('name'), new Field('attribute_code').setAlias('request_var'), new Field('is_boolean'), 'position', this._getAggregationsOptionsField()];\n  }\n\n  _getAggregationsOptionsField() {\n    return new Field('options').setAlias('filter_items').addFieldList(this._getAggregationsOptionsFields());\n  }\n\n  _getAggregationsOptionsFields() {\n    return ['label', 'count', new Field('value').setAlias('value_string'), this._getSwatchDataField()];\n  }\n\n  _getPageInfoField() {\n    return new Field('page_info').addField('current_page').addField('total_pages');\n  }\n\n}, \"Query/ProductList\");\nexport default new ProductListQuery();","map":{"version":3,"sources":["/home/arturs/scandiweb/extension/node_modules/@scandipwa/scandipwa/src/query/ProductList.query.js"],"names":["CUSTOMER","BrowserDatabase","Field","Fragment","_getCustomFilters","filters","Object","entries","reduce","acc","key","attribute","length","_getPriceFilter","in","__construct","options","getQuery","Error","_getProductsField","products","addFieldList","_getProductFields","_getProductArguments","forEach","arg","addArgument","value","from","to","split","_getFilterArgumentMap","categoryIds","id","category_id","eq","categoryUrlPath","url","category_url_path","priceRange","min","max","price","productsSkuArray","sku","productSKU","productUrlPath","url_key","customFilters","newToDate","date","news_to_date","gteq","conditions","customerGroupId","customer_group_id","_getArgumentsMap","requireInfo","filterArgumentMap","currentPage","type","pageSize","handler","option","search","sort","sortKey","sortDirection","filter","initialOptions","group_id","getItem","undefined","parsedOptions","args","argumentMap","isSingleProduct","notRequireInfo","_getItemsField","_getSortField","_getAggregationsField","_getPageInfoField","_getProductInterfaceFields","isVariant","isForLinkedProducts","noAttributes","noVariants","noVariantAttributes","fields","_getPriceRangeField","_getProductImageField","_getProductThumbnailField","_getProductSmallField","_getShortDescriptionField","_getTierPricesField","push","_getAttributesField","_getUrlRewritesFields","_getReviewCountField","_getRatingSummaryField","_getConfigurableProductFragment","_getBundleProductFragment","_getProductLinksField","_getDescriptionField","_getMediaGalleryField","_getSimpleProductFragment","_getCustomizableProductFragment","_getCategoriesField","_getReviewsField","_getVirtualProductFragment","_getGroupedProductItemFields","_getProductField","_getGroupedProductItems","addField","_getDownloadableProductFields","_getDownloadableProductLinks","_getDownloadableProductLinkField","_getDownloadableProductSampleField","_getDownloadableProductLinkFields","_getDownloadableProductSampleFields","items","_getShortDescriptionFields","_getStockItemField","_getStockItemFields","_getBreadcrumbFields","_getBreadcrumbsField","_getCategoryFields","_getMinimalPriceFields","_getDiscountField","_getFinalPriceField","_getFinalPriceExclTaxField","_getRegularPriceField","_getRegularPriceExclTaxField","_getDefaultPriceField","_getDefaultFinalPriceField","_getDefaultFinalPriceExclTaxField","_getMinimalPriceField","_getMaximalPriceField","_getPriceRangeFields","_getProductThumbnailFields","_getProductSmallFields","_getAttributeOptionField","_getSwatchDataField","_getAttributeOptionsField","_getAttributeFields","setAlias","_getMediaGalleryFields","_getVideoContentField","_getMediaThumbnailField","_getMediaBaseField","_getMediaLargeField","_getProductLinkFields","_getDescriptionFields","_getRatingsBreakdownFields","_getRatingsBreakdownField","_getReviewItemsFields","_getReviewItemsField","_getReviewsFields","_getBundleOptionsFields","_getBundleOptionsField","_getBundleItemsFields","_getBundleItemsField","_getBundlePriceOptionSelectionFields","_getBundlePriceOptionFields","_getBundlePriceOptionsField","_getBundleProductFragmentFields","_getValueFields","_getValuesField","_getConfigurableOptionFields","_getConfigurableOptionsField","_getVariantFields","_getVariantsField","_getConfigurableProductFragmentFields","_getCustomizableTextValueFields","_getCustomizableTextValueField","alias","_getCustomizableTextFields","_getCustomizableFileValueField","_getCustomizableAreaOption","_getCustomizableFieldOption","_getCustomizableFileOption","_getCustomizableSelectionValueFields","_getCustomizableSelectionValueField","_getCustomizableCheckboxOption","_getCustomizableMultiOption","_getCustomizableDropdownOption","_getCustomizableRadioOption","_getCustomizableProductFragmentOptionsFields","_getCustomizableProductFragmentOptionsField","_getSimpleProductFragmentFields","_getVirtualProductFragmentFields","_getTierPricesFields","_getSortOptionFields","_getSortOptionsField","_getSortFields","_getSwatchDataFields","_getAggregationsFields","_getAggregationsOptionsField","_getAggregationsOptionsFields","ProductListQuery"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { CUSTOMER } from 'Store/MyAccount/MyAccount.dispatcher';\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { Field, Fragment } from 'Util/Query';\n\n/**\n * Product List Query\n * @class ProductListQuery\n * @namespace Query/ProductList\n */\nexport class ProductListQuery {\n    __construct() {\n        super.__construct();\n        this.options = {};\n    }\n\n    getQuery(options) {\n        if (!options) {\n            throw new Error('Missing argument `options`');\n        }\n\n        this.options = options;\n\n        return this._getProductsField();\n    }\n\n    _getProductsField() {\n        const products = new Field('products')\n            .addFieldList(this._getProductFields());\n\n        this._getProductArguments().forEach((arg) => products.addArgument(...arg));\n\n        return products;\n    }\n\n    _getPriceFilter(key, value) {\n        const [from, to] = value[0].split('_');\n\n        if (from === '*') {\n            return { [key]: { to } };\n        }\n\n        if (to === '*') {\n            return { [key]: { from } };\n        }\n\n        return {\n            [key]: { from, to }\n        };\n    }\n\n    _getCustomFilters = (filters = {}) => (\n        Object.entries(filters).reduce((acc, [key, attribute]) => {\n            if (!attribute.length) {\n                return acc;\n            }\n\n            if (key === 'price') {\n                return {\n                    ...acc,\n                    ...this._getPriceFilter(key, attribute)\n                };\n            }\n\n            return {\n                ...acc,\n                [key]: { in: attribute }\n            };\n        }, {})\n    );\n\n    _getFilterArgumentMap() {\n        return {\n            categoryIds: (id) => ({ category_id: { eq: id } }),\n            categoryUrlPath: (url) => ({ category_url_path: { eq: url } }),\n            priceRange: ({ min, max }) => {\n                const price = {};\n\n                if (min) {\n                    price.from = min;\n                }\n\n                if (max) {\n                    price.to = max;\n                }\n\n                return { price };\n            },\n            productsSkuArray: (sku) => ({ sku: { in: sku } }),\n            productSKU: (sku) => ({ sku: { eq: sku } }),\n            productUrlPath: (url) => ({ url_key: { eq: url } }),\n            customFilters: this._getCustomFilters,\n            newToDate: (date) => ({ news_to_date: { gteq: date } }),\n            conditions: (conditions) => ({ conditions: { eq: conditions } }),\n            customerGroupId: (id) => ({ customer_group_id: { eq: id } })\n        };\n    }\n\n    _getArgumentsMap() {\n        const { requireInfo } = this.options;\n        const filterArgumentMap = this._getFilterArgumentMap();\n\n        return {\n            currentPage: { type: 'Int!' },\n            pageSize: {\n                type: 'Int!',\n                handler: (option) => (requireInfo ? 1 : option)\n            },\n            search: {\n                type: 'String!',\n                handler: (option) => option\n            },\n            sort: {\n                type: 'ProductAttributeSortInput!',\n                handler: ({ sortKey, sortDirection }) => ({ [sortKey]: sortDirection || 'ASC' })\n            },\n            filter: {\n                type: 'ProductAttributeFilterInput!',\n                handler: (initialOptions = {}) => {\n                    // add customer group by default to all requests\n                    const { group_id } = BrowserDatabase.getItem(CUSTOMER) || {};\n\n                    const options = {\n                        ...initialOptions,\n                        customerGroupId: group_id || '0'\n                    };\n\n                    const {\n                        customFilters: { category_id } = {}\n                    } = options;\n\n                    /**\n                     * Remove category ID from select, if there is a custom filter\n                     * of category already selected in filtering options.\n                     */\n                    if (category_id) {\n                        // eslint-disable-next-line fp/no-delete\n                        options.categoryIds = undefined;\n                    }\n\n                    const parsedOptions = Object.entries(options).reduce(\n                        (acc, [key, option]) => {\n                            // if there is no value, or if the key is just not present in options object\n                            if (!option || !filterArgumentMap[key]) {\n                                return acc;\n                            }\n\n                            return { ...acc, ...filterArgumentMap[key](option) };\n                        },\n                        {}\n                    );\n\n                    return parsedOptions;\n                }\n            }\n        };\n    }\n\n    _getProductArguments() {\n        const { args } = this.options;\n        const argumentMap = this._getArgumentsMap();\n\n        return Object.entries(args).reduce((acc, [key, arg]) => {\n            if (!arg) {\n                return acc;\n            }\n            const { type, handler = (option) => option } = argumentMap[key];\n            return [...acc, [key, type, handler(arg)]];\n        }, []);\n    }\n\n    _getProductFields() {\n        const { requireInfo, isSingleProduct, notRequireInfo } = this.options;\n\n        // do not request total count for PDP\n        if (isSingleProduct || notRequireInfo) {\n            return [\n                this._getItemsField()\n            ];\n        }\n\n        // for filters only request\n        if (requireInfo) {\n            return [\n                this._getSortField(),\n                this._getAggregationsField()\n            ];\n        }\n\n        return [\n            'total_count',\n            this._getItemsField(),\n            this._getPageInfoField()\n        ];\n    }\n\n    _getProductInterfaceFields(isVariant, isForLinkedProducts = false) {\n        const {\n            isSingleProduct,\n            noAttributes = false,\n            noVariants = false,\n            noVariantAttributes = false\n        } = this.options;\n\n        const fields = [\n            'id',\n            'sku',\n            'name',\n            'type_id',\n            'stock_status',\n            this._getPriceRangeField(),\n            this._getProductImageField(),\n            this._getProductThumbnailField(),\n            this._getProductSmallField(),\n            this._getShortDescriptionField(),\n            'special_from_date',\n            'special_to_date',\n            this._getTierPricesField()\n        ];\n\n        // if it is normal product and we need attributes\n        // or if, it is variant, but we need variant attributes or variants them-self\n        if ((!isVariant && !noAttributes) || (isVariant && !noVariantAttributes && !noVariants)) {\n            fields.push(this._getAttributesField(isVariant));\n        }\n\n        // to all products (non-variants)\n        if (!isVariant) {\n            fields.push(\n                'url',\n                this._getUrlRewritesFields(),\n                this._getReviewCountField(),\n                this._getRatingSummaryField()\n            );\n\n            // if variants are not needed\n            if (!noVariants) {\n                fields.push(\n                    this._getConfigurableProductFragment(),\n                    this._getBundleProductFragment()\n                );\n            }\n        }\n\n        // prevent linked products from looping\n        if (isForLinkedProducts) {\n            fields.push(this._getProductLinksField());\n        }\n\n        // additional information to PDP loads\n        if (isSingleProduct) {\n            fields.push(\n                'stock_status',\n                'meta_title',\n                'meta_keyword',\n                'canonical_url',\n                'meta_description',\n                this._getDescriptionField(),\n                this._getMediaGalleryField(),\n                this._getSimpleProductFragment(),\n                this._getProductLinksField(),\n                this._getCustomizableProductFragment()\n            );\n\n            // for variants of PDP requested product\n            if (!isVariant) {\n                fields.push(\n                    this._getCategoriesField(),\n                    this._getReviewsField(),\n                    this._getVirtualProductFragment(),\n                    this._getCustomizableProductFragment()\n                );\n            }\n        }\n\n        return fields;\n    }\n\n    /**\n     * For grouped products, returns the subfields of the elements of the `items` field\n     * @returns {*[]}\n     * @private\n     */\n    _getGroupedProductItemFields() {\n        return [\n            this._getProductField(),\n            'position',\n            'qty'\n        ];\n    }\n\n    /**\n     * A GroupedProduct-specific field that queries the products that are grouped under this product\n     * @returns {Field}\n     * @private\n     */\n    _getGroupedProductItems() {\n        return new Fragment('GroupedProduct').addField(\n            new Field('items')\n                .addFieldList(this._getGroupedProductItemFields())\n        );\n    }\n\n    /**\n     * A DownloadableProduct-specific field that queries the links and samples\n     * @returns {Field}\n     * @private\n     */\n    _getDownloadableProductFields() {\n        return new Fragment('DownloadableProduct')\n            .addFieldList(this._getDownloadableProductLinks());\n    }\n\n    _getDownloadableProductLinks() {\n        return [\n            'links_title',\n            'samples_title',\n            'links_purchased_separately',\n            this._getDownloadableProductLinkField(),\n            this._getDownloadableProductSampleField()\n        ];\n    }\n\n    _getDownloadableProductLinkField() {\n        return new Field('downloadable_product_links')\n            .addFieldList(this._getDownloadableProductLinkFields());\n    }\n\n    _getDownloadableProductLinkFields() {\n        return [\n            'sample_url',\n            'sort_order',\n            'title',\n            'id',\n            'price'\n        ];\n    }\n\n    _getDownloadableProductSampleField() {\n        return new Field('downloadable_product_samples')\n            .addFieldList(this._getDownloadableProductSampleFields());\n    }\n\n    _getDownloadableProductSampleFields() {\n        return [\n            'title',\n            'sort_order',\n            'sample_url'\n        ];\n    }\n\n    _getItemsField() {\n        const { isSingleProduct } = this.options;\n\n        const items = new Field('items')\n            .addFieldList(this._getProductInterfaceFields());\n\n        if (isSingleProduct) {\n            items.addField(this._getGroupedProductItems());\n            items.addField(this._getDownloadableProductFields());\n        }\n\n        return items;\n    }\n\n    _getProductField() {\n        const { isForLinkedProducts } = this.options;\n\n        return new Field('product')\n            .addFieldList(this._getProductInterfaceFields(true, isForLinkedProducts));\n    }\n\n    _getShortDescriptionFields() {\n        return [\n            'html'\n        ];\n    }\n\n    _getShortDescriptionField() {\n        return new Field('short_description')\n            .addFieldList(this._getShortDescriptionFields());\n    }\n\n    _getStockItemField() {\n        return new Field('stock_item')\n            .addFieldList(this._getStockItemFields());\n    }\n\n    _getStockItemFields() {\n        return [\n            'min_sale_qty',\n            'max_sale_qty'\n        ];\n    }\n\n    _getBreadcrumbFields() {\n        return [\n            'category_id',\n            'category_name',\n            'category_level',\n            'category_url',\n            'category_is_active'\n        ];\n    }\n\n    _getBreadcrumbsField() {\n        return new Field('breadcrumbs')\n            .addFieldList(this._getBreadcrumbFields());\n    }\n\n    _getCategoryFields() {\n        return [\n            'id',\n            'name',\n            'url',\n            this._getBreadcrumbsField()\n        ];\n    }\n\n    _getCategoriesField() {\n        return new Field('categories')\n            .addFieldList(this._getCategoryFields());\n    }\n\n    _getMinimalPriceFields() {\n        return [\n            this._getDiscountField(),\n            this._getFinalPriceField(),\n            this._getFinalPriceExclTaxField(),\n            this._getRegularPriceField(),\n            this._getRegularPriceExclTaxField(),\n            this._getDefaultPriceField(),\n            this._getDefaultFinalPriceField(),\n            this._getDefaultFinalPriceExclTaxField()\n        ];\n    }\n\n    _getMinimalPriceField() {\n        return new Field('minimum_price')\n            .addFieldList(this._getMinimalPriceFields());\n    }\n\n    _getMaximalPriceField() {\n        return new Field('maximum_price')\n            .addFieldList(this._getMinimalPriceFields());\n    }\n\n    _getPriceRangeFields() {\n        // Using an array as potentially would want to add maximum price\n        return [\n            this._getMinimalPriceField(),\n            this._getMaximalPriceField()\n        ];\n    }\n\n    _getPriceRangeField() {\n        return new Field('price_range')\n            .addFieldList(this._getPriceRangeFields());\n    }\n\n    /**\n     * @returns {[string]} an array representing the subfields of the product thumbnail\n     * @private\n     */\n    _getProductThumbnailFields() {\n        return [\n            'path',\n            'url'\n            // 'label'\n        ];\n    }\n\n    _getProductSmallFields() {\n        return this._getProductThumbnailFields();\n    }\n\n    /**\n     * Returns the field for fetching the thumbnail of a product.\n     * Not to be confused with the media thumbnail field, which has the same name but is a subfield of media_gallery_entries\n     * @returns {Field}\n     * @private\n     */\n    _getProductThumbnailField() {\n        return new Field('thumbnail')\n            .addFieldList(this._getProductThumbnailFields());\n    }\n\n    _getProductSmallField() {\n        return new Field('small_image')\n            .addFieldList(this._getProductSmallFields());\n    }\n\n    _getProductImageField() {\n        return new Field('image')\n            .addFieldList(this._getProductThumbnailFields());\n    }\n\n    _getAttributeOptionField() {\n        return [\n            'label',\n            'value',\n            this._getSwatchDataField()\n        ];\n    }\n\n    _getAttributeOptionsField() {\n        return new Field('attribute_options')\n            .addFieldList(this._getAttributeOptionField());\n    }\n\n    _getAttributeFields(isVariant) {\n        return [\n            'attribute_id',\n            'attribute_value',\n            'attribute_code',\n            'attribute_type',\n            'attribute_label',\n            'attribute_group_id',\n            'attribute_group_code',\n            'attribute_group_name',\n            ...(!isVariant\n                ? [\n                    this._getAttributeOptionsField()\n                ]\n                : []\n            )\n        ];\n    }\n\n    _getAttributesField(isVariant) {\n        return new Field('s_attributes')\n            .setAlias('attributes')\n            .addFieldList(this._getAttributeFields(isVariant));\n    }\n\n    _getMediaGalleryFields() {\n        return [\n            'id',\n            'file',\n            'label',\n            'position',\n            'disabled',\n            'media_type',\n            'types',\n            this._getVideoContentField(),\n            this._getMediaThumbnailField(),\n            this._getMediaBaseField(),\n            this._getMediaLargeField()\n        ];\n    }\n\n    /**\n     * Returns a field querying video-specific data for a media gallery entry.\n     * @returns {Field} the video_content field\n     * @private\n     */\n    _getVideoContentField() {\n        return new Field('video_content').addFieldList([\n            'media_type',\n            'video_description',\n            'video_metadata',\n            'video_provider',\n            'video_title',\n            'video_url'\n        ]);\n    }\n\n    /**\n     * Returns a field querying the thumbnail of a media gallery entry.\n     * Not to be confused with the product thumbnail field, which has the same name but is a direct subfield of the product\n     * @returns {Field}\n     * @private\n     */\n    _getMediaThumbnailField() {\n        return new Field('thumbnail').addField('url');\n    }\n\n    _getMediaBaseField() {\n        return new Field('base').addField('url');\n    }\n\n    _getMediaLargeField() {\n        return new Field('large').addField('url');\n    }\n\n    _getMediaGalleryField() {\n        return new Field('media_gallery_entries')\n            .addFieldList(this._getMediaGalleryFields());\n    }\n\n    _getProductLinksField() {\n        return new Field('product_links')\n            .addFieldList(this._getProductLinkFields());\n    }\n\n    _getDescriptionFields() {\n        return [\n            'html'\n        ];\n    }\n\n    _getDescriptionField() {\n        return new Field('description')\n            .addFieldList(this._getDescriptionFields());\n    }\n\n    _getUrlRewritesFields() {\n        return new Field('url_rewrites')\n            .addFieldList(['url']);\n    }\n\n    _getProductLinkFields() {\n        return [\n            'position',\n            'link_type',\n            'linked_product_sku'\n        ];\n    }\n\n    _getRatingsBreakdownFields() {\n        return [\n            new Field('name').setAlias('rating_code'),\n            'value'\n        ];\n    }\n\n    _getRatingsBreakdownField() {\n        return new Field('ratings_breakdown')\n            .setAlias('rating_votes')\n            .addFieldList(this._getRatingsBreakdownFields());\n    }\n\n    _getReviewItemsFields() {\n        return [\n            'average_rating',\n            'nickname',\n            new Field('summary').setAlias('title'),\n            new Field('text').setAlias('detail'),\n            'created_at',\n            this._getRatingsBreakdownField()\n        ];\n    }\n\n    _getReviewItemsField() {\n        return new Field('items')\n            .addFieldList(this._getReviewItemsFields());\n    }\n\n    _getReviewsFields() {\n        return [\n            this._getReviewItemsField()\n        ];\n    }\n\n    _getReviewsField() {\n        return new Field('reviews')\n            // Hard-coded pages, it will be very hard to\n            // paginate using current implementation\n            // eslint-disable-next-line no-magic-numbers\n            .addArgument('pageSize', 'Int', 20)\n            .addArgument('currentPage', 'Int', 1)\n            .addFieldList(this._getReviewsFields());\n    }\n\n    _getReviewCountField() {\n        return new Field('review_count');\n    }\n\n    _getRatingSummaryField() {\n        return new Field('rating_summary');\n    }\n\n    _getBundleOptionsFields() {\n        return [\n            'id',\n            'label',\n            'quantity',\n            'position',\n            'is_default',\n            'price',\n            'price_type',\n            'can_change_quantity',\n            this._getProductField()\n        ];\n    }\n\n    _getBundleOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getBundleOptionsFields());\n    }\n\n    _getBundleItemsFields() {\n        return [\n            'option_id',\n            'title',\n            'required',\n            'type',\n            'position',\n            'sku',\n            this._getBundleOptionsField()\n        ];\n    }\n\n    _getBundleItemsField() {\n        return new Field('items')\n            .addFieldList(this._getBundleItemsFields());\n    }\n\n    _getBundlePriceOptionSelectionFields() {\n        return [\n            'selection_id',\n            'final_option_price',\n            'final_option_price_excl_tax',\n            'regular_option_price',\n            'regular_option_price_excl_tax'\n        ];\n    }\n\n    _getBundlePriceOptionFields() {\n        return [\n            'option_id',\n            new Field('selection_details')\n                .addFieldList(this._getBundlePriceOptionSelectionFields())\n        ];\n    }\n\n    _getBundlePriceOptionsField() {\n        return new Field('bundle_options')\n            .addFieldList(this._getBundlePriceOptionFields());\n    }\n\n    _getBundleProductFragmentFields() {\n        return [\n            'price_view',\n            'dynamic_price',\n            'dynamic_sku',\n            'ship_bundle_items',\n            'dynamic_weight',\n            this._getBundleItemsField(),\n            this._getBundlePriceOptionsField()\n        ];\n    }\n\n    _getValueFields() {\n        return [\n            'value_index'\n        ];\n    }\n\n    _getValuesField() {\n        return new Field('values')\n            .addFieldList(this._getValueFields());\n    }\n\n    _getConfigurableOptionFields() {\n        return [\n            'attribute_code',\n            this._getValuesField()\n        ];\n    }\n\n    _getConfigurableOptionsField() {\n        return new Field('configurable_options')\n            .addFieldList(this._getConfigurableOptionFields());\n    }\n\n    _getVariantFields() {\n        return [\n            this._getProductField()\n        ];\n    }\n\n    _getVariantsField() {\n        return new Field('variants')\n            .addFieldList(this._getVariantFields());\n    }\n\n    _getConfigurableProductFragmentFields() {\n        return [\n            this._getConfigurableOptionsField(),\n            this._getVariantsField()\n        ];\n    }\n\n    _getCustomizableTextValueFields() {\n        return [\n            'price',\n            'priceInclTax',\n            'priceExclTax',\n            'price_type',\n            'currency',\n            'sku',\n            'max_characters'\n        ];\n    }\n\n    _getCustomizableTextValueField(alias) {\n        return new Field('value')\n            .addFieldList(this._getCustomizableTextValueFields())\n            .setAlias(alias);\n    }\n\n    _getCustomizableTextFields(alias) {\n        return [\n            this._getCustomizableTextValueField(alias),\n            'product_sku'\n        ];\n    }\n\n    _getCustomizableFileValueField(alias) {\n        return new Field('value')\n            .addFieldList([\n                'price',\n                'priceInclTax',\n                'priceExclTax',\n                'price_type',\n                'currency',\n                'sku',\n                'file_extension'\n            ])\n            .setAlias(alias);\n    }\n\n    _getCustomizableAreaOption() {\n        return new Fragment('CustomizableAreaOption')\n            .addFieldList(this._getCustomizableTextFields('areaValues'));\n    }\n\n    _getCustomizableFieldOption() {\n        return new Fragment('CustomizableFieldOption')\n            .addFieldList(this._getCustomizableTextFields('fieldValues'));\n    }\n\n    _getCustomizableFileOption() {\n        return new Fragment('CustomizableFileOption')\n            .addFieldList([this._getCustomizableFileValueField('fileValues')]);\n    }\n\n    _getCustomizableSelectionValueFields() {\n        return [\n            'option_type_id',\n            'price',\n            'priceInclTax',\n            'priceExclTax',\n            'price_type',\n            'currency',\n            'sku',\n            'title',\n            'sort_order'\n        ];\n    }\n\n    _getCustomizableSelectionValueField(alias) {\n        return new Field('value')\n            .addFieldList(this._getCustomizableSelectionValueFields())\n            .setAlias(alias);\n    }\n\n    _getCustomizableCheckboxOption() {\n        return new Fragment('CustomizableCheckboxOption')\n            .addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]);\n    }\n\n    _getCustomizableMultiOption() {\n        return new Fragment('CustomizableMultipleOption')\n            .addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]); // same as checkbox\n    }\n\n    _getCustomizableDropdownOption() {\n        return new Fragment('CustomizableDropDownOption')\n            .addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]);\n    }\n\n    _getCustomizableRadioOption() {\n        return new Fragment('CustomizableRadioOption')\n            .addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]); // same as dropdown\n    }\n\n    _getCustomizableProductFragmentOptionsFields() {\n        return [\n            this._getCustomizableDropdownOption(),\n            this._getCustomizableRadioOption(),\n            this._getCustomizableCheckboxOption(),\n            this._getCustomizableMultiOption(),\n            this._getCustomizableFieldOption(),\n            this._getCustomizableAreaOption(),\n            this._getCustomizableFileOption(),\n            'title',\n            'required',\n            'sort_order',\n            'option_id'\n        ];\n    }\n\n    _getCustomizableProductFragmentOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getCustomizableProductFragmentOptionsFields());\n    }\n\n    _getCustomizableProductFragment() {\n        return new Fragment('CustomizableProductInterface')\n            .addFieldList([this._getCustomizableProductFragmentOptionsField()]);\n    }\n\n    _getSimpleProductFragmentFields() {\n        return [\n            this._getTierPricesField()\n        ];\n    }\n\n    _getVirtualProductFragmentFields() {\n        return [\n            this._getTierPricesField()\n        ];\n    }\n\n    _getTierPricesField() {\n        return new Field('price_tiers')\n            .addFieldList(this._getTierPricesFields());\n    }\n\n    _getTierPricesFields() {\n        return [\n            this._getDiscountField(),\n            this._getFinalPriceField(),\n            'quantity'\n        ];\n    }\n\n    _getDiscountField() {\n        return new Field('discount')\n            .addField('amount_off')\n            .addField('percent_off');\n    }\n\n    _getFinalPriceField() {\n        return new Field('final_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getFinalPriceExclTaxField() {\n        return new Field('final_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getRegularPriceField() {\n        return new Field('regular_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getRegularPriceExclTaxField() {\n        return new Field('regular_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultFinalPriceExclTaxField() {\n        return new Field('default_final_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultPriceField() {\n        return new Field('default_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultFinalPriceField() {\n        return new Field('default_final_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getBundleProductFragment() {\n        return new Fragment('BundleProduct')\n            .addFieldList(this._getBundleProductFragmentFields());\n    }\n\n    _getConfigurableProductFragment() {\n        return new Fragment('ConfigurableProduct')\n            .addFieldList(this._getConfigurableProductFragmentFields());\n    }\n\n    _getSimpleProductFragment() {\n        return new Fragment('SimpleProduct')\n            .addFieldList(this._getSimpleProductFragmentFields());\n    }\n\n    _getVirtualProductFragment() {\n        return new Fragment('VirtualProduct')\n            .addFieldList(this._getVirtualProductFragmentFields());\n    }\n\n    _getSortOptionFields() {\n        return [\n            'value',\n            'label'\n        ];\n    }\n\n    _getSortOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getSortOptionFields());\n    }\n\n    _getSortFields() {\n        return [\n            this._getSortOptionsField()\n        ];\n    }\n\n    _getSortField() {\n        return new Field('sort_fields')\n            .addFieldList(this._getSortFields());\n    }\n\n    _getSwatchDataFields() {\n        return [\n            'type',\n            'value'\n        ];\n    }\n\n    _getSwatchDataField() {\n        return new Field('swatch_data')\n            .addFieldList(this._getSwatchDataFields());\n    }\n\n    _getAggregationsField() {\n        return new Field('aggregations')\n            .setAlias('filters')\n            .addFieldList(this._getAggregationsFields());\n    }\n\n    _getAggregationsFields() {\n        return [\n            new Field('label').setAlias('name'),\n            new Field('attribute_code').setAlias('request_var'),\n            new Field('is_boolean'),\n            'position',\n            this._getAggregationsOptionsField()\n        ];\n    }\n\n    _getAggregationsOptionsField() {\n        return new Field('options')\n            .setAlias('filter_items')\n            .addFieldList(this._getAggregationsOptionsFields());\n    }\n\n    _getAggregationsOptionsFields() {\n        return [\n            'label',\n            'count',\n            new Field('value').setAlias('value_string'),\n            this._getSwatchDataField()\n        ];\n    }\n\n    _getPageInfoField() {\n        return new Field('page_info')\n            .addField('current_page')\n            .addField('total_pages');\n    }\n}\n\nexport default new ProductListQuery();\n"]},"metadata":{},"sourceType":"module"}