{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { CLEAR_COMPARED_PRODUCTS, SET_COMPARE_LIST, SET_COMPARED_PRODUCT_IDS, TOGGLE_COMPARE_LIST_LOADER } from \"./ProductCompare.action\";\n/** #namespace Store/ProductCompare/Reducer/getInitialState */\n\nexport const getInitialState = Mosaic.middleware(function () {\n  return {\n    isLoading: false,\n    count: 0,\n    attributes: [],\n    products: [],\n    productIds: [],\n    items: []\n  };\n}, \"Store/ProductCompare/Reducer/getInitialState\");\n/** #namespace Store/ProductCompare/Reducer */\n\nexport const ProductCompareReducer = Mosaic.middleware(_c = function (state = getInitialState(), action) {\n  const {\n    type\n  } = action;\n\n  switch (type) {\n    case TOGGLE_COMPARE_LIST_LOADER:\n      {\n        const {\n          isLoading\n        } = action;\n        return { ...state,\n          isLoading\n        };\n      }\n\n    case SET_COMPARE_LIST:\n      {\n        const {\n          item_count = 0,\n          items = [],\n          attributes = []\n        } = action;\n        const products = items.map(function (item) {\n          return { ...item.product,\n            attributes: []\n          };\n        });\n        const productIds = products.map(function (product) {\n          return product.id;\n        });\n        return { ...state,\n          count: item_count,\n          attributes,\n          products,\n          productIds,\n          items\n        };\n      }\n\n    case CLEAR_COMPARED_PRODUCTS:\n      {\n        return { ...state,\n          count: 0,\n          products: [],\n          productIds: [],\n          items: [],\n          attributes: []\n        };\n      }\n\n    case SET_COMPARED_PRODUCT_IDS:\n      {\n        const {\n          productIds\n        } = action;\n        return { ...state,\n          productIds\n        };\n      }\n\n    default:\n      return state;\n  }\n}, \"Store/ProductCompare/Reducer\");\n_c2 = ProductCompareReducer;\nexport default ProductCompareReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductCompareReducer$\");\n$RefreshReg$(_c2, \"ProductCompareReducer\");","map":{"version":3,"sources":["/home/arturs/scandiweb/scandipwa/node_modules/@scandipwa/scandipwa/src/store/ProductCompare/ProductCompare.reducer.js"],"names":["CLEAR_COMPARED_PRODUCTS","SET_COMPARE_LIST","SET_COMPARED_PRODUCT_IDS","TOGGLE_COMPARE_LIST_LOADER","getInitialState","isLoading","count","attributes","products","productIds","items","ProductCompareReducer","state","action","type","item_count","map","item","product","id"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SACIA,uBADJ,EAEIC,gBAFJ,EAGIC,wBAHJ,EAIIC,0BAJJ;AAOA;;AACA,OAAO,MAAMC,eAAe,qBAAG;AAAA,SAAO;AAClCC,IAAAA,SAAS,EAAE,KADuB;AAElCC,IAAAA,KAAK,EAAE,CAF2B;AAGlCC,IAAAA,UAAU,EAAE,EAHsB;AAIlCC,IAAAA,QAAQ,EAAE,EAJwB;AAKlCC,IAAAA,UAAU,EAAE,EALsB;AAMlCC,IAAAA,KAAK,EAAE;AAN2B,GAAP;AAAA,CAAH,iDAArB;AASP;;AACA,OAAO,MAAMC,qBAAqB,0BAAG,UAACC,KAAK,GAAGR,eAAe,EAAxB,EAA4BS,MAA5B,EAAuC;AACxE,QAAM;AAAEC,IAAAA;AAAF,MAAWD,MAAjB;;AAEA,UAAQC,IAAR;AACA,SAAKX,0BAAL;AAAiC;AAC7B,cAAM;AAAEE,UAAAA;AAAF,YAAgBQ,MAAtB;AAEA,eAAO,EACH,GAAGD,KADA;AAEHP,UAAAA;AAFG,SAAP;AAIH;;AAED,SAAKJ,gBAAL;AAAuB;AACnB,cAAM;AAAEc,UAAAA,UAAU,GAAG,CAAf;AAAkBL,UAAAA,KAAK,GAAG,EAA1B;AAA8BH,UAAAA,UAAU,GAAG;AAA3C,YAAkDM,MAAxD;AAEA,cAAML,QAAQ,GAAGE,KAAK,CAACM,GAAN,CAAU,UAACC,IAAD;AAAA,iBAAW,EAClC,GAAGA,IAAI,CAACC,OAD0B;AAElCX,YAAAA,UAAU,EAAE;AAFsB,WAAX;AAAA,SAAV,CAAjB;AAIA,cAAME,UAAU,GAAGD,QAAQ,CAACQ,GAAT,CAAa,UAACE,OAAD;AAAA,iBAAaA,OAAO,CAACC,EAArB;AAAA,SAAb,CAAnB;AAEA,eAAO,EACH,GAAGP,KADA;AAEHN,UAAAA,KAAK,EAAES,UAFJ;AAGHR,UAAAA,UAHG;AAIHC,UAAAA,QAJG;AAKHC,UAAAA,UALG;AAMHC,UAAAA;AANG,SAAP;AAQH;;AAED,SAAKV,uBAAL;AAA8B;AAC1B,eAAO,EACH,GAAGY,KADA;AAEHN,UAAAA,KAAK,EAAE,CAFJ;AAGHE,UAAAA,QAAQ,EAAE,EAHP;AAIHC,UAAAA,UAAU,EAAE,EAJT;AAKHC,UAAAA,KAAK,EAAE,EALJ;AAMHH,UAAAA,UAAU,EAAE;AANT,SAAP;AAQH;;AAED,SAAKL,wBAAL;AAA+B;AAC3B,cAAM;AAAEO,UAAAA;AAAF,YAAiBI,MAAvB;AAEA,eAAO,EACH,GAAGD,KADA;AAEHH,UAAAA;AAFG,SAAP;AAIH;;AAED;AACI,aAAOG,KAAP;AAlDJ;AAoDH,CAvDiC,iCAA3B;MAAMD,qB;AAyDb,eAAeA,qBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport {\n    CLEAR_COMPARED_PRODUCTS,\n    SET_COMPARE_LIST,\n    SET_COMPARED_PRODUCT_IDS,\n    TOGGLE_COMPARE_LIST_LOADER\n} from './ProductCompare.action';\n\n/** @namespace Store/ProductCompare/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    isLoading: false,\n    count: 0,\n    attributes: [],\n    products: [],\n    productIds: [],\n    items: []\n});\n\n/** @namespace Store/ProductCompare/Reducer */\nexport const ProductCompareReducer = (state = getInitialState(), action) => {\n    const { type } = action;\n\n    switch (type) {\n    case TOGGLE_COMPARE_LIST_LOADER: {\n        const { isLoading } = action;\n\n        return {\n            ...state,\n            isLoading\n        };\n    }\n\n    case SET_COMPARE_LIST: {\n        const { item_count = 0, items = [], attributes = [] } = action;\n\n        const products = items.map((item) => ({\n            ...item.product,\n            attributes: []\n        }));\n        const productIds = products.map((product) => product.id);\n\n        return {\n            ...state,\n            count: item_count,\n            attributes,\n            products,\n            productIds,\n            items\n        };\n    }\n\n    case CLEAR_COMPARED_PRODUCTS: {\n        return {\n            ...state,\n            count: 0,\n            products: [],\n            productIds: [],\n            items: [],\n            attributes: []\n        };\n    }\n\n    case SET_COMPARED_PRODUCT_IDS: {\n        const { productIds } = action;\n\n        return {\n            ...state,\n            productIds\n        };\n    }\n\n    default:\n        return state;\n    }\n};\n\nexport default ProductCompareReducer;\n"]},"metadata":{},"sourceType":"module"}